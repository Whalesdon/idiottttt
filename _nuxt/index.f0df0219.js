import{d as H,p as y,o as b,b as L,a as P,aE as I,u as S,bi as se,E as k,S as $,v as K,R as A,c as j,t as q,h as Q,D as le,bO as ae,q as W,x as re,aj as ie,ak as ue,al as Z,ad as ce,T as J,s as _}from"./entry.ce650135.js";import{P as fe}from"./index.d37654f6.js";import{p as me}from"./padStart.aaeb481e.js";import{c as de}from"./clone.29a1ea51.js";function He(e,n,t,o){for(var a=e.length,s=t+(o?1:-1);o?s--:++s<a;)if(n(e[s],s,e))return s;return-1}const ve=["preload","poster","controls"],pe=["src"],Ie=H({__name:"VideoPlayer",props:["metadata","mouseEvent","preload"],setup(e){const n=e,t=y(),o=()=>{var s;n.mouseEvent&&((s=t.value)==null||s.play())},a=()=>{n.mouseEvent&&t.value&&(t.value.currentTime=0,t.value.pause())};return(s,l)=>e.metadata.media_url?(b(),L("video",I({key:0,ref_key:"player",ref:t,muted:"",class:"max-w-full",controlsList:"nodownload nofullscreen",preload:e.preload?"metadata":"none",poster:("ImageCDNWrap"in s?s.ImageCDNWrap:S(se))(e.metadata.image),controls:!e.mouseEvent},s.$attrs,{onMouseenter:o,onMouseleave:a}),[P("source",{type:"video/mp4",src:e.metadata.media_url},null,8,pe)],16,ve)):k("",!0)}}),he={class:"flex gap-2"},ye=H({__name:"AudioControl",props:["visible","playing","progressTime","totalTime","small","showPlay","resource","allowDownload","timerClass"],emits:["playPause"],setup(e,{emit:n}){const t=e,o=l=>{const r=Number(l.toFixed());return`${Math.floor(r/60)}:${me((r%60).toString(),2,"0")}`},a=$(()=>Number((t.progressTime/t.totalTime*100).toFixed())),s=async()=>{try{const l=await ae(t.resource,"$XHykAJs1th"),r=URL.createObjectURL(l.data.value),u=document.createElement("a");u.href=r,u.download=de(t.resource).split("/").pop(),u.style.display="none",document.body.appendChild(u),u.click(),URL.revokeObjectURL(r),document.body.removeChild(u)}catch(l){console.log(l,"error")}};return(l,r)=>{const u=K("font-awesome-icon");return e.visible?(b(),L("div",I({key:0,class:"mt-2 flex gap-2 justify-items-center items-center"},l.$attrs,{onClick:r[1]||(r[1]=le(()=>{},["stop"]))}),[P("div",{class:A([e.timerClass,"w-full text-white flex gap-2 items-center justify-between"])},[P("div",he,[e.showPlay?(b(),L("span",{key:0,onClick:r[0]||(r[0]=f=>n("playPause")),id:"audioPlay",class:A({"text-sm":e.small})},[e.playing?(b(),j(u,{key:0,icon:"fa-solid fa-pause"})):k("",!0),e.playing?k("",!0):(b(),j(u,{key:1,icon:"fa-solid fa-play"}))],2)):k("",!0),P("span",{class:A({"text-sm":e.small})},q(o(e.progressTime))+" / "+q(o(e.totalTime)),3)]),e.allowDownload?(b(),j(u,{key:0,onClick:s,class:"text-sm text-white",icon:"fa-solid fa-download"})):k("",!0)],2),Q(S(fe),{class:A(["flex-1 w-full h-2 overflow-hidden rounded",{"max-h-1":e.small}]),"stroke-color":{"0%":"#405fff","100%":"#9c70ff"},strokeLinecap:"round",trailColor:"white",showInfo:!1,percent:S(a)},null,8,["class","percent"])],16)):k("",!0)}}}),we=P("div",{class:"z-20 absolute w-1/5 aspect-1 -ml-1/10 -mt-1/10 top-1/2 left-1/2 flex items-center justify-center rounded-full"},[P("img",{class:"w-3/4 aspect-1",src:"https://static.nfprompt.io/website/nfp/icon/music_icon.svg"})],-1),ge={key:2,class:"block w-1/3 h-1/3 absolute top-1/3 left-1/3",src:"https://static.nfprompt.io/website/nfp/icon/music_img.svg"},be=["loop","src"],We=H({__name:"MusicCard",props:["metadata","cover","mouseEvent","preload","controls","allowDownload","showPlayBtn"],setup(e){const n=e,t=y(),o=y(0),a=y(0),s=y(!1),l=y(),r=()=>{n.mouseEvent&&!n.showPlayBtn&&f()},u=()=>{n.mouseEvent&&!n.showPlayBtn&&(t.value.currentTime=0,c())},f=()=>{var i,m;t.value&&((i=t.value)==null||i.play(),s.value=!0,(m=l.value)==null||m.play())},c=()=>{var i;t.value&&(t.value.pause(),s.value=!1,(i=l.value)==null||i.pause())},v=()=>{s.value?c():f()};return W(()=>{t.value&&(n.controls&&(t.value.addEventListener("loadedmetadata",()=>{o.value=t.value.duration}),t.value.addEventListener("timeupdate",()=>{a.value=t.value.currentTime})),t.value.addEventListener("ended",()=>{var i;a.value=0,t.value.currentTime=0,s.value=!1,(i=l.value)==null||i.stop()}))}),(i,m)=>{const w=K("Vue3Lottie"),h=ye;return b(),L("div",I(i.$attrs,{class:"relative w-full h-full max-w-full max-h-full cursor-pointer rounded-lg overflow-hidden",onMouseenter:r,onMouseleave:u}),[e.cover?(b(),L("div",{key:1,class:"w-full h-full",style:re({background:`linear-gradient(180deg, rgba(9, 12, 21, 0.00) 0%, rgba(9, 12, 21, 0.65) 100%),
       url(${e.cover}) center center / cover no-repeat`})},null,4)):(b(),j(w,{key:0,ref_key:"lottieRef",ref:l,animationLink:"https://nfp-static.oss-ap-northeast-1.aliyuncs.com/website/nfp/music_lottie.json",autoPlay:!1,speed:2},null,512)),we,e.cover?k("",!0):(b(),L("img",ge)),P("audio",{ref_key:"player",ref:t,loop:!e.controls,src:e.metadata},null,8,be),Q(h,{visible:e.controls,playing:S(s),progressTime:S(a),totalTime:S(o),small:!0,showPlay:!0,resource:e.metadata,allowDownload:e.allowDownload,onPlayPause:v,class:"w-full mt-2 flex-col !items-start absolute bottom-2 px-2"},null,8,["visible","playing","progressTime","totalTime","resource","allowDownload"])],16)}}});function ee(e){return ie()?(ue(e),!0):!1}function T(e){return typeof e=="function"?e():S(e)}const Te=typeof window<"u",C=()=>{};function te(e,n){function t(...o){return new Promise((a,s)=>{Promise.resolve(e(()=>n.apply(this,o),{fn:n,thisArg:this,args:o})).then(a).catch(s)})}return t}function xe(e,n={}){let t,o,a=C;const s=r=>{clearTimeout(r),a(),a=C};return r=>{const u=T(e),f=T(n.maxWait);return t&&s(t),u<=0||f!==void 0&&f<=0?(o&&(s(o),o=null),Promise.resolve(r())):new Promise((c,v)=>{a=n.rejectOnCancel?v:c,f&&!o&&(o=setTimeout(()=>{t&&s(t),o=null,c(r())},f)),t=setTimeout(()=>{o&&s(o),o=null,c(r())},u)})}}function Ee(e,n=!0,t=!0,o=!1){let a=0,s,l=!0,r=C,u;const f=()=>{s&&(clearTimeout(s),s=void 0,r(),r=C)};return v=>{const i=T(e),m=Date.now()-a,w=()=>u=v();return f(),i<=0?(a=Date.now(),w()):(m>i&&(t||!l)?(a=Date.now(),w()):n&&(u=new Promise((h,p)=>{r=o?p:h,s=setTimeout(()=>{a=Date.now(),l=!0,h(w()),f()},Math.max(0,i-m))})),!t&&!s&&(s=setTimeout(()=>l=!0,i)),l=!1,u)}}function ke(e,n=200,t={}){return te(xe(n,t),e)}function Pe(e,n=200,t=!1,o=!0,a=!1){return te(Ee(n,t,o,a),e)}function Se(e,n=!0){Z()?W(e):n?e():ce(e)}function R(e){var n;const t=T(e);return(n=t==null?void 0:t.$el)!=null?n:t}const oe=Te?window:void 0;function B(...e){let n,t,o,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,o,a]=e,n=oe):[n,t,o,a]=e,!n)return C;Array.isArray(t)||(t=[t]),Array.isArray(o)||(o=[o]);const s=[],l=()=>{s.forEach(c=>c()),s.length=0},r=(c,v,i,m)=>(c.addEventListener(v,i,m),()=>c.removeEventListener(v,i,m)),u=_(()=>[R(n),T(a)],([c,v])=>{l(),c&&s.push(...t.flatMap(i=>o.map(m=>r(c,i,m,v))))},{immediate:!0,flush:"post"}),f=()=>{u(),l()};return ee(f),f}function Ce(){const e=y(!1);return Z()&&W(()=>{e.value=!0}),e}function De(e){const n=Ce();return $(()=>(n.value,!!e()))}var Y=Object.getOwnPropertySymbols,Le=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable,Me=(e,n)=>{var t={};for(var o in e)Le.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(e!=null&&Y)for(var o of Y(e))n.indexOf(o)<0&&Oe.call(e,o)&&(t[o]=e[o]);return t};function $e(e,n,t={}){const o=t,{window:a=oe}=o,s=Me(o,["window"]);let l;const r=De(()=>a&&"ResizeObserver"in a),u=()=>{l&&(l.disconnect(),l=void 0)},f=$(()=>Array.isArray(e)?e.map(i=>R(i)):[R(e)]),c=_(f,i=>{if(u(),r.value&&a){l=new ResizeObserver(n);for(const m of i)m&&l.observe(m,s)}},{immediate:!0,flush:"post",deep:!0}),v=()=>{u(),c()};return ee(v),{isSupported:r,stop:v}}function _e(e,n={}){const{reset:t=!0,windowResize:o=!0,windowScroll:a=!0,immediate:s=!0}=n,l=y(0),r=y(0),u=y(0),f=y(0),c=y(0),v=y(0),i=y(0),m=y(0);function w(){const h=R(e);if(!h){t&&(l.value=0,r.value=0,u.value=0,f.value=0,c.value=0,v.value=0,i.value=0,m.value=0);return}const p=h.getBoundingClientRect();l.value=p.height,r.value=p.bottom,u.value=p.left,f.value=p.right,c.value=p.top,v.value=p.width,i.value=p.x,m.value=p.y}return $e(e,w),_(()=>R(e),h=>!h&&w()),a&&B("scroll",w,{capture:!0,passive:!0}),o&&B("resize",w,{passive:!0}),Se(()=>{s&&w()}),{height:l,bottom:r,left:u,right:f,top:c,width:v,x:i,y:m,update:w}}const G=1;function Fe(e,n={}){const{throttle:t=0,idle:o=200,onStop:a=C,onScroll:s=C,offset:l={left:0,right:0,top:0,bottom:0},eventListenerOptions:r={capture:!1,passive:!0},behavior:u="auto"}=n,f=y(0),c=y(0),v=$({get(){return f.value},set(d){m(d,void 0)}}),i=$({get(){return c.value},set(d){m(void 0,d)}});function m(d,g){var O,M,x;const D=T(e);D&&((x=D instanceof Document?document.body:D)==null||x.scrollTo({top:(O=T(g))!=null?O:i.value,left:(M=T(d))!=null?M:v.value,behavior:T(u)}))}const w=y(!1),h=J({left:!0,right:!1,top:!0,bottom:!1}),p=J({left:!1,right:!1,top:!1,bottom:!1}),F=d=>{w.value&&(w.value=!1,p.left=!1,p.right=!1,p.top=!1,p.bottom=!1,a(d))},ne=ke(F,t+o),V=d=>{const g=d===document?d.documentElement:d,{display:O,flexDirection:M}=getComputedStyle(g),x=g.scrollLeft;p.left=x<f.value,p.right=x>f.value;const D=Math.abs(x)<=0+(l.left||0),N=Math.abs(x)+g.clientWidth>=g.scrollWidth-(l.right||0)-G;O==="flex"&&M==="row-reverse"?(h.left=N,h.right=D):(h.left=D,h.right=N),f.value=x;let E=g.scrollTop;d===document&&!E&&(E=document.body.scrollTop),p.top=E<c.value,p.bottom=E>c.value;const U=Math.abs(E)<=0+(l.top||0),X=Math.abs(E)+g.clientHeight>=g.scrollHeight-(l.bottom||0)-G;O==="flex"&&M==="column-reverse"?(h.top=X,h.bottom=U):(h.top=U,h.bottom=X),c.value=E},z=d=>{const g=d.target===document?d.target.documentElement:d.target;V(g),w.value=!0,ne(d),s(d)};return B(e,"scroll",t?Pe(z,t,!0,!1):z,r),B(e,"scrollend",F,r),{x:v,y:i,isScrolling:w,arrivedState:h,directions:p,measure(){const d=T(e);d&&V(d)}}}export{Ie as _,ye as a,Fe as b,We as c,He as d,_e as u};
