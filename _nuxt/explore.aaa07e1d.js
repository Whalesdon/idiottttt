import{bV as le,bh as se,bW as ue,d as q,bX as ie,b3 as Y,p as m,S as X,s as D,an as ce,q as re,ad as de,h as k,a5 as L,aw as fe,bL as me,bY as Z,ao as pe,ap as f,aa as J,a9 as I,o as y,b as N,c as H,bZ as ve,u as o,a as V,D as he,E as P,R,P as _e,l as ge,k as ke,f as Q,bA as Ce,A as U,z as B,y as xe,w as O,F as j,g as we,t as be,G as K,aC as ye,b_ as Se,aI as ee,bi as Te,_ as Fe}from"./entry.ce650135.js";import Ie from"./search.83775f7b.js";import{_ as Ve}from"./NewTabNavBtn.7e746057.js";import{_ as Ne}from"./Message.vue.93b12984.js";import{a as Me,b as Ae}from"./Detail.vue.9cd31fa3.js";import{_ as Be}from"./NFTDetailModal.vue.7bd345e6.js";import{b as De}from"./index.f0df0219.js";import{d as W,f as Pe}from"./find.c7b6360f.js";import{u as Ee}from"./Input.32daff34.js";import{b as $e}from"./index.d37654f6.js";import{c as ze,t as Le}from"./_toKey.9619eec3.js";import{b as Ue}from"./get.8dfc710b.js";import{b as Oe}from"./padStart.aaeb481e.js";import"./Loading.2df75328.js";import"./index.e6063050.js";import"./SearchOutlined.5b731edd.js";import"./index.c1d06b6f.js";import"./_Uint8Array.05303a70.js";import"./_MapCache.6f623674.js";import"./Avatar.013398e0.js";import"./index.cd670c12.js";import"./clone.29a1ea51.js";import"./comment.a4baebbf.js";import"./CloseIcon.vue.54931ba9.js";import"./_baseProperty.e6905a07.js";function Ke(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}function We(t,e){return e.length<2?t:Ue(t,Oe(e,0,-1))}function He(t,e){return e=ze(e,t),t=We(t,e),t==null||delete t[Le(Ke(e))]}var Re=Array.prototype,qe=Re.splice;function Ge(t,e){for(var i=t?e.length:0,a=i-1;i--;){var s=e[i];if(i==a||s!==v){var v=s;le(s)?qe.call(t,s,1):He(t,s)}}return t}function Ye(t,e){var i=[];if(!(t&&t.length))return i;var a=-1,s=[],v=t.length;for(e=$e(e);++a<v;){var p=t[a];e(p,a,t)&&(i.push(p),s.push(a))}return Ge(t,s),i}var Xe=ue("small","default"),Ze=function(){return{id:String,prefixCls:String,size:f.oneOf(Xe),disabled:{type:Boolean,default:void 0},checkedChildren:f.any,unCheckedChildren:f.any,tabindex:f.oneOfType([f.string,f.number]),autofocus:{type:Boolean,default:void 0},loading:{type:Boolean,default:void 0},checked:f.oneOfType([f.string,f.number,f.looseBool]),checkedValue:f.oneOfType([f.string,f.number,f.looseBool]).def(!0),unCheckedValue:f.oneOfType([f.string,f.number,f.looseBool]).def(!1),onChange:{type:Function},onClick:{type:Function},onKeydown:{type:Function},onMouseup:{type:Function},"onUpdate:checked":{type:Function},onBlur:Function,onFocus:Function}},Je=q({compatConfig:{MODE:3},name:"ASwitch",__ANT_SWITCH:!0,inheritAttrs:!1,props:Ze(),slots:["checkedChildren","unCheckedChildren"],setup:function(e,i){var a=i.attrs,s=i.slots,v=i.expose,p=i.emit,S=Ee();ie(function(){Y(!("defaultChecked"in a),"Switch","'defaultChecked' is deprecated, please use 'v-model:checked'"),Y(!("value"in a),"Switch","`value` is not validate prop, do you mean `checked`?")});var C=m(e.checked!==void 0?e.checked:a.defaultChecked),x=X(function(){return C.value===e.checkedValue});D(function(){return e.checked},function(){C.value=e.checked});var c=ce("switch",e),n=c.prefixCls,h=c.direction,b=c.size,_=m(),T=function(){var l;(l=_.value)===null||l===void 0||l.focus()},E=function(){var l;(l=_.value)===null||l===void 0||l.blur()};v({focus:T,blur:E}),re(function(){de(function(){e.autofocus&&!e.disabled&&_.value.focus()})});var M=function(l,w){e.disabled||(p("update:checked",l),p("change",l,w),S.onFieldChange())},$=function(l){p("blur",l)},z=function(l){T();var w=x.value?e.unCheckedValue:e.checkedValue;M(w,l),p("click",w,l)},r=function(l){l.keyCode===J.LEFT?M(e.unCheckedValue,l):l.keyCode===J.RIGHT&&M(e.checkedValue,l),p("keydown",l)},d=function(l){var w;(w=_.value)===null||w===void 0||w.blur(),p("mouseup",l)},F=X(function(){var u;return u={},I(u,"".concat(n.value,"-small"),b.value==="small"),I(u,"".concat(n.value,"-loading"),e.loading),I(u,"".concat(n.value,"-checked"),x.value),I(u,"".concat(n.value,"-disabled"),e.disabled),I(u,n.value,!0),I(u,"".concat(n.value,"-rtl"),h.value==="rtl"),u});return function(){var u;return k(pe,{insertExtraNode:!0},{default:function(){return[k("button",L(L(L({},fe(e,["prefixCls","checkedChildren","unCheckedChildren","checked","autofocus","checkedValue","unCheckedValue","id","onChange","onUpdate:checked"])),a),{},{id:(u=e.id)!==null&&u!==void 0?u:S.id.value,onKeydown:r,onClick:z,onBlur:$,onMouseup:d,type:"button",role:"switch","aria-checked":C.value,disabled:e.disabled||e.loading,class:[a.class,F.value],ref:_}),[k("div",{class:"".concat(n.value,"-handle")},[e.loading?k(me,{class:"".concat(n.value,"-loading-icon")},null):null]),k("span",{class:"".concat(n.value,"-inner")},[x.value?Z(s,e,"checkedChildren"):Z(s,e,"unCheckedChildren")])])]}})}}});const Qe=se(Je),je=["onPaste","innerHTML"],et={key:0,class:"text-4 md:text-9 text-[#68718D] absolute left-1/2 -ml-100px z-0"},tt=q({__name:"NewSearchAutocomplete",props:["modalValue"],emits:["update:modalValue"],setup(t,{emit:e}){const i=m(!1),a=m(),s=m(""),v=()=>{i.value=!0},p=()=>{i.value=!1},S=c=>{var n,h;e("update:modalValue",(n=c.target)==null?void 0:n.innerText),(h=c.target)!=null&&h.innerText&&(i.value=!0)},C=c=>{var h,b,_;c.preventDefault(),c.stopPropagation();const n=c.clipboardData.getData("text/plain");s.value+=(h=n==null?void 0:n.replace(/\n/g,""))==null?void 0:h.trim(),(b=window.getSelection())==null||b.selectAllChildren(a.value),(_=window.getSelection())==null||_.collapseToEnd(),setTimeout(()=>{x(c.target)},4),e("update:modalValue",s.value)};function x(c){if(window.getSelection){c==null||c.focus();var n=window.getSelection();n.selectAllChildren(c),n.collapseToEnd()}}return(c,n)=>(y(),N("div",{class:R(["search-input-box",{"search-input-box-focus":o(i)}]),onClick:n[0]||(n[0]=(...h)=>o(a).click&&o(a).click(...h))},[(y(),H(ve(o(Ie)),{class:"w-54px aspect-square fill-[#68718D] flex-shrink-0"})),V("p",{ref_key:"input",ref:a,contenteditable:"",class:"text-[#3772FF] h-30px md:h-50px min-w-267px outline-none text-5 md:text-9 relative z-1 -ml-1 md:ml-10px break-all overflow-hidden whitespace-nowrap",onFocus:v,onBlur:p,onPaste:he(C,["stop"]),onInput:S,innerHTML:o(s)},null,40,je),!o(i)&&!t.modalValue?(y(),N("div",et," Search Prompts ")):P("",!0)],2))}});const at=_e(tt,[["__scopeId","data-v-1fb98eac"]]),nt={class:"flex-center flex-col xl:flex-row gap-4 mt-8 xl:mt-12 mb-8 relative"},ot={class:"xl:absolute right-0 flex items-center gap-4 flex-shrink-0 h-9"},lt={class:"font-medium text-5"},st={key:0,class:"text-standard-small flex-center gap-2 text-[#90A0CC]"},ut={class:"flex items-center gap-2 cursor-pointer flex-wrap"},it=["onClick"],Pt=q({__name:"explore",setup(t){const e=m(),i=ge(),a=ke(),s=m([]),v=m({}),p=m("Featured"),S=m([]),C=m(!1),x=m(0),c=m(50),n=m(!0),h=m(!1),b=m(""),_=m([]);Q({title:"Home"});const T=async()=>{var r;if(n.value)try{h.value=!0;const d=await ye("/api/v1/artworks",{method:"post",query:{page:x.value,size:c.value},body:{tagnames:_.value,keyword:b.value,sort_by:Se(p.value),listed:C.value,...i.query}}),{data:F}=d.data.value||{};let u=F;a.operationConfig.feed&&a.isActiveDuration(a.operationConfig.feed.activeTime)&&u.unshift({image:a.operationConfig.feed.image,href:a.operationConfig.feed.url,media_url:a.operationConfig.feed.image,media_type:(r=a.operationConfig.feed.image)!=null&&r.match(/\.mp4$/)?ee.VIDEO:ee.IMAGE}),s.value=s.value.concat(u),Q({ogImage:Te(s.value[0].image)}),n.value=F.length>=c.value,x.value+=1}catch{}finally{setTimeout(()=>{h.value=!1},100)}},E=async()=>{S.value=a.operationConfig.popularTags},M=W(r=>{r!=b.value&&(b.value=r,n.value=!0,x.value=0,s.value=[],T(),B("TopSearch",{name:r}))},600),$=W(r=>{n.value=!0,x.value=0,s.value=[],Pe(_.value,d=>d===r)?Ye(_.value,d=>d===r):_.value.push(r),T(),B("TopTag",{name:r})},600),z=(r,d)=>{r.href?(B("ActEntry",{name:"feed",ext:{position:d}}),window.location.href=r.href):v.value=r};{const{arrivedState:r}=De(m(window)),{bottom:d}=Ce(r);D(()=>d.value,()=>{!h.value&&T()})}return T(),D(()=>a.configLoaded,()=>{a.configLoaded&&E()},{immediate:!0}),D(()=>[p.value,C.value],W(()=>{x.value=0,n.value=!0,s.value=[],T()},600)),(r,d)=>{var G;const F=at,u=Ve,l=Fe,w=Ne,te=Me,ae=Ae,ne=Be;return y(),N(j,null,[V("div",{ref_key:"feed",ref:e,class:R(["page my-8 xl:my-15",{"!overflow-hidden":!o(K)(o(v))}])},[k(F,{class:"mx-auto md:min-w-150",modalValue:o(b),"onUpdate:modalValue":o(M)},null,8,["modalValue","onUpdate:modalValue"]),V("div",nt,[k(u,{class:"leading-27px !gap-0 md:!gap-5",value:o(p),"onUpdate:value":d[0]||(d[0]=g=>U(p)?p.value=g:null),tabs:["Featured","PFP","Video","Music","Newest"],onChange:d[1]||(d[1]=g=>{o(B)("ExploreTab",{name:g})})},null,8,["value"]),V("div",ot,[V("div",lt,[xe(" Buy Now "),k(o(Qe),{checked:o(C),"onUpdate:checked":d[2]||(d[2]=g=>U(C)?C.value=g:null)},null,8,["checked"])])])]),k(l,null,{default:O(()=>{var g;return[((g=o(S))==null?void 0:g.length)>0?(y(),N("div",st,[V("span",ut,[(y(!0),N(j,null,we(o(S),(A,oe)=>(y(),N("span",{class:R(["border-1 border-solid border-[#68718D] rounded-25 px-3 py-2px text-[#C3C7D3] hover:opacity-50 transition-all",{"!text-[#3772FF] !border-[#3772FF] !border-2px font-bold":o(_).includes(A)}]),key:oe,onClick:ct=>o($)(A)}," #"+be(A),11,it))),128))])])):P("",!0)]}),_:1}),!((G=o(s))!=null&&G.length)&&!o(h)?(y(),H(w,{key:0,class:"flex-center h-100 w-full",msg:"No Arts..."})):P("",!0),k(l,null,{default:O(()=>[k(ae,{class:"mt-8",columnWidth:290,gap:15,items:o(s),loading:o(h)},{default:O(({item:g,index:A})=>[k(te,{data:g,onClick:()=>{o(B)("ExploreClick",{name:"PicClick"}),z(g,A)}},null,8,["data","onClick"])]),_:1},8,["items","loading"])]),_:1})],2),o(K)(o(v))?P("",!0):(y(),H(ne,{key:0,visible:!o(K)(o(v)),data:o(v),"onUpdate:data":d[3]||(d[3]=g=>U(v)?v.value=g:null)},null,8,["visible","data"]))],64)}}});export{Pt as default};
