import{b2 as sa,a5 as W,ap as Z,d as ee,an as xt,a7 as na,af as Sa,ac as bt,q as et,b3 as yt,p as M,b4 as Pa,am as Re,a8 as we,a9 as q,h as v,s as ie,S as ae,a6 as Ma,a3 as _e,b5 as _t,b6 as Ea,ad as oa,b7 as Fa,b8 as Dt,b9 as Ut,ba as ia,Y as la,bb as Ia,bc as ra,bd as Le,aa as Te,be as ht,bf as Na,bg as Va,ab as At,bh as Ba,o as b,b as V,a as l,t as Q,ay as Oa,E as G,F as se,g as me,x as tt,z as B,v as re,u as o,y as H,w as L,N as wt,O as kt,P as Ct,bi as ca,j as ke,aO as at,i as xe,bj as ze,bk as J,T as Me,aN as st,c as z,H as le,A as Se,M as We,aC as oe,bl as nt,bm as ne,bn as he,l as ot,k as Tt,R as pe,D as $t,az as it,bo as Ke,bp as ve,bq as $e,br as Be,bs as Lt,bt as Ra,bu as Da,bv as Ht,K as Ee,bw as Ua,bx as lt,G as St,L as Je,_ as rt,m as ua,by as Ue,bz as Fe,aI as Ne,aE as Aa,a_ as La,bA as Ha,aD as He,J as Ga}from"./entry.ce650135.js";import{u as ja,_ as Gt,a as za,b as Wa,c as da}from"./index.f0df0219.js";import{c as Ja,_ as qa,U as Pt}from"./index.319c42a6.js";import{u as Mt,I as Pe}from"./Input.32daff34.js";import{u as Et}from"./NormalFetch.5697d132.js";import{h as Ka,s as Xa,c as Ya}from"./padStart.aaeb481e.js";import{d as Za,f as Qa}from"./find.c7b6360f.js";import{B as Ft,t as es,T as de}from"./index.c1d06b6f.js";import{V as ts,_ as as}from"./FormItem.vue.c05b98b6.js";import{c as je}from"./clone.29a1ea51.js";import{S as pa}from"./index.50774e21.js";import{T as Ve}from"./index.d37654f6.js";import{I as It}from"./index.e6063050.js";import{_ as ss}from"./Message.vue.93b12984.js";import{_ as ns}from"./SignIn.vue.0a1068aa.js";import"./_baseProperty.e6905a07.js";import"./_toKey.9619eec3.js";import"./_MapCache.6f623674.js";import"./_Uint8Array.05303a70.js";import"./SearchOutlined.5b731edd.js";import"./get.8dfc710b.js";function os(d){return function(e){e=sa(e);var t=Ka(e)?Xa(e):void 0,a=t?t[0]:e.charAt(0),n=t?Ya(t,1).join(""):e.slice(1);return a[d]()+n}}var is=os("toUpperCase");const ct=is;function ut(d){return ct(sa(d).toLowerCase())}var ls=Ja(function(d,e,t){return d+(t?"_":"")+e.toLowerCase()});const rs=ls;var cs=function(){return{name:String,prefixCls:String,options:{type:Array,default:function(){return[]}},disabled:Boolean,id:String}},us=function(){return W(W({},cs()),{},{defaultValue:{type:Array},value:{type:Array},onChange:{type:Function},"onUpdate:value":{type:Function}})},ds=function(){return{prefixCls:String,defaultChecked:{type:Boolean,default:void 0},checked:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},isGroup:{type:Boolean,default:void 0},value:Z.any,name:String,id:String,indeterminate:{type:Boolean,default:void 0},type:{type:String,default:"checkbox"},autofocus:{type:Boolean,default:void 0},onChange:Function,"onUpdate:checked":Function,onClick:Function,skipGroup:{type:Boolean,default:!1}}},ps=function(){return W(W({},ds()),{},{indeterminate:{type:Boolean,default:!1}})},ma=Symbol("CheckboxGroupContext"),ms=["indeterminate","skipGroup","id"],fs=["onMouseenter","onMouseleave","onInput","class","style"];const ge=ee({compatConfig:{MODE:3},name:"ACheckbox",inheritAttrs:!1,__ANT_CHECKBOX:!0,props:ps(),setup:function(e,t){var a=t.emit,n=t.attrs,s=t.slots,i=t.expose,u=Mt(),p=xt("checkbox",e),c=p.prefixCls,r=p.direction,f=na(ma,void 0),y=Symbol("checkboxUniId");Sa(function(){!e.skipGroup&&f&&f.registerValue(y,e.value)}),bt(function(){f&&f.cancelValue(y)}),et(function(){yt(e.checked!==void 0||f||e.value===void 0,"Checkbox","`value` is not validate prop, do you mean `checked`?")});var T=function(_){var E=_.target.checked;a("update:checked",E),a("change",_)},h=M(),U=function(){var _;(_=h.value)===null||_===void 0||_.focus()},O=function(){var _;(_=h.value)===null||_===void 0||_.blur()};return i({focus:U,blur:O}),function(){var $,_,E=Pa(($=s.default)===null||$===void 0?void 0:$.call(s)),N=e.indeterminate,F=e.skipGroup,k=e.id,S=k===void 0?u.id.value:k,P=Re(e,ms),A=n.onMouseenter,g=n.onMouseleave;n.onInput;var m=n.class,x=n.style,w=Re(n,fs),R=W(W({},P),{},{id:S,prefixCls:c.value},w);f&&!F?(R.onChange=function(){for(var I=arguments.length,X=new Array(I),ce=0;ce<I;ce++)X[ce]=arguments[ce];a.apply(void 0,["change"].concat(X)),f.toggleOption({label:E,value:e.value})},R.name=f.name.value,R.checked=f.mergedValue.value.indexOf(e.value)!==-1,R.disabled=e.disabled||f.disabled.value,R.indeterminate=N):R.onChange=T;var D=we((_={},q(_,"".concat(c.value,"-wrapper"),!0),q(_,"".concat(c.value,"-rtl"),r.value==="rtl"),q(_,"".concat(c.value,"-wrapper-checked"),R.checked),q(_,"".concat(c.value,"-wrapper-disabled"),R.disabled),_),m),C=we(q({},"".concat(c.value,"-indeterminate"),N));return v("label",{class:D,style:x,onMouseenter:A,onMouseleave:g},[v(ts,W(W({},R),{},{class:C,ref:h}),null),E.length?v("span",null,[E]):null])}}}),gt=ee({compatConfig:{MODE:3},name:"ACheckboxGroup",props:us(),setup:function(e,t){var a=t.slots,n=t.emit,s=t.expose,i=Mt(),u=xt("checkbox",e),p=u.prefixCls,c=u.direction,r=M((e.value===void 0?e.defaultValue:e.value)||[]);ie(function(){return e.value},function(){r.value=e.value||[]});var f=ae(function(){return e.options.map(function(_){return typeof _=="string"||typeof _=="number"?{label:_,value:_}:_})}),y=M(Symbol()),T=M(new Map),h=function(E){T.value.delete(E),y.value=Symbol()},U=function(E,N){T.value.set(E,N),y.value=Symbol()},O=M(new Map);ie(y,function(){var _=new Map,E=qa(T.value.values()),N;try{for(E.s();!(N=E.n()).done;){var F=N.value;_.set(F,!0)}}catch(k){E.e(k)}finally{E.f()}O.value=_});var $=function(E){var N=r.value.indexOf(E.value),F=_e(r.value);N===-1?F.push(E.value):F.splice(N,1),e.value===void 0&&(r.value=F);var k=F.filter(function(S){return O.value.has(S)}).sort(function(S,P){var A=f.value.findIndex(function(m){return m.value===S}),g=f.value.findIndex(function(m){return m.value===P});return A-g});n("update:value",k),n("change",k),i.onFieldChange()};return Ma(ma,{cancelValue:h,registerValue:U,toggleOption:$,mergedValue:r,name:ae(function(){return e.name}),disabled:ae(function(){return e.disabled})}),s({mergedValue:r}),function(){var _,E=e.id,N=E===void 0?i.id.value:E,F=null,k="".concat(p.value,"-group");return f.value&&f.value.length>0&&(F=f.value.map(function(S){var P;return v(ge,{prefixCls:p.value,key:S.value.toString(),disabled:"disabled"in S?S.disabled:e.disabled,indeterminate:S.indeterminate,value:S.value,checked:r.value.indexOf(S.value)!==-1,onChange:S.onChange,class:"".concat(k,"-item")},{default:function(){return[S.label===void 0?(P=a.label)===null||P===void 0?void 0:P.call(a,S):S.label]}})})),v("div",{class:[k,q({},"".concat(k,"-rtl"),c.value==="rtl")],id:N},[F||((_=a.default)===null||_===void 0?void 0:_.call(a))])}}});ge.Group=gt;ge.install=function(d){return d.component(ge.name,ge),d.component(gt.name,gt),d};var vs=["class","style"],hs=function(){return{prefixCls:String,spinning:{type:Boolean,default:void 0},size:String,wrapperClassName:String,tip:Z.any,delay:Number,indicator:Z.any}},Qe=null;function gs(d,e){return!!d&&!!e&&!isNaN(Number(e))}function xs(d){var e=d.indicator;Qe=typeof e=="function"?e:function(){return v(e,null,null)}}const Ge=ee({compatConfig:{MODE:3},name:"ASpin",inheritAttrs:!1,props:_t(hs(),{size:"default",spinning:!0,wrapperClassName:""}),setup:function(){return{originalUpdateSpinning:null,configProvider:na("configProvider",Ea)}},data:function(){var e=this.spinning,t=this.delay,a=gs(e,t);return{sSpinning:e&&!a}},created:function(){this.originalUpdateSpinning=this.updateSpinning,this.debouncifyUpdateSpinning(this.$props)},mounted:function(){this.updateSpinning()},updated:function(){var e=this;oa(function(){e.debouncifyUpdateSpinning(),e.updateSpinning()})},beforeUnmount:function(){this.cancelExistingSpin()},methods:{debouncifyUpdateSpinning:function(e){var t=e||this.$props,a=t.delay;a&&(this.cancelExistingSpin(),this.updateSpinning=Za(this.originalUpdateSpinning,a))},updateSpinning:function(){var e=this.spinning,t=this.sSpinning;t!==e&&(this.sSpinning=e)},cancelExistingSpin:function(){var e=this.updateSpinning;e&&e.cancel&&e.cancel()},renderIndicator:function(e){var t="".concat(e,"-dot"),a=Fa(this,"indicator");return a===null?null:(Array.isArray(a)&&(a=a.length===1?a[0]:a),Dt(a)?Ut(a,{class:t}):Qe&&Dt(Qe())?Ut(Qe(),{class:t}):v("span",{class:"".concat(t," ").concat(e,"-dot-spin")},[v("i",{class:"".concat(e,"-dot-item")},null),v("i",{class:"".concat(e,"-dot-item")},null),v("i",{class:"".concat(e,"-dot-item")},null),v("i",{class:"".concat(e,"-dot-item")},null)]))}},render:function(){var e,t,a,n=this.$props,s=n.size,i=n.prefixCls,u=n.tip,p=u===void 0?(e=(t=this.$slots).tip)===null||e===void 0?void 0:e.call(t):u,c=n.wrapperClassName,r=this.$attrs,f=r.class,y=r.style,T=Re(r,vs),h=this.configProvider,U=h.getPrefixCls,O=h.direction,$=U("spin",i),_=this.sSpinning,E=(a={},q(a,$,!0),q(a,"".concat($,"-sm"),s==="small"),q(a,"".concat($,"-lg"),s==="large"),q(a,"".concat($,"-spinning"),_),q(a,"".concat($,"-show-text"),!!p),q(a,"".concat($,"-rtl"),O==="rtl"),q(a,f,!!f),a),N=v("div",W(W({},T),{},{style:y,class:E}),[this.renderIndicator($),p?v("div",{class:"".concat($,"-text")},[p]):null]),F=ia(this);if(F&&F.length){var k,S=(k={},q(k,"".concat($,"-container"),!0),q(k,"".concat($,"-blur"),_),k);return v("div",{class:["".concat($,"-nested-loading"),c]},[_&&v("div",{key:"loading"},[N]),v("div",{class:S,key:"container"},[F])])}return N}});Ge.setDefaultIndicator=xs;Ge.install=function(d){return d.component(Ge.name,Ge),d};var fa=function(e,t){var a,n,s=t.attrs,i=s.included,u=s.vertical,p=s.style,c=s.class,r=s.length,f=s.offset,y=s.reverse;r<0&&(y=!y,r=Math.abs(r),f=100-f);var T=u?(a={},q(a,y?"top":"bottom","".concat(f,"%")),q(a,y?"bottom":"top","auto"),q(a,"height","".concat(r,"%")),a):(n={},q(n,y?"right":"left","".concat(f,"%")),q(n,y?"left":"right","auto"),q(n,"width","".concat(r,"%")),n),h=W(W({},p),T);return i?v("div",{class:c,style:h},null):null};fa.inheritAttrs=!1;const va=fa;var bs=function(e,t,a,n,s,i){yt(a?n>0:!0,"Slider","`Slider[step]` should be a positive number in order to make Slider[dots] work.");var u=Object.keys(t).map(parseFloat).sort(function(c,r){return c-r});if(a&&n)for(var p=s;p<=i;p+=n)u.indexOf(p)===-1&&u.push(p);return u},ha=function(e,t){var a=t.attrs,n=a.prefixCls,s=a.vertical,i=a.reverse,u=a.marks,p=a.dots,c=a.step,r=a.included,f=a.lowerBound,y=a.upperBound,T=a.max,h=a.min,U=a.dotStyle,O=a.activeDotStyle,$=T-h,_=bs(s,u,p,c,h,T).map(function(E){var N,F="".concat(Math.abs(E-h)/$*100,"%"),k=!r&&E===y||r&&E<=y&&E>=f,S=s?W(W({},U),{},q({},i?"top":"bottom",F)):W(W({},U),{},q({},i?"right":"left",F));k&&(S=W(W({},S),O));var P=we((N={},q(N,"".concat(n,"-dot"),!0),q(N,"".concat(n,"-dot-active"),k),q(N,"".concat(n,"-dot-reverse"),i),N));return v("span",{class:P,style:S,key:E},null)});return v("div",{class:"".concat(n,"-step")},[_])};ha.inheritAttrs=!1;const ys=ha;var ga=function(e,t){var a=t.attrs,n=t.slots,s=a.class,i=a.vertical,u=a.reverse,p=a.marks,c=a.included,r=a.upperBound,f=a.lowerBound,y=a.max,T=a.min,h=a.onClickLabel,U=Object.keys(p),O=n.mark,$=y-T,_=U.map(parseFloat).sort(function(E,N){return E-N}).map(function(E){var N,F=typeof p[E]=="function"?p[E]():p[E],k=la(F)==="object"&&!Ia(F),S=k?F.label:F;if(!S&&S!==0)return null;O&&(S=O({point:E,label:S}));var P=!c&&E===r||c&&E<=r&&E>=f,A=we((N={},q(N,"".concat(s,"-text"),!0),q(N,"".concat(s,"-text-active"),P),N)),g=q({marginBottom:"-50%"},u?"top":"bottom","".concat((E-T)/$*100,"%")),m=q({transform:"translateX(".concat(u?"50%":"-50%",")"),msTransform:"translateX(".concat(u?"50%":"-50%",")")},u?"right":"left","".concat((E-T)/$*100,"%")),x=i?g:m,w=k?W(W({},x),F.style):x,R=q({},ra?"onTouchstartPassive":"onTouchstart",function(D){return h(D,E)});return v("span",W({class:A,style:w,key:E,onMousedown:function(C){return h(C,E)}},R),[S])});return v("div",{class:s},[_])};ga.inheritAttrs=!1;const _s=ga,xa=ee({compatConfig:{MODE:3},name:"Handle",inheritAttrs:!1,props:{prefixCls:String,vertical:{type:Boolean,default:void 0},offset:Number,disabled:{type:Boolean,default:void 0},min:Number,max:Number,value:Number,tabindex:Z.oneOfType([Z.number,Z.string]),reverse:{type:Boolean,default:void 0},ariaLabel:String,ariaLabelledBy:String,ariaValueTextFormatter:Function,onMouseenter:{type:Function},onMouseleave:{type:Function},onMousedown:{type:Function}},setup:function(e,t){var a=t.attrs,n=t.emit,s=t.expose,i=M(!1),u=M(),p=function(){document.activeElement===u.value&&(i.value=!0)},c=function(_){i.value=!1,n("blur",_)},r=function(){i.value=!1},f=function(){var _;(_=u.value)===null||_===void 0||_.focus()},y=function(){var _;(_=u.value)===null||_===void 0||_.blur()},T=function(){i.value=!0,f()},h=function(_){_.preventDefault(),f(),n("mousedown",_)};s({focus:f,blur:y,clickFocus:T,ref:u});var U=null;et(function(){U=Le(document,"mouseup",p)}),bt(function(){var $;($=U)===null||$===void 0||$.remove()});var O=ae(function(){var $,_,E=e.vertical,N=e.offset,F=e.reverse;return E?($={},q($,F?"top":"bottom","".concat(N,"%")),q($,F?"bottom":"top","auto"),q($,"transform",F?null:"translateY(+50%)"),$):(_={},q(_,F?"right":"left","".concat(N,"%")),q(_,F?"left":"right","auto"),q(_,"transform","translateX(".concat(F?"+":"-","50%)")),_)});return function(){var $=e.prefixCls,_=e.disabled,E=e.min,N=e.max,F=e.value,k=e.tabindex,S=e.ariaLabel,P=e.ariaLabelledBy,A=e.ariaValueTextFormatter,g=e.onMouseenter,m=e.onMouseleave,x=we(a.class,q({},"".concat($,"-handle-click-focused"),i.value)),w={"aria-valuemin":E,"aria-valuemax":N,"aria-valuenow":F,"aria-disabled":!!_},R=[a.style,O.value],D=k||0;(_||k===null)&&(D=null);var C;A&&(C=A(F));var I=W(W(W({},a),{},{role:"slider",tabindex:D},w),{},{class:x,onBlur:c,onKeydown:r,onMousedown:h,onMouseenter:g,onMouseleave:m,ref:u,style:R});return v("div",W(W({},I),{},{"aria-label":S,"aria-labelledby":P,"aria-valuetext":C}),null)}}});function ft(d,e){try{return Object.keys(e).some(function(t){return d.target===e[t].ref})}catch{return!1}}function ba(d,e){var t=e.min,a=e.max;return d<t||d>a}function jt(d){return d.touches.length>1||d.type.toLowerCase()==="touchend"&&d.touches.length>0}function zt(d,e){var t=e.marks,a=e.step,n=e.min,s=e.max,i=Object.keys(t).map(parseFloat);if(a!==null){var u=Math.pow(10,ya(a)),p=Math.floor((s*u-n*u)/(a*u)),c=Math.min((d-n)/a,p),r=Math.round(c)*a+n;i.push(r)}var f=i.map(function(y){return Math.abs(d-y)});return i[f.indexOf(Math.min.apply(Math,_e(f)))]}function ya(d){var e=d.toString(),t=0;return e.indexOf(".")>=0&&(t=e.length-e.indexOf(".")-1),t}function Wt(d,e){var t=1;return window.visualViewport&&(t=+(window.visualViewport.width/document.body.getBoundingClientRect().width).toFixed(2)),(d?e.clientY:e.pageX)/t}function Jt(d,e){var t=1;return window.visualViewport&&(t=+(window.visualViewport.width/document.body.getBoundingClientRect().width).toFixed(2)),(d?e.touches[0].clientY:e.touches[0].pageX)/t}function qt(d,e){var t=e.getBoundingClientRect();return d?t.top+t.height*.5:window.pageXOffset+t.left+t.width*.5}function Nt(d,e){var t=e.max,a=e.min;return d<=a?a:d>=t?t:d}function _a(d,e){var t=e.step,a=isFinite(zt(d,e))?zt(d,e):0;return t===null?a:parseFloat(a.toFixed(ya(t)))}function De(d){d.stopPropagation(),d.preventDefault()}function ws(d,e,t){var a={increase:function(u,p){return u+p},decrease:function(u,p){return u-p}},n=a[d](Object.keys(t.marks).indexOf(JSON.stringify(e)),1),s=Object.keys(t.marks)[n];return t.step?a[d](e,t.step):Object.keys(t.marks).length&&t.marks[s]?t.marks[s]:e}function wa(d,e,t){var a="increase",n="decrease",s=a;switch(d.keyCode){case Te.UP:s=e&&t?n:a;break;case Te.RIGHT:s=!e&&t?n:a;break;case Te.DOWN:s=e&&t?a:n;break;case Te.LEFT:s=!e&&t?a:n;break;case Te.END:return function(i,u){return u.max};case Te.HOME:return function(i,u){return u.min};case Te.PAGE_UP:return function(i,u){return i+u.step*2};case Te.PAGE_DOWN:return function(i,u){return i-u.step*2};default:return}return function(i,u){return ws(s,i,u)}}var ks=["index","directives","className","style"];function Ie(){}function ka(d){var e={id:String,min:Number,max:Number,step:Number,marks:Z.object,included:{type:Boolean,default:void 0},prefixCls:String,disabled:{type:Boolean,default:void 0},handle:Function,dots:{type:Boolean,default:void 0},vertical:{type:Boolean,default:void 0},reverse:{type:Boolean,default:void 0},minimumTrackStyle:Z.object,maximumTrackStyle:Z.object,handleStyle:Z.oneOfType([Z.object,Z.arrayOf(Z.object)]),trackStyle:Z.oneOfType([Z.object,Z.arrayOf(Z.object)]),railStyle:Z.object,dotStyle:Z.object,activeDotStyle:Z.object,autofocus:{type:Boolean,default:void 0},draggableTrack:{type:Boolean,default:void 0}};return ee({compatConfig:{MODE:3},name:"CreateSlider",mixins:[Ft,d],inheritAttrs:!1,slots:["mark"],props:_t(e,{prefixCls:"rc-slider",min:0,max:100,step:1,marks:{},included:!0,disabled:!1,dots:!1,vertical:!1,reverse:!1,trackStyle:[{}],handleStyle:[{}],railStyle:{},dotStyle:{},activeDotStyle:{}}),emits:["change","blur","focus"],data:function(){var a=this.step,n=this.max,s=this.min,i=isFinite(n-s)?(n-s)%a===0:!0;return yt(a&&Math.floor(a)===a?i:!0,"Slider[max] - Slider[min] (".concat(n-s,") should be a multiple of Slider[step] (").concat(a,")")),this.handlesRefs={},{}},mounted:function(){var a=this;this.$nextTick(function(){a.document=a.sliderRef&&a.sliderRef.ownerDocument;var n=a.autofocus,s=a.disabled;n&&!s&&a.focus()})},beforeUnmount:function(){var a=this;this.$nextTick(function(){a.removeDocumentEvents()})},methods:{defaultHandle:function(a){var n=a.index;a.directives;var s=a.className,i=a.style,u=Re(a,ks);if(delete u.dragging,u.value===null)return null;var p=W(W({},u),{},{class:s,style:i,key:n});return v(xa,p,null)},onDown:function(a,n){var s=n,i=this.$props,u=i.draggableTrack,p=i.vertical,c=this.$data.bounds,r=u&&this.positionGetValue?this.positionGetValue(s)||[]:[],f=ft(a,this.handlesRefs);if(this.dragTrack=u&&c.length>=2&&!f&&!r.map(function(T,h){var U=h?!0:T>=c[h];return h===r.length-1?T<=c[h]:U}).some(function(T){return!T}),this.dragTrack)this.dragOffset=s,this.startBounds=_e(c);else{if(!f)this.dragOffset=0;else{var y=qt(p,a.target);this.dragOffset=s-y,s=y}this.onStart(s)}},onMouseDown:function(a){if(a.button===0){this.removeDocumentEvents();var n=this.$props.vertical,s=Wt(n,a);this.onDown(a,s),this.addDocumentMouseEvents()}},onTouchStart:function(a){if(!jt(a)){var n=this.vertical,s=Jt(n,a);this.onDown(a,s),this.addDocumentTouchEvents(),De(a)}},onFocus:function(a){var n=this.vertical;if(ft(a,this.handlesRefs)&&!this.dragTrack){var s=qt(n,a.target);this.dragOffset=0,this.onStart(s),De(a),this.$emit("focus",a)}},onBlur:function(a){this.dragTrack||this.onEnd(),this.$emit("blur",a)},onMouseUp:function(){this.handlesRefs[this.prevMovedHandleIndex]&&this.handlesRefs[this.prevMovedHandleIndex].clickFocus()},onMouseMove:function(a){if(!this.sliderRef){this.onEnd();return}var n=Wt(this.vertical,a);this.onMove(a,n-this.dragOffset,this.dragTrack,this.startBounds)},onTouchMove:function(a){if(jt(a)||!this.sliderRef){this.onEnd();return}var n=Jt(this.vertical,a);this.onMove(a,n-this.dragOffset,this.dragTrack,this.startBounds)},onKeyDown:function(a){this.sliderRef&&ft(a,this.handlesRefs)&&this.onKeyboard(a)},onClickMarkLabel:function(a,n){var s=this;a.stopPropagation(),this.onChange({sValue:n}),this.setState({sValue:n},function(){return s.onEnd(!0)})},getSliderStart:function(){var a=this.sliderRef,n=this.vertical,s=this.reverse,i=a.getBoundingClientRect();return n?s?i.bottom:i.top:window.pageXOffset+(s?i.right:i.left)},getSliderLength:function(){var a=this.sliderRef;if(!a)return 0;var n=a.getBoundingClientRect();return this.vertical?n.height:n.width},addDocumentTouchEvents:function(){this.onTouchMoveListener=Le(this.document,"touchmove",this.onTouchMove),this.onTouchUpListener=Le(this.document,"touchend",this.onEnd)},addDocumentMouseEvents:function(){this.onMouseMoveListener=Le(this.document,"mousemove",this.onMouseMove),this.onMouseUpListener=Le(this.document,"mouseup",this.onEnd)},removeDocumentEvents:function(){this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchUpListener&&this.onTouchUpListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove()},focus:function(){var a;this.$props.disabled||(a=this.handlesRefs[0])===null||a===void 0||a.focus()},blur:function(){var a=this;this.$props.disabled||Object.keys(this.handlesRefs).forEach(function(n){var s,i;(s=a.handlesRefs[n])===null||s===void 0||(i=s.blur)===null||i===void 0||i.call(s)})},calcValue:function(a){var n=this.vertical,s=this.min,i=this.max,u=Math.abs(Math.max(a,0)/this.getSliderLength()),p=n?(1-u)*(i-s)+s:u*(i-s)+s;return p},calcValueByPos:function(a){var n=this.reverse?-1:1,s=n*(a-this.getSliderStart()),i=this.trimAlignValue(this.calcValue(s));return i},calcOffset:function(a){var n=this.min,s=this.max,i=(a-n)/(s-n);return Math.max(0,i*100)},saveSlider:function(a){this.sliderRef=a},saveHandle:function(a,n){this.handlesRefs[a]=n}},render:function(){var a,n=this.prefixCls,s=this.marks,i=this.dots,u=this.step,p=this.included,c=this.disabled,r=this.vertical,f=this.reverse,y=this.min,T=this.max,h=this.maximumTrackStyle,U=this.railStyle,O=this.dotStyle,$=this.activeDotStyle,_=this.id,E=this.$attrs,N=E.class,F=E.style,k=this.renderSlider(),S=k.tracks,P=k.handles,A=we(n,N,(a={},q(a,"".concat(n,"-with-marks"),Object.keys(s).length),q(a,"".concat(n,"-disabled"),c),q(a,"".concat(n,"-vertical"),r),a)),g={vertical:r,marks:s,included:p,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:T,min:y,reverse:f,class:"".concat(n,"-mark"),onClickLabel:c?Ie:this.onClickMarkLabel},m=q({},ra?"onTouchstartPassive":"onTouchstart",c?Ie:this.onTouchStart);return v("div",W(W({id:_,ref:this.saveSlider,tabindex:"-1",class:A},m),{},{onMousedown:c?Ie:this.onMouseDown,onMouseup:c?Ie:this.onMouseUp,onKeydown:c?Ie:this.onKeyDown,onFocus:c?Ie:this.onFocus,onBlur:c?Ie:this.onBlur,style:F}),[v("div",{class:"".concat(n,"-rail"),style:W(W({},h),U)},null),S,v(ys,{prefixCls:n,vertical:r,reverse:f,marks:s,dots:i,step:u,included:p,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:T,min:y,dotStyle:O,activeDotStyle:$},null),P,v(_s,g,{mark:this.$slots.mark}),ia(this)])}})}var Cs=ee({compatConfig:{MODE:3},name:"Slider",mixins:[Ft],inheritAttrs:!1,props:{defaultValue:Number,value:Number,disabled:{type:Boolean,default:void 0},autofocus:{type:Boolean,default:void 0},tabindex:Z.oneOfType([Z.number,Z.string]),reverse:{type:Boolean,default:void 0},min:Number,max:Number,ariaLabelForHandle:String,ariaLabelledByForHandle:String,ariaValueTextFormatterForHandle:String,startPoint:Number},emits:["beforeChange","afterChange","change"],data:function(){var e=this.defaultValue!==void 0?this.defaultValue:this.min,t=this.value!==void 0?this.value:e;return{sValue:this.trimAlignValue(t),dragging:!1}},watch:{value:{handler:function(e){this.setChangeValue(e)},deep:!0},min:function(){var e=this.sValue;this.setChangeValue(e)},max:function(){var e=this.sValue;this.setChangeValue(e)}},methods:{setChangeValue:function(e){var t=e!==void 0?e:this.sValue,a=this.trimAlignValue(t,this.$props);a!==this.sValue&&(this.setState({sValue:a}),ba(t,this.$props)&&this.$emit("change",a))},onChange:function(e){var t=!ht(this,"value"),a=e.sValue>this.max?W(W({},e),{},{sValue:this.max}):e;t&&this.setState(a);var n=a.sValue;this.$emit("change",n)},onStart:function(e){this.setState({dragging:!0});var t=this.sValue;this.$emit("beforeChange",t);var a=this.calcValueByPos(e);this.startValue=a,this.startPosition=e,a!==t&&(this.prevMovedHandleIndex=0,this.onChange({sValue:a}))},onEnd:function(e){var t=this.dragging;this.removeDocumentEvents(),(t||e)&&this.$emit("afterChange",this.sValue),this.setState({dragging:!1})},onMove:function(e,t){De(e);var a=this.sValue,n=this.calcValueByPos(t);n!==a&&this.onChange({sValue:n})},onKeyboard:function(e){var t=this.$props,a=t.reverse,n=t.vertical,s=wa(e,n,a);if(s){De(e);var i=this.sValue,u=s(i,this.$props),p=this.trimAlignValue(u);if(p===i)return;this.onChange({sValue:p}),this.$emit("afterChange",p),this.onEnd()}},getLowerBound:function(){var e=this.$props.startPoint||this.$props.min;return this.$data.sValue>e?e:this.$data.sValue},getUpperBound:function(){return this.$data.sValue<this.$props.startPoint?this.$props.startPoint:this.$data.sValue},trimAlignValue:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e===null)return null;var a=W(W({},this.$props),t),n=Nt(e,a);return _a(n,a)},getTrack:function(e){var t=e.prefixCls,a=e.reverse,n=e.vertical,s=e.included,i=e.minimumTrackStyle,u=e.mergedTrackStyle,p=e.length,c=e.offset;return v(va,{class:"".concat(t,"-track"),vertical:n,included:s,offset:c,reverse:a,length:p,style:W(W({},i),u)},null)},renderSlider:function(){var e=this,t=this.prefixCls,a=this.vertical,n=this.included,s=this.disabled,i=this.minimumTrackStyle,u=this.trackStyle,p=this.handleStyle,c=this.tabindex,r=this.ariaLabelForHandle,f=this.ariaLabelledByForHandle,y=this.ariaValueTextFormatterForHandle,T=this.min,h=this.max,U=this.startPoint,O=this.reverse,$=this.handle,_=this.defaultHandle,E=$||_,N=this.sValue,F=this.dragging,k=this.calcOffset(N),S=E({class:"".concat(t,"-handle"),prefixCls:t,vertical:a,offset:k,value:N,dragging:F,disabled:s,min:T,max:h,reverse:O,index:0,tabindex:c,ariaLabel:r,ariaLabelledBy:f,ariaValueTextFormatter:y,style:p[0]||p,ref:function(m){return e.saveHandle(0,m)},onFocus:this.onFocus,onBlur:this.onBlur}),P=U!==void 0?this.calcOffset(U):0,A=u[0]||u;return{tracks:this.getTrack({prefixCls:t,reverse:O,vertical:a,included:n,offset:P,minimumTrackStyle:i,mergedTrackStyle:A,length:k-P}),handles:S}}}});const Ts=ka(Cs);var Ae=function(e){var t=e.value,a=e.handle,n=e.bounds,s=e.props,i=s.allowCross,u=s.pushable,p=Number(u),c=Nt(t,s),r=c;return!i&&a!=null&&n!==void 0&&(a>0&&c<=n[a-1]+p&&(r=n[a-1]+p),a<n.length-1&&c>=n[a+1]-p&&(r=n[a+1]-p)),_a(r,s)},$s={defaultValue:Z.arrayOf(Z.number),value:Z.arrayOf(Z.number),count:Number,pushable:Na(Z.oneOfType([Z.looseBool,Z.number])),allowCross:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},reverse:{type:Boolean,default:void 0},tabindex:Z.arrayOf(Z.number),prefixCls:String,min:Number,max:Number,autofocus:{type:Boolean,default:void 0},ariaLabelGroupForHandles:Array,ariaLabelledByGroupForHandles:Array,ariaValueTextFormatterGroupForHandles:Array,draggableTrack:{type:Boolean,default:void 0}},Ss=ee({compatConfig:{MODE:3},name:"Range",mixins:[Ft],inheritAttrs:!1,props:_t($s,{count:1,allowCross:!0,pushable:!1,tabindex:[],draggableTrack:!1,ariaLabelGroupForHandles:[],ariaLabelledByGroupForHandles:[],ariaValueTextFormatterGroupForHandles:[]}),emits:["beforeChange","afterChange","change"],displayName:"Range",data:function(){var e=this,t=this.count,a=this.min,n=this.max,s=Array.apply(void 0,_e(Array(t+1))).map(function(){return a}),i=ht(this,"defaultValue")?this.defaultValue:s,u=this.value;u===void 0&&(u=i);var p=u.map(function(r,f){return Ae({value:r,handle:f,props:e.$props})}),c=p[0]===n?0:p.length-1;return{sHandle:null,recent:c,bounds:p}},watch:{value:{handler:function(e){var t=this.bounds;this.setChangeValue(e||t)},deep:!0},min:function(){var e=this.value;this.setChangeValue(e||this.bounds)},max:function(){var e=this.value;this.setChangeValue(e||this.bounds)}},methods:{setChangeValue:function(e){var t=this,a=this.bounds,n=e.map(function(i,u){return Ae({value:i,handle:u,bounds:a,props:t.$props})});if(a.length===n.length){if(n.every(function(i,u){return i===a[u]}))return null}else n=e.map(function(i,u){return Ae({value:i,handle:u,props:t.$props})});if(this.setState({bounds:n}),e.some(function(i){return ba(i,t.$props)})){var s=e.map(function(i){return Nt(i,t.$props)});this.$emit("change",s)}},onChange:function(e){var t=!ht(this,"value");if(t)this.setState(e);else{var a={};["sHandle","recent"].forEach(function(i){e[i]!==void 0&&(a[i]=e[i])}),Object.keys(a).length&&this.setState(a)}var n=W(W({},this.$data),e),s=n.bounds;this.$emit("change",s)},positionGetValue:function(e){var t=this.getValue(),a=this.calcValueByPos(e),n=this.getClosestBound(a),s=this.getBoundNeedMoving(a,n),i=t[s];if(a===i)return null;var u=_e(t);return u[s]=a,u},onStart:function(e){var t=this.bounds;this.$emit("beforeChange",t);var a=this.calcValueByPos(e);this.startValue=a,this.startPosition=e;var n=this.getClosestBound(a);this.prevMovedHandleIndex=this.getBoundNeedMoving(a,n),this.setState({sHandle:this.prevMovedHandleIndex,recent:this.prevMovedHandleIndex});var s=t[this.prevMovedHandleIndex];if(a!==s){var i=_e(t);i[this.prevMovedHandleIndex]=a,this.onChange({bounds:i})}},onEnd:function(e){var t=this.sHandle;this.removeDocumentEvents(),t||(this.dragTrack=!1),(t!==null||e)&&this.$emit("afterChange",this.bounds),this.setState({sHandle:null})},onMove:function(e,t,a,n){De(e);var s=this.$data,i=this.$props,u=i.max||100,p=i.min||0;if(a){var c=i.vertical?-t:t;c=i.reverse?-c:c;var r=u-Math.max.apply(Math,_e(n)),f=p-Math.min.apply(Math,_e(n)),y=Math.min(Math.max(c/(this.getSliderLength()/100),f),r),T=n.map(function(_){return Math.floor(Math.max(Math.min(_+y,u),p))});s.bounds.map(function(_,E){return _===T[E]}).some(function(_){return!_})&&this.onChange({bounds:T});return}var h=this.bounds,U=this.sHandle,O=this.calcValueByPos(t),$=h[U];O!==$&&this.moveTo(O)},onKeyboard:function(e){var t=this.$props,a=t.reverse,n=t.vertical,s=wa(e,n,a);if(s){De(e);var i=this.bounds,u=this.sHandle,p=i[u===null?this.recent:u],c=s(p,this.$props),r=Ae({value:c,handle:u,bounds:i,props:this.$props});if(r===p)return;var f=!0;this.moveTo(r,f)}},getClosestBound:function(e){for(var t=this.bounds,a=0,n=1;n<t.length-1;n+=1)e>=t[n]&&(a=n);return Math.abs(t[a+1]-e)<Math.abs(t[a]-e)&&(a+=1),a},getBoundNeedMoving:function(e,t){var a=this.bounds,n=this.recent,s=t,i=a[t+1]===a[t];return i&&a[n]===a[t]&&(s=n),i&&e!==a[t+1]&&(s=e<a[t+1]?t:t+1),s},getLowerBound:function(){return this.bounds[0]},getUpperBound:function(){var e=this.bounds;return e[e.length-1]},getPoints:function(){var e=this.marks,t=this.step,a=this.min,n=this.max,s=this.internalPointsCache;if(!s||s.marks!==e||s.step!==t){var i=W({},e);if(t!==null)for(var u=a;u<=n;u+=t)i[u]=u;var p=Object.keys(i).map(parseFloat);p.sort(function(c,r){return c-r}),this.internalPointsCache={marks:e,step:t,points:p}}return this.internalPointsCache.points},moveTo:function(e,t){var a=this,n=_e(this.bounds),s=this.sHandle,i=this.recent,u=s===null?i:s;n[u]=e;var p=u;this.$props.pushable!==!1?this.pushSurroundingHandles(n,p):this.$props.allowCross&&(n.sort(function(c,r){return c-r}),p=n.indexOf(e)),this.onChange({recent:p,sHandle:p,bounds:n}),t&&(this.$emit("afterChange",n),this.setState({},function(){a.handlesRefs[p].focus()}),this.onEnd())},pushSurroundingHandles:function(e,t){var a=e[t],n=this.pushable,s=Number(n),i=0;if(e[t+1]-a<s&&(i=1),a-e[t-1]<s&&(i=-1),i!==0){var u=t+i,p=i*(e[u]-a);this.pushHandle(e,u,i,s-p)||(e[t]=e[u]-i*s)}},pushHandle:function(e,t,a,n){for(var s=e[t],i=e[t];a*(i-s)<n;){if(!this.pushHandleOnePoint(e,t,a))return e[t]=s,!1;i=e[t]}return!0},pushHandleOnePoint:function(e,t,a){var n=this.getPoints(),s=n.indexOf(e[t]),i=s+a;if(i>=n.length||i<0)return!1;var u=t+a,p=n[i],c=this.pushable,r=Number(c),f=a*(e[u]-p);return this.pushHandle(e,u,a,r-f)?(e[t]=p,!0):!1},trimAlignValue:function(e){var t=this.sHandle,a=this.bounds;return Ae({value:e,handle:t,bounds:a,props:this.$props})},ensureValueNotConflict:function(e,t,a){var n=a.allowCross,s=a.pushable,i=this.$data||{},u=i.bounds;if(e=e===void 0?i.sHandle:e,s=Number(s),!n&&e!=null&&u!==void 0){if(e>0&&t<=u[e-1]+s)return u[e-1]+s;if(e<u.length-1&&t>=u[e+1]-s)return u[e+1]-s}return t},getTrack:function(e){var t=e.bounds,a=e.prefixCls,n=e.reverse,s=e.vertical,i=e.included,u=e.offsets,p=e.trackStyle;return t.slice(0,-1).map(function(c,r){var f,y=r+1,T=we((f={},q(f,"".concat(a,"-track"),!0),q(f,"".concat(a,"-track-").concat(y),!0),f));return v(va,{class:T,vertical:s,reverse:n,included:i,offset:u[y-1],length:u[y]-u[y-1],style:p[r],key:y},null)})},renderSlider:function(){var e=this,t=this.sHandle,a=this.bounds,n=this.prefixCls,s=this.vertical,i=this.included,u=this.disabled,p=this.min,c=this.max,r=this.reverse,f=this.handle,y=this.defaultHandle,T=this.trackStyle,h=this.handleStyle,U=this.tabindex,O=this.ariaLabelGroupForHandles,$=this.ariaLabelledByGroupForHandles,_=this.ariaValueTextFormatterGroupForHandles,E=f||y,N=a.map(function(S){return e.calcOffset(S)}),F="".concat(n,"-handle"),k=a.map(function(S,P){var A,g=U[P]||0;(u||U[P]===null)&&(g=null);var m=t===P;return E({class:we((A={},q(A,F,!0),q(A,"".concat(F,"-").concat(P+1),!0),q(A,"".concat(F,"-dragging"),m),A)),prefixCls:n,vertical:s,dragging:m,offset:N[P],value:S,index:P,tabindex:g,min:p,max:c,reverse:r,disabled:u,style:h[P],ref:function(w){return e.saveHandle(P,w)},onFocus:e.onFocus,onBlur:e.onBlur,ariaLabel:O[P],ariaLabelledBy:$[P],ariaValueTextFormatter:_[P]})});return{tracks:this.getTrack({bounds:a,prefixCls:n,reverse:r,vertical:s,included:i,offsets:N,trackStyle:T}),handles:k}}}});const Ps=ka(Ss),Ms=ee({compatConfig:{MODE:3},name:"SliderTooltip",inheritAttrs:!1,props:es(),setup:function(e,t){var a=t.attrs,n=t.slots,s=M(null),i=M(null);function u(){At.cancel(i.value),i.value=null}function p(){i.value=At(function(){var r;(r=s.value)===null||r===void 0||r.forcePopupAlign(),i.value=null})}var c=function(){u(),e.visible&&p()};return ie([function(){return e.visible},function(){return e.title}],function(){c()},{flush:"post",immediate:!0}),Va(function(){c()}),bt(function(){u()}),function(){return v(de,W(W({ref:s},e),a),n)}}});var Es=["value","dragging","index"],Fs=["tooltipPrefixCls","range","id"],Is=function(e){return typeof e=="number"?e.toString():""},Ns=function(){return{id:String,prefixCls:String,tooltipPrefixCls:String,range:{type:[Boolean,Object],default:void 0},reverse:{type:Boolean,default:void 0},min:Number,max:Number,step:{type:[Number,Object]},marks:{type:Object},dots:{type:Boolean,default:void 0},value:{type:[Number,Array]},defaultValue:{type:[Number,Array]},included:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},vertical:{type:Boolean,default:void 0},tipFormatter:{type:[Function,Object],default:function(){return Is}},tooltipVisible:{type:Boolean,default:void 0},tooltipPlacement:{type:String},getTooltipPopupContainer:{type:Function},autofocus:{type:Boolean,default:void 0},handleStyle:{type:[Object,Array]},trackStyle:{type:[Object,Array]},onChange:{type:Function},onAfterChange:{type:Function},onFocus:{type:Function},onBlur:{type:Function},"onUpdate:value":{type:Function}}},Vs=ee({compatConfig:{MODE:3},name:"ASlider",inheritAttrs:!1,props:Ns(),slots:["mark"],setup:function(e,t){var a=t.attrs,n=t.slots,s=t.emit,i=t.expose,u=xt("slider",e),p=u.prefixCls,c=u.rootPrefixCls,r=u.direction,f=u.getPopupContainer,y=u.configProvider,T=Mt(),h=M(),U=M({}),O=function(P,A){U.value[P]=A},$=ae(function(){return e.tooltipPlacement?e.tooltipPlacement:e.vertical?r.value==="rtl"?"left":"right":"top"}),_=function(){var P;(P=h.value)===null||P===void 0||P.focus()},E=function(){var P;(P=h.value)===null||P===void 0||P.blur()},N=function(P){s("update:value",P),s("change",P),T.onFieldChange()},F=function(P){s("blur",P)};i({focus:_,blur:E});var k=function(P){var A=P.tooltipPrefixCls,g=P.info,m=g.value,x=g.dragging,w=g.index,R=Re(g,Es),D=e.tipFormatter,C=e.tooltipVisible,I=e.getTooltipPopupContainer,X=D?U.value[w]||x:!1,ce=C||C===void 0&&X;return v(Ms,{prefixCls:A,title:D?D(m):"",visible:ce,placement:$.value,transitionName:"".concat(c.value,"-zoom-down"),key:w,overlayClassName:"".concat(p.value,"-tooltip"),getPopupContainer:I||f.value},{default:function(){return[v(xa,W(W({},R),{},{value:m,onMouseenter:function(){return O(w,!0)},onMouseleave:function(){return O(w,!1)}}),null)]}})};return function(){var S=e.tooltipPrefixCls,P=e.range,A=e.id,g=A===void 0?T.id.value:A,m=Re(e,Fs),x=y.getPrefixCls("tooltip",S),w=we(a.class,q({},"".concat(p.value,"-rtl"),r.value==="rtl"));r.value==="rtl"&&!m.vertical&&(m.reverse=!m.reverse);var R;return la(P)==="object"&&(R=P.draggableTrack),P?v(Ps,W(W({},m),{},{step:m.step,draggableTrack:R,class:w,ref:h,handle:function(C){return k({tooltipPrefixCls:x,prefixCls:p.value,info:C})},prefixCls:p.value,onChange:N,onBlur:F}),{mark:n.mark}):v(Ts,W(W({},m),{},{id:g,step:m.step,class:w,ref:h,handle:function(C){return k({tooltipPrefixCls:x,prefixCls:p.value,info:C})},prefixCls:p.value,onChange:N,onBlur:F}),{mark:n.mark})}}});const Oe=Ba(Vs),Bs={key:0,class:"flex items-center max-w-890px cursor-pointer text-blur"},Os={key:1,class:"flex flex-wrap gap-4 max-w-full my-3"},Rs=["onClick"],Ca=ee({__name:"ImagePromptSelect",props:["images","creatTypeFiled","clue","eventName"],emits:["update"],setup(d,{emit:e}){const t=d,a=n=>{B(t.eventName,{value:n,ext:{create:t.creatTypeFiled}}),e("update",n)};return(n,s)=>{var i,u;return b(),V(se,null,[d.images&&((i=d.images)==null?void 0:i.length)>0?(b(),V("h3",Bs,[l("span",null,Q(d.clue||"Lack of inspiration? Try an image prompt below:"),1),Oa(n.$slots,"extra")])):G("",!0),d.images&&((u=d.images)==null?void 0:u.length)>0?(b(),V("div",Os,[(b(!0),V(se,null,me(d.images,(p,c)=>(b(),V("div",{class:"max-w-135px aspect-1 w-full border-2px border-solid border-secondaryBottom text-gray cursor-pointer rounded-3 hover:border-main select-none relative overflow-hidden",style:tt({background:`url(${p}) center center / cover no-repeat`}),onClick:r=>a(p),key:c},null,12,Rs))),128))])):G("",!0)],64)}}}),Ds=d=>(wt("data-v-df6b20be"),d=d(),kt(),d),Us={class:"flex flex-col items-center gap-66px py-5"},As={class:"text-6 font-medium text-center"},Ls={class:"flex-col items-center"},Hs={class:"flex max-w-[90%] w-370px items-center gap-3"},Gs={class:"h-4 flex-1 rounded-4 bg-[#B8B8B8]"},js={class:"font-semibold"},zs={key:0,class:"mt-2 text-center"},Ws=Ds(()=>l("br",null,null,-1)),Js=5,qs=ee({__name:"Generating",props:["type"],emits:["abort"],setup(d,{expose:e,emit:t}){const a=M(+new Date),n=M(!1),s=M(0),i=M(5),u=M(),p=()=>{i.value>=90||(u.value=setTimeout(()=>{i.value+=1,p()},1e3+Math.ceil(Math.random()*1e3)))},c=()=>{i.value=5,clearTimeout(u.value),u.value=null,n.value=!1,a.value=+new Date},r=()=>{B("GeneratingPop",{name:"CancelGenerate "}),s.value=0,c(),t("abort")},f=(y,T)=>{+new Date-a.value>=Js*60*1e3&&(n.value=!0),u.value||(i.value=5,p()),s.value=y>0?Math.max(i.value,T):T};return et(()=>{a.value=+new Date}),e({updateFakeProgress:f,resetFakeProgress:c}),(y,T)=>{const h=re("Button");return b(),V("div",Us,[l("h2",As,"Creating "+Q(d.type),1),l("div",Ls,[l("div",Hs,[l("div",Gs,[l("div",{class:"h-full track rounded-4 transition-all",style:tt({width:`${o(s)}%`})},null,4)]),l("span",js,Q(o(s))+"%",1)]),o(n)?(b(),V("span",zs,[H(" We're experiencing a delay in art creation. "),Ws,H(" Please try again in a moment. ")])):G("",!0)]),v(h,{class:"main-btn mt-4",onClick:r},{default:L(()=>[H("Cancel")]),_:1})])}}});const dt=Ct(qs,[["__scopeId","data-v-df6b20be"]]),Ks={class:"flex-center flex-col w-full gap-4"},Xs=["src"],Ys={class:"grid grid-cols-2 md:grid-cols-2 w-full max-w-230px gap-2"},Zs=["onClick"],Qs={key:0,class:"absolute right-0 top-0 flex-center w-4 h-4 bg-[#405FFF] rounded-lb-2"},en=ee({__name:"MidjourneyImageSelector",props:["data","selectedIndex"],emits:["update:selectedIndex"],setup(d,{emit:e}){return ja(document.body),(t,a)=>{const n=re("font-awesome-icon");return b(),V("div",Ks,[l("img",{src:o(ca)(d.data.image),class:"max-h-60vh"},null,8,Xs),l("div",Ys,[(b(),V(se,null,me(4,(s,i)=>l("div",{class:"bg-secondaryBottom h-13 w-28 rounded-2 flex-center hover:bg-backgroundBottom/70 cursor-pointer relative overflow-hidden",key:s,onClick:()=>e("update:selectedIndex",i)},[d.selectedIndex===i?(b(),V("span",Qs,[v(n,{icon:"fa-solid fa-check",class:"w-2 h-2"})])):G("",!0),H(" Image "+Q(s),1)],8,Zs)),64))])])}}}),tn={class:"flex-center flex-col gap-4"},an={class:"grid grid-cols-2 rounded-2 overflow-hidden"},sn=["src"],nn={class:"grid grid-cols-2 md:grid-cols-2 w-full max-w-230px gap-2"},on=["onClick"],ln={key:0,class:"absolute right-0 top-0 flex-center w-4 h-4 bg-[#405FFF] rounded-lb-2"},Ta=ee({__name:"StableDiffusionImageSelector",props:["data","selectedIndex"],emits:["update:selectedIndex"],setup(d,{emit:e}){return(t,a)=>{const n=re("font-awesome-icon");return b(),V("div",tn,[l("div",an,[(b(!0),V(se,null,me(d.data.sub_images,(s,i)=>(b(),V("img",{src:s,key:i},null,8,sn))),128))]),l("div",nn,[(b(),V(se,null,me(4,(s,i)=>l("div",{class:"bg-secondaryBottom h-13 w-28 rounded-2 flex-center hover:bg-backgroundBottom/70 cursor-pointer relative overflow-hidden",key:s,onClick:()=>e("update:selectedIndex",i)},[d.selectedIndex===i?(b(),V("span",ln,[v(n,{icon:"fa-solid fa-check",class:"w-2 h-2"})])):G("",!0),H(" Image "+Q(s),1)],8,on)),64))])])}}});function rn(d,e){var t=e.target,a=t.canvas;return a==null||a.remove(t),a==null||a.requestRenderAll(),!0}function cn(d,e,t,a,n){var s="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='utf-8'%3F%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' id='Ebene_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='595.275px' height='595.275px' viewBox='200 215 230 470' xml:space='preserve'%3E%3Ccircle style='fill:%23F44336;' cx='299.76' cy='439.067' r='218.516'/%3E%3Cg%3E%3Crect x='267.162' y='307.978' transform='matrix(0.7071 -0.7071 0.7071 0.7071 -222.6202 340.6915)' style='fill:white;' width='65.545' height='262.18'/%3E%3Crect x='266.988' y='308.153' transform='matrix(0.7071 0.7071 -0.7071 0.7071 398.3889 -83.3116)' style='fill:white;' width='65.544' height='262.179'/%3E%3C/g%3E%3C/svg%3E",i=document.createElement("img");i.src=s;var u=24;d.save(),d.translate(e,t),d.rotate(window.fabric.util.degreesToRadians(n==null?void 0:n.angle)),d.drawImage(i,-u/2,-u/2,u,u),d.restore()}const un={key:1,class:"flex flex-col items-center gap-4 py-5"},dn=l("h2",{class:"text-6 font-medium text-center"}," There are 66 tasks ahead in the queue, please wait...... ",-1),pn={key:3,class:"flex flex-col items-center gap-4 py-5 px-2"},mn=l("h2",{class:"text-6 font-medium text-center"},"Choose your Favorite image",-1),fn=["src"],vn={class:"rounded-2 p-4 bg-black/40 text-standard gap-2 flex items-center"},hn=l("span",{class:"flex-shrink-0 w-fit"},"Set Name:",-1),gn={class:"flex flex-col md:flex-row items-center gap-1 md:gap-5"},xn={key:0},bn={key:4,class:"flex flex-col items-center gap-4 py-5 px-2"},yn=l("h2",{class:"text-6 font-medium text-center"},"Added to your Collection!",-1),_n=l("div",{class:"rounded-2 max-w-80 md:max-w-full"},[l("canvas",{id:"sticker-canvas"})],-1),wn=l("span",{class:"text-center"}," Try from several stickers to embellish your artwork (Optional) : ",-1),kn={class:"stickers flex items-center gap-1 max-w-700px flex-wrap"},Cn=["onClick"],Tn={class:"border-1 border-solid border-[#d0d0d0] rounded-2 p-3"},$n=["src"],Sn={class:"text-xs w-full text-center"},Pn={class:"flex-col items-center gap-2 w-20 aspect-1"},Mn={class:"aspect-1 w-15 rounded-2 bg-[#D9D9D9] flex-col-center"},En=l("span",{class:"text-xs w-full text-center"},"Coming Soon",-1),Fn={class:"rounded-2 p-4 bg-black/40 text-standard gap-2 flex items-center"},In=l("span",{class:"flex-shrink-0 w-fit"},"List Price:",-1),Nn=l("span",null,"BNB",-1),Vn={class:"flex flex-col md:flex-row items-center gap-1 md:gap-5"},Bn=l("div",{class:"text-center text-gray leading-5"},[l("p",null,"Earn tokens by selling your art;"),l("p",null,"royalties are distributed when your prompt is used.")],-1),On=ee({__name:"MintModal",props:["visible","jobId"],emits:["update:visible","update:jobId","abort","done"],setup(d,{emit:e}){const t=d;ke();const{create:a}=at(),{success:n,error:s}=xe(),i=M(0),u=M(),p=M(!1),c=["u1","u2","u3","u4"],f=ze.CancelToken.source(),y=M(J.QUEUE),T=M({}),h=M(0),U=M([{name:"NFPrompt",url:"https://static.nfprompt.io/website/nfp/stickers/nfprompt_logo.png",key:"nfprompt_logo"},{name:"BNB Chain",url:"https://static.nfprompt.io/website/nfp/stickers/binance_logo.png",key:"binance_logo"},{name:"Good Morning",url:"https://static.nfprompt.io/website/nfp/stickers/gm.png",key:"gm"},{name:"SNW Logo",url:"https://static.nfprompt.io/website/nfp/stickers/snw_logo.png",key:"snw_logo"}]),O=async()=>{var Y,te;if(p.value)return;y.value=J.GENERATING;const K=await oe(`api/v1/jobs/${t.jobId}`),{data:j}=K.data.value||{};if(u.value&&((Y=u.value)==null||Y.updateFakeProgress(h.value,j.progress)),[ne.FAILED,ne.TIMEOUT].includes(j.status)){const ye=j.status===ne.TIMEOUT?"Timeout":"Failed";throw B("Job",{name:ye,value:t.jobId,ext:{create:"Image",...j}}),new Error(`Job ${ye}`)}j.status!=ne.COMPLETED?(await he(5e3),h.value++,await O()):(u.value&&((te=u.value)==null||te.resetFakeProgress()),T.value=j,B("Job",{name:"Success",value:t.jobId,ext:{create:"Image",type:"generate",...j}}),$())},$=()=>{y.value=J.CHOOSE,B("SelectPicPop",{name:"Open",ext:{create:"Image"}})},_=M(""),E=async(K,j)=>{const Y=await oe(`/api/v1/artworks/${K}/mint`,{method:"post",body:{name:_.value,stickers:j}}),{data:te}=Y.data.value||{};g.tokenURI=te.token_uri,g.artwork_id=K,g.db_id=te.id,g.name=_.value},N=M(""),F=M(""),k=M(0),S=async K=>{if(!p.value)try{const j=await oe(`api/v1/jobs/${K}`),{data:Y}=j.data.value||{};if(Y.status===ne.FAILED)throw B("Job",{name:"Failed",value:K,ext:{create:"Image",...Y}}),new Error("Job Failed");if(Y.status===ne.TIMEOUT)throw B("Job",{name:"Timeout",value:K,ext:{create:"Image",...Y}}),new Error("Job Timeout");Y.status!=ne.COMPLETED?(k.value=Y.progress,await he(5e3),await S(K)):(N.value=Y.image,B("Job",{name:"Success",value:K,ext:{create:"Image",type:"choose",...Y}}),F.value=Y.artwork_id)}catch{await he(5e3),await S(K)}},P=M(!1),A=async()=>{var K,j;if(!P.value)try{P.value=!0;const Y=await oe(`/api/v1/jobs/${t.jobId}/action`,{method:"post",body:{action:c[i.value],name:_.value}});await S((j=(K=Y.data)==null?void 0:K.value.data)==null?void 0:j.job_id),y.value=J.MINT,B("MintToEarnPop",{name:"Open",ext:{create:"Image"}}),oa(()=>{I()})}catch(Y){s(Y.message||Y)}finally{P.value=!1}},g=Me({tokenURI:"",artwork_id:0,price:"",db_id:"",name:""}),m=M(!1),x=async()=>{var j,Y;if(m.value)return;console.log(g);let K=[];if((j=D.getObjects())==null||j.forEach(te=>{var qe,mt;const{angle:ye,aCoords:Ce,scaleX:fe}=te;K.push({name:te.name,angle:ye,x:((qe=Ce==null?void 0:Ce.tl)==null?void 0:qe.x)||0,y:((mt=Ce==null?void 0:Ce.tl)==null?void 0:mt.y)||0,scale:fe/C})}),await E(F.value,K),!g.db_id||!g.price)return s("Please make sure the price has been set");try{m.value=!0,await a({db_id:g.db_id,tokenURI:g.tokenURI,royaltyFee:nt(.05),price:Number(g.price),name:g.name}),B("TransctionResult",{name:"MintToEarn",value:"Success",ext:{create:"Image"}}),n("Minted"),e("done"),R(!1)}catch(te){B("TransctionResult",{name:"MintToEarn",value:"Fail",ext:{create:"Image"}}),console.dir(te),s(((Y=te.cause)==null?void 0:Y.shortMessage)||te.message||te)}finally{m.value=!1}},w=async()=>{try{B("GeneratingPop",{name:"Open",ext:{create:"Image"}}),await O()}catch(K){console.log(K),s(K.message||K),R()}},R=(K=!0)=>{K&&B("MintProgress",{name:"abort",value:J[y.value],ext:{create:"Image"}}),p.value=!0,e("update:jobId",""),e("abort"),f==null||f.cancel(),y.value=J.QUEUE,F.value="",i.value=0,T.value={},g.tokenURI="",g.price="",g.artwork_id=0,g.db_id="",k.value=0};let D={},C=1;const I=()=>{D=new window.fabric.Canvas("sticker-canvas"),X(N.value),window.fabric.Object.prototype.controls.deleteControl=new window.fabric.Control({x:.5,y:-.5,offsetY:-30,cursorStyle:"pointer",mouseUpHandler:rn,render:cn})},X=K=>{window.fabric.Image.fromURL(K+"?time="+new Date().valueOf(),j=>{D==null||D.clear();let{width:Y,height:te}=j;const ye=window.innerWidth>Y?Y:window.innerWidth-80;C=ye/Y,D==null||D.setBackgroundImage(j,D==null?void 0:D.renderAll.bind(D),{originX:"left",originY:"top",top:0,left:0,width:Y,height:te,scaleX:C,scaleY:C}),D==null||D.setWidth(ye),D==null||D.setHeight(C*te)},{crossOrigin:"Anonymous"})},ce=K=>{const{url:j,key:Y}=K;B("MintProgress",{name:"addLogo",value:Y,ext:{create:"Image"}}),window.fabric.Image.fromURL(j+"?time="+new Date().valueOf(),te=>{te.scaleToWidth(200*C),te.left=10,te.top=10,te.name=rs(Y),console.log(te.name,Y),te.setControlVisible("ml",!1),te.setControlVisible("mr",!1),D.add(te)},{crossOrigin:"Anonymous"})};return ie(()=>t.jobId,()=>{t.jobId&&w()},{immediate:!0}),st(()=>{R()}),(K,j)=>{const Y=re("font-awesome-icon"),te=dt,ye=en,Ce=Ta;return b(),z(o(We),{width:"auto",centered:"",footer:!1,closable:!1,visible:d.visible,class:"w-full mint-modal"},{default:L(()=>[[o(J).CHOOSE,o(J).MINT].includes(o(y))?(b(),z(Y,{key:0,icon:"fa-solid fa-xmark",class:"absolute right-6 top-6 w-6 h-6 cursor-pointer",onClick:R})):G("",!0),o(y)===o(J).QUEUE?(b(),V("div",un,[dn,v(Y,{icon:"fa-solid fa-spinner",class:"animate-spin"}),v(o(le),{class:"main-btn mt-4",onClick:j[0]||(j[0]=()=>R())},{default:L(()=>[H("Cancel")]),_:1})])):G("",!0),o(y)===o(J).GENERATING?(b(),z(te,{key:2,ref_key:"generateRef",ref:u,type:"Image",onAbort:R},null,512)):G("",!0),o(y)===o(J).CHOOSE?(b(),V("div",pn,[mn,[100].includes(o(T).engine_type)?(b(),z(ye,{key:0,data:o(T),selectedIndex:o(i),"onUpdate:selectedIndex":j[1]||(j[1]=fe=>Se(i)?i.value=fe:null)},null,8,["data","selectedIndex"])):[200].includes(o(T).engine_type)?(b(),z(Ce,{key:1,data:o(T),selectedIndex:o(i),"onUpdate:selectedIndex":j[2]||(j[2]=fe=>Se(i)?i.value=fe:null)},null,8,["data","selectedIndex"])):(b(),V("img",{key:2,src:o(T).image,width:"512"},null,8,fn)),l("div",vn,[hn,v(o(Pe),{class:"!text-white",value:o(_),"onUpdate:value":j[3]||(j[3]=fe=>Se(_)?_.value=fe:null),maxlength:50,disabled:o(P)},null,8,["value","disabled"])]),l("div",gn,[v(o(le),{class:"main-btn md:mt-4",onClick:j[4]||(j[4]=()=>{o(B)("SelectPicPop",{name:"PicSelected "}),A()}),loading:o(P),disabled:!o(_)},{default:L(()=>[H(" OK "),o(k)?(b(),V("span",xn,Q(o(k))+"%",1)):G("",!0)]),_:1},8,["loading","disabled"])])])):G("",!0),o(y)===o(J).MINT?(b(),V("div",bn,[yn,_n,wn,l("div",kn,[(b(!0),V(se,null,me(o(U),(fe,qe)=>(b(),V("div",{class:"flex-col items-center gap-2 cursor-pointer min-w-20",key:qe,onClick:mt=>ce(fe)},[l("div",Tn,[l("img",{src:fe.url,class:"aspect-1/1 w-9"},null,8,$n)]),l("span",Sn,Q(fe.name),1)],8,Cn))),128)),l("div",Pn,[l("div",Mn,[v(Y,{icon:"fa-solid fa-plus",class:"text-[#38394778] text-6"})]),En])]),l("div",Fn,[In,v(o(Pe),{class:"!text-white",value:o(g).price,"onUpdate:value":j[5]||(j[5]=fe=>o(g).price=fe)},null,8,["value"]),Nn]),l("div",Vn,[v(o(le),{class:"main-btn mt-4",onClick:j[6]||(j[6]=()=>{o(B)("MintToEarnPop",{name:"MintToEarn "}),x()}),loading:o(m),disabled:!o(g).price},{default:L(()=>[H(" Mint & List ")]),_:1},8,["loading","disabled"])]),Bn])):G("",!0)]),_:1},8,["visible"])}}}),Rn={key:0},Dn=l("h3",null,"Select Campaigns:",-1),Un={class:"flex flex-wrap gap-2 py-3"},An=["onClick"],Vt=ee({__name:"CampaignsTag",props:["creatType","creatTypeFiled","modelValue","campaigns"],emits:["update:modelValue"],setup(d,{emit:e}){const t=d,a=ot(),n=Tt(),s=ae({get(){return t.modelValue||[]},set(c){e("update:modelValue",c)}}),i=ae(()=>(t.campaigns||[]).filter(c=>{var r,f,y;return(((y=(f=(r=n.actConfig)==null?void 0:r.campagin)==null?void 0:f.displayOn)==null?void 0:y[t.creatType])||[]).includes(c.tag)})),u=()=>{a.query.tag&&i.value.forEach(c=>{c.tag==a.query.tag&&(s.value=[c])})};ie(()=>[a.query.tag,t.campaigns],()=>{u()},{immediate:!0});const p=c=>{B("ParameterClick",{name:"Campaign",ext:{create:(t==null?void 0:t.creatTypeFiled)||ut(t.creatType)}}),Qa(s.value,r=>r.id===c.id)?s.value=[]:s.value=[c]};return(c,r)=>{const f=re("font-awesome-icon");return o(i).length?(b(),V("div",Rn,[Dn,l("div",Un,[(b(!0),V(se,null,me(o(i),y=>{var T,h;return b(),V("div",{class:pe(["bg-secondaryBottom px-5 py-2 rounded-2 text-sm cursor-pointer hover:bg-sideNavBottom border-1px border-solid border-transparent relative",{"!border-main !text-bright":((T=o(s).filter(U=>U.tag==y.tag))==null?void 0:T.length)>0}]),onClick:U=>p(y),key:y},[v(f,{icon:"fa-solid fa-circle-check",class:pe(["w-4 text-gray",{"text-green":((h=o(s).filter(U=>U.tag==y.tag))==null?void 0:h.length)>0}])},null,8,["class"]),H(" "+Q(y.tag),1)],10,An)}),128))])])):G("",!0)}}}),Ln={class:"bg-[#141929] rounded-2 p-5 flex-col items-center gap-4 max-w-510px"},Hn={class:"text-gray text-standard-small"},Gn={class:"flex-col items-center gap-1 w-full"},jn={key:0,class:"relative group"},zn=["src"],Wn={key:1,class:"bg-black/30 p-3 flex items-center rounded-2 text-standard text-94"},$a=ee({__name:"UploadImage",props:["modelValue","placeholder","creatTypeFiled","needCheckSize","index","title"],emits:["update:modelValue"],setup(d,{emit:e}){const t=d,{error:a}=xe(),n=M([!1,!1]),s=ae({get(){return t.modelValue},set(p){e("update:modelValue",p)}}),i=p=>async c=>{try{t!=null&&t.needCheckSize&&await u(c.file);const r=new FormData;r.append("file",c.file),B("ParameterClick",{name:"Image",ext:{create:t.creatTypeFiled}}),n.value[p]=!0;const f=await oe("/api/v1/files/upload",{method:"post",body:r});s.value=f.data.value.data.url}catch(r){a(r.message||r)}finally{n.value[p]=!1}},u=async p=>new Promise((c,r)=>{const f=document.createElement("img");f.setAttribute("src",URL.createObjectURL(p)),f.onerror=r,f.onload=()=>{f.width<=1024&&f.height<=1024?c(0):r("The uploaded images must not exceed 1024px in width and height")}});return(p,c)=>{const r=re("font-awesome-icon");return b(),V("div",Ln,[l("h2",Hn,Q(d.title||"Click or drag an image to upload here"),1),l("div",Gn,[v(o(Pt),{class:"w-full",accept:o(it).IMAGE,customRequest:i(d.index),showUploadList:!1,disabled:n.value[d.index]},{default:L(()=>[s.value?(b(),V("div",jn,[l("img",{src:s.value,class:"mx-auto"},null,8,zn),l("div",{class:"absolute hidden group-hover:flex top-2 right-2 hover:bg-black/30 p-2 rounded-full w-8 h-8 flex-center",onClick:c[0]||(c[0]=$t(f=>s.value="",["stop"]))},[v(r,{icon:"fa-solid fa-xmark"})])])):(b(),V("div",Wn,[n.value[d.index]?(b(),z(r,{key:0,icon:"fa-solid fa-spinner",class:"animate-spin"})):(b(),V(se,{key:1},[H(Q(d.placeholder),1)],64)),v(r,{icon:"fa-solid fa-cloud-arrow-up",class:"ml-auto text-gray"})]))]),_:1},8,["accept","customRequest","disabled"])])])}}}),Jn={class:"flex flex-col gap-5 w-full"},qn={class:"form-item"},Kn={class:"form-item"},Xn={class:"flex-col gap-2"},Yn={class:"flex items-center gap-5"},Zn={class:"text-sm"},Qn={class:"form-item"},eo={class:"form-item"},to={class:"form-item"},ao=l("h3",null,"Text Prompt:",-1),so={class:"flex-col gap-2"},no={class:"flex items-center"},oo=l("span",{class:"text-gray text-standard-small"},"Desired Prompt:",-1),io={class:"ml-auto flex items-center gap-4"},lo={class:"flex items-center gap-1"},ro=l("div",{class:"flex-col gap-2"},[l("p",null,"Ask AI to enchace your prompt. NO $cNFP Required.")],-1),co={class:"relative"},uo=l("span",{class:"absolute bg-red text-xs font-normal -right-7 top-0 rounded-2 px-2 text-bright"}," Beta ",-1),po={class:"font-semibold text-gray flex items-center"},mo={class:"text-xs whitespace-pre-wrap"},fo={key:1,class:"flex-col gap-2 mt-1"},vo=l("span",{class:"flex items-center"},[l("span",{class:"text-gray text-standard-small"},"Negative Prompt:")],-1),ho={class:"form-item"},go=l("h3",null,"Select a Style:",-1),xo={class:"flex flex-wrap gap-4 max-w-full my-3"},bo=["onClick"],yo=["src"],_o={class:"absolute h-7 left-0 right-0 bottom-0 flex-center bg-secondaryBottom/50 text-standard font-semibold text-bright"},wo={class:"form-item"},ko=l("h3",null,"Fine Tune:",-1),Co={key:0,class:"flex-col gap-2"},To={class:"flex items-center"},$o={class:"text-gray text-standard-small"},So={class:"bg-panelBottom grid grid-cols-5 rounded-2 overflow-hidden"},Po=["onClick"],Mo={class:"h-10 flex-center flex-col"},Eo={key:1,class:"flex-col gap-2"},Fo={class:"flex items-center gap-2"},Io={class:"text-gray text-standard-small w-17 text-right flex-shrink-0"},No={key:2,class:"flex-col gap-2",id:"stylize"},Vo={class:"flex items-center gap-2"},Bo={class:"text-gray text-standard-small w-17 text-right flex-shrink-0"},Oo={key:3,class:"flex-col gap-2",id:"cfg_scale"},Ro={class:"flex items-center gap-2"},Do={class:"text-gray text-standard-small w-25 text-right flex-shrink-0"},Uo={key:4,class:"flex-col gap-2"},Ao={class:"flex items-center gap-2"},Lo={class:"text-gray text-standard-small w-17 text-right flex-shrink-0"},Ho={key:5,class:"flex-col gap-2"},Go={class:"flex items-center gap-2"},jo={class:"text-gray text-standard-small w-17 text-right flex-shrink-0"},zo={class:"flex-col gap-2"},Wo={class:"flex items-center gap-2"},Jo=l("span",{class:"text-gray text-standard-small w-17 text-right flex-shrink-0"},"Storage:",-1),qo={key:6,class:"text-sm text-center"},Xe=0,Ye=100,vt=7,Ko=ee({__name:"Image",props:["data","creatType","campaigns"],setup(d){const e=d,t=ut(e.creatType),{error:a}=xe(),n=ke(),s=ae(()=>g=>document.querySelector(".ant-slider-step")),i=ae(()=>n.credits<$e[c.model]),u=ae(()=>c.prompt&&!i.value),p=M(0),c=Me({engine:"",model:Ke[0].value,prompt:"",samples:["",""],nfp_styles:[],excludes:"",aspect_ratio:ve[p.value].label,chaos:Xe,cfg_scale:vt,stylize:Ye,tile:!1,seed:""}),r=M(!1),f=M(""),y=async()=>{var g,m,x,w;if(!(r.value||!n.accessToken)){if(!c.prompt){a("Prompt can not be empty");return}try{r.value=!0;const R={...je(c),tags:[].concat(S.value.map(C=>C.tag)),samples:Be(c.model)?[]:c.samples.filter(C=>C)};B("ImagineButton",{...R,ext:{create:t}}),B("ParameterClick",{name:"CreateNowButton",value:R,ext:{create:t}});const D=await Ee("/api/v1/artworks/create",{method:"post",data:R});f.value=(m=(g=D.data)==null?void 0:g.data)==null?void 0:m.job_id}catch(R){a(((w=(x=R.response)==null?void 0:x.data)==null?void 0:w.error)||R.message||R)}finally{r.value=!1}}},T=ae(()=>Ua[n.defaultEngine]),h=()=>{p.value=0,c.aspect_ratio=ve[p.value].label,c.chaos=Xe,c.engine="",c.excludes="",c.model=T.value,c.prompt="",c.samples=["",""],c.nfp_styles=[],c.seed="",c.stylize=Ye,c.cfg_scale=vt,c.tile=!1,$.value=!1,_.value="",E.value=!1,S.value=[]},U=()=>{r.value=!1,f.value="",h(),n.fetchCredit(),lt("/profile")},O=async()=>{const g=await Et("/api/v1/artworks/prompt");c.prompt=g.data.value.data.prompt},$=M(!1),_=M(""),E=M(!1),N=async()=>{if(!$.value)try{$.value=!0,B("GPTPrompt",{name:"btn-click",value:c.prompt,ext:{create:t}});const g=await oe("/api/v1/artworks/gptprompt",{method:"post",body:{prompt:c.prompt}});_.value=g.data.value.data.prompt}catch(g){a(g.message||g)}finally{$.value=!1}},F=g=>{B("ParameterClick",{name:g,ext:{create:t}})},k=g=>{B("Style Select",{value:g,ext:{create:t}}),F("Style"),c.nfp_styles.includes(g)?c.nfp_styles=[]:(c.nfp_styles=[],c.nfp_styles.push(g))},S=M([]),P=ae(()=>{var x,w,R;if(!e.campaigns||((x=e.campaigns)==null?void 0:x.length)==0)return[];const m=((R=(w=e.campaigns.filter(D=>{var C;return D.id===((C=S.value[0])==null?void 0:C.id)})[0])==null?void 0:w.ext)==null?void 0:R.prompt_images)||[];return A(m?m[0]:""),m}),A=g=>{c.samples[0]=g};return ie(()=>c.model,()=>{c.chaos=Xe,c.stylize=Ye,c.cfg_scale=vt,c.nfp_styles=[]}),ie(()=>e.data,()=>{var g,m,x,w,R,D;St(e.data)?h():(c.prompt=e.data.prompt,c.model=((g=e.data.model)==null?void 0:g.toLowerCase())||T.value,p.value=0,ve.forEach((C,I)=>{var X;C.label===((X=e.data.parameters)==null?void 0:X.aspect_ratio)&&(p.value=I)}),c.aspect_ratio=ve[p.value].label,c.chaos=((m=e.data.parameters)==null?void 0:m.chaos)||Xe,c.seed=e.data.parameters.seed||0,c.stylize=((x=e.data.parameters)==null?void 0:x.stylize)||Ye,c.tile=(w=e.data.parameters)==null?void 0:w.tile,c.excludes=(R=e.data.parameters)==null?void 0:R.excludes,c.nfp_styles=(D=e.data.parameters)==null?void 0:D.nfp_styles)},{immediate:!0}),(g,m)=>{const x=re("font-awesome-icon"),w=Ca,R=Je,D=On,C=rt;return b(),z(C,null,{default:L(()=>[l("div",Jn,[l("div",qn,[v(Vt,{creatType:d.creatType,campaigns:d.campaigns,modelValue:S.value,"onUpdate:modelValue":m[0]||(m[0]=I=>S.value=I)},null,8,["creatType","campaigns","modelValue"])]),l("div",Kn,[l("h3",null,[H(" Choose a Model: "),v(o(de),{overlayClassName:"nfp-tooltip-overlay",placement:"rightTop"},{title:L(()=>[l("div",Xn,[l("p",null," Midjourney_V5Cost "+Q(o($e)[o(Ke)[0].value])+" $cNFP. Coherent and excels at interpreting natural language cues at higher resolution ",1),l("p",null," Stable DiffusionCost "+Q(o($e)[o(Ke)[1].value])+" $cNFP. Good overall performance ",1)])]),default:L(()=>[v(x,{icon:"fa-solid fa-circle-info"})]),_:1})]),l("div",Yn,[v(o(pa),{value:c.model,"onUpdate:value":m[1]||(m[1]=I=>c.model=I),onChange:m[2]||(m[2]=()=>{o(B)("ParameterClick",{name:"Model",ext:{create:o(t)}})}),options:o(Ke),placeholder:"Suitable Model",class:"w-fit nfp-select"},null,8,["value","options"]),l("span",Zn,"Cost: "+Q(o($e)[c.model])+" $cNFP",1)])]),o(Be)(c.model)?G("",!0):(b(),V(se,{key:0},[l("div",Qn,[l("h3",null,[H(" Image Prompt(Optional): "),v(o(de),{overlayClassName:"nfp-tooltip-overlay",placement:"rightTop"},{title:L(()=>[H(" Allows you to upload 1 image quickly and then looks at the concepts and aesthetics of each image and merges them into a novel new image. ")]),default:L(()=>[v(x,{icon:"fa-solid fa-circle-info"})]),_:1})]),v($a,{modelValue:c.samples[0],"onUpdate:modelValue":m[3]||(m[3]=I=>c.samples[0]=I),placeholder:"(Optional)",creatTypeFiled:o(t),index:0},null,8,["modelValue","creatTypeFiled"])]),l("div",eo,[v(w,{images:P.value,eventName:"Select Campaigns tag",creatTypeFiled:o(t),onUpdate:A},null,8,["images","creatTypeFiled"])])],64)),l("div",to,[ao,l("div",so,[l("span",no,[oo,l("span",io,[l("span",{class:"bg-panelBottom rounded-4 cursor-pointer flex-center text-sm text-gray hover:text-white flex flex-center px-4 py-2 gap-2",onClick:m[4]||(m[4]=()=>{O(),o(B)("RandomPrompt",{ext:{create:o(t)}}),F("Ramdom")})}," Get Random Prompt ")])]),v(o(Ve),{onBlur:m[5]||(m[5]=I=>F("DesiredPrompt")),class:"nfp-input !min-h-10",autoSize:!0,maxlength:9999,value:c.prompt,"onUpdate:value":m[6]||(m[6]=I=>c.prompt=I)},null,8,["value"])]),c.prompt||_.value?(b(),V(se,{key:0},[l("div",lo,[v(o(de),{overlayClassName:"nfp-tooltip-overlay",placement:"bottomLeft"},{title:L(()=>[ro]),default:L(()=>[l("div",co,[v(o(le),{class:"main-btn !h-8 !text-standard-small !w-fit !min-w-auto relative",onClick:N,loading:$.value,disabled:!c.prompt},{default:L(()=>[H(" Help Me Out ")]),_:1},8,["loading","disabled"]),uo])]),_:1})]),_.value?(b(),V("div",{key:0,class:pe(["bg-panelBottom rounded-2 p-3 flex flex-col gap-3",{"h-11 overflow-hidden ":E.value}])},[l("h2",po,[H(" Enhanced Prompt: "),_.value?(b(),V(se,{key:0},[E.value?(b(),z(x,{key:0,icon:"fa-solid fa-angles-down",class:"text-white hover:text-bright ml-auto cursor-pointer",onClick:m[7]||(m[7]=I=>E.value=!1)})):(b(),z(x,{key:1,icon:"fa-solid fa-angles-up",class:"text-white hover:text-bright ml-auto cursor-pointer",onClick:m[8]||(m[8]=I=>E.value=!0)}))],64)):G("",!0)]),l("span",mo,Q(_.value),1),v(o(le),{class:"main-btn !h-8 !text-standard-small",onClick:m[9]||(m[9]=()=>{c.prompt=_.value,E.value=!0})},{default:L(()=>[H(" Fill into the Desire Prompt ")]),_:1})],2)):G("",!0)],64)):G("",!0),o(Be)(c.model)?G("",!0):(b(),V("div",fo,[vo,v(o(Ve),{onBlur:m[10]||(m[10]=I=>F("NegativePrompt")),class:"nfp-input !min-h-3",autoSize:!0,maxlength:9999,value:c.excludes,"onUpdate:value":m[11]||(m[11]=I=>c.excludes=I),placeholder:"(Optional)"},null,8,["value"])]))]),l("div",ho,[go,l("div",xo,[(b(!0),V(se,null,me(o(Lt)(c.model)?o(Ra):o(Da),(I,X)=>(b(),V("div",{class:pe(["max-w-135px w-full border-2px border-solid border-secondaryBottom text-gray cursor-pointer rounded-3 hover:border-main select-none relative overflow-hidden",{"!text-white !border-main bg-white/10 font-semibold":c.nfp_styles.includes(I)}]),onClick:ce=>k(I),key:X},[c.nfp_styles.includes(I)?(b(),z(x,{key:0,icon:"fa-solid fa-circle-check",class:"w-4 text-green absolute right-1 top-1"})):G("",!0),I!="freestyle"?(b(),V("img",{key:1,src:`https://static.nfprompt.io/website/nfp/images/style/${I}.png`,class:"w-full",draggable:!1},null,8,yo)):G("",!0),l("span",_o,Q(o(ct)(I)),1)],10,bo))),128))])]),l("div",wo,[ko,o(Be)(c.model)?G("",!0):(b(),V("div",Co,[l("span",To,[l("span",$o,[H(" Aspect Ratios: "),v(o(de),{overlayClassName:"nfp-tooltip-overlay",placement:"rightTop"},{title:L(()=>[H(" Aspect Rate changes the aspect ratio of the generated image ")]),default:L(()=>[v(x,{icon:"fa-solid fa-circle-info"})]),_:1})])]),l("div",So,[(b(!0),V(se,null,me(o(ve),(I,X)=>(b(),V("div",{class:pe(["aspect-item",{active:p.value===X}]),onClick:()=>{p.value=X,c.aspect_ratio=o(ve)[p.value].label,F("Aspect")},key:X},[l("div",Mo,[l("div",{class:pe(["frame",I.className])},null,2)]),l("span",null,Q(I.label),1)],10,Po))),128))])]))]),o(Ht)(c.model)?(b(),V("div",Eo,[l("span",Fo,[l("span",Io,[H(" Chaos: "),v(o(de),{overlayClassName:"nfp-tooltip-overlay",placement:"rightTop"},{title:L(()=>[H(" Chaos influences how varied the initial image grids are. High chaos value will produce more unusual and unexpected results and compositions. Lower chaos values have more reliable, repeatable results. ")]),default:L(()=>[v(x,{icon:"fa-solid fa-circle-info"})]),_:1})]),v(o(Oe),{class:"flex-shrink-0 flex-1",tooltipPlacement:"bottom",tooltipVisible:!0,min:0,max:100,marks:{0:0,100:100},value:c.chaos,"onUpdate:value":m[12]||(m[12]=I=>c.chaos=I),getTooltipPopupContainer:s.value,onAfterChange:m[13]||(m[13]=I=>F("Chaos"))},null,8,["value","getTooltipPopupContainer"])])])):G("",!0),o(Ht)(c.model)?(b(),V("div",No,[l("span",Vo,[l("span",Bo,[H(" Stylize: "),v(o(de),{overlayClassName:"nfp-tooltip-overlay",placement:"rightTop"},{title:L(()=>[H(" Stylize influences how strongly this training is applied. Low stylization values produce images that closely match the prompt but are less artistic. High stylization values create images that are very artistic but less connected to the prompt ")]),default:L(()=>[v(x,{icon:"fa-solid fa-circle-info"})]),_:1})]),v(o(Oe),{class:"flex-shrink-0 flex-1",tooltipPlacement:"bottom",tooltipVisible:!0,min:0,max:1e3,marks:{0:0,1e3:1e3},getTooltipPopupContainer:s.value,value:c.stylize,"onUpdate:value":m[14]||(m[14]=I=>c.stylize=I),onAfterChange:m[15]||(m[15]=I=>F("Stylize"))},null,8,["getTooltipPopupContainer","value"])])])):G("",!0),o(Lt)(c.model)?(b(),V("div",Oo,[l("span",Ro,[l("span",Do,[H(" CFG_Scale: "),v(o(de),{overlayClassName:"nfp-tooltip-overlay",placement:"rightTop"},{title:L(()=>[H(" A higher cfg_sacle means that you want the image to be closer to your prompt description, and it will also improve the smoothness and contrast of the image ")]),default:L(()=>[v(x,{icon:"fa-solid fa-circle-info"})]),_:1})]),v(o(Oe),{class:"flex-shrink-0 flex-1",tooltipPlacement:"bottom",tooltipVisible:!0,min:0,max:30,marks:{0:0,30:30},getTooltipPopupContainer:s.value,value:c.cfg_scale,"onUpdate:value":m[16]||(m[16]=I=>c.cfg_scale=I),onAfterChange:m[17]||(m[17]=I=>F("Scale"))},null,8,["getTooltipPopupContainer","value"])])])):G("",!0),o(Be)(c.model)?G("",!0):(b(),V("div",Uo,[l("span",Ao,[l("span",Lo,[H(" Tile: "),v(o(de),{overlayClassName:"nfp-tooltip-overlay",placement:"rightTop"},{title:L(()=>[H(" Tile generates images that can be used as repeating tiles to create seamless patterns for fabrics, wallpapers and textures. ")]),default:L(()=>[v(x,{icon:"fa-solid fa-circle-info"})]),_:1})]),v(o(ge),{class:"!ml-1",checked:c.tile,"onUpdate:checked":m[18]||(m[18]=I=>c.tile=I),onChange:m[19]||(m[19]=I=>F("Tile"))},{default:L(()=>[H(" Add Tile Parameter ")]),_:1},8,["checked"])])])),o(Be)(c.model)?G("",!0):(b(),V("div",Ho,[l("span",Go,[l("span",jo,[H(" Seed: "),v(o(de),{overlayClassName:"nfp-tooltip-overlay",placement:"rightTop"},{title:L(()=>[H(" Using the same seed number and prompt will produce similar ending images ")]),default:L(()=>[v(x,{icon:"fa-solid fa-circle-info"})]),_:1})]),v(o(It),{class:"nfp-input !ml-1",placeholder:"(Optional)",value:c.seed,"onUpdate:value":m[20]||(m[20]=I=>c.seed=I),min:0,max:4294967295,precision:0,onBlur:m[21]||(m[21]=I=>F("Seed"))},null,8,["value"])])])),l("div",zo,[l("span",Wo,[Jo,v(o(ge),{onChange:m[22]||(m[22]=I=>F("BNB Greenfield Storage"))},{default:L(()=>[H("BNB Greenfield")]),_:1})])]),v(o(le),{class:"main-btn mt-5 mx-auto",onClick:y,loading:r.value,disabled:!u.value},{default:L(()=>[H(" Create Now ")]),_:1},8,["loading","disabled"]),i.value?(b(),V("span",qo,[H(" You don't have enough $cNFP to create. "),v(R,{class:"text-main hover:text-main",to:"/earn"},{default:L(()=>[H("Get More $cNFP >>")]),_:1})])):G("",!0)]),f.value?(b(),z(D,{key:0,visible:!!f.value,jobId:f.value,"onUpdate:jobId":m[23]||(m[23]=I=>f.value=I),onAbort:m[24]||(m[24]=I=>r.value=!1),onDone:U},null,8,["visible","jobId"])):G("",!0)]),_:1})}}}),Xo={key:1,class:"flex flex-col items-center gap-4 py-5"},Yo=l("h2",{class:"text-6 font-medium text-center"}," There are 66 tasks ahead in the queue, please wait...... ",-1),Zo={key:3,class:"flex flex-col items-center gap-4 py-5 px-2"},Qo=l("h2",{class:"text-6 font-medium text-center"},"Choose your Favorite image",-1),ei={class:"rounded-2 p-4 bg-black/40 text-standard gap-2 flex items-center"},ti=l("span",{class:"flex-shrink-0 w-fit"},"Set Name:",-1),ai={class:"flex flex-col md:flex-row items-center gap-1 md:gap-5"},si={key:0},ni={key:4,class:"flex flex-col items-center gap-4 py-5 px-2"},oi=l("h2",{class:"text-6 font-medium text-center"},"Added to your Collection!",-1),ii=["src"],li={class:"rounded-2 p-4 bg-black/40 text-standard gap-2 flex items-center"},ri=l("span",{class:"flex-shrink-0 w-fit"},"List Price:",-1),ci=l("span",null,"BNB",-1),ui={class:"flex flex-col md:flex-row items-center gap-1 md:gap-5"},di=l("div",{class:"text-center text-gray leading-5"},[l("p",null,"Earn tokens by selling your art;"),l("p",null,"royalties are distributed when your prompt is used.")],-1),pi=ee({__name:"MintPFPModal",props:["visible","jobId"],emits:["update:visible","update:jobId","abort","done"],setup(d,{emit:e}){const t=d,a=ke(),{create:n}=at(),{success:s,error:i}=xe(),u=M(0),p=M(!1),c=M(),r=M(!1),f=["u1","u2","u3","u4"],T=ze.CancelToken.source(),h=M(J.QUEUE),U=M({}),O=M(0),$=async()=>{var I,X;if(r.value)return;h.value=J.GENERATING;const D=await oe(`api/v1/jobs/${t.jobId}`),{data:C}=D.data.value||{};if(c.value&&((I=c.value)==null||I.updateFakeProgress(O.value,C.progress)),C.status===ne.FAILED)throw B("Job",{name:"Failed",value:t.jobId,ext:{create:"PFP",...C}}),new Error("Job Failed");if(C.status===ne.TIMEOUT)throw B("Job",{name:"Timeout",value:t.jobId,ext:{create:"PFP",...C}}),new Error("Job Timeout");C.status!=ne.COMPLETED?(await he(5e3),O.value++,await $()):(c.value&&((X=c.value)==null||X.resetFakeProgress()),U.value=C,B("Job",{name:"Success",value:t.jobId,ext:{create:"PFP",type:"generate",...C}}),_())},_=()=>{h.value=J.CHOOSE,B("SelectPicPop",{name:"Open",ext:{create:"PFP"}})},E=M(""),N=async D=>{const C=await oe(`/api/v1/artworks/${D}/mint`,{method:"post",body:{name:E.value}}),{data:I}=C.data.value||{};g.tokenURI=I.token_uri,g.artwork_id=D,g.db_id=I.id,g.name=E.value},F=M(""),k=M(0),S=async D=>{if(!r.value)try{const C=await oe(`api/v1/jobs/${D}`),{data:I}=C.data.value||{};if(I.status===ne.FAILED)throw B("Job",{name:"Failed",value:D,ext:{create:"PFP",...I}}),new Error("Job Failed");if(I.status===ne.TIMEOUT)throw B("Job",{name:"Timeout",value:D,ext:{create:"PFP",...I}}),new Error("Job Timeout");I.status!=ne.COMPLETED?(k.value=I.progress,await he(5e3),await S(D)):(F.value=I.image,B("Job",{name:"Success",value:D,ext:{create:"PFP",type:"choose",...I}}),await N(I.artwork_id))}catch{await he(5e3),await S(D)}},P=M(!1),A=async()=>{var D,C;if(!P.value)try{P.value=!0;const I=await oe(`/api/v1/jobs/${t.jobId}/action`,{method:"post",body:{action:f[u.value],name:E.value}});await S((C=(D=I.data)==null?void 0:D.value.data)==null?void 0:C.job_id),h.value=J.MINT,B("MintToEarnPop",{name:"Open",ext:{create:"PFP"}})}catch(I){i(I.message||I)}finally{P.value=!1}},g=Me({tokenURI:"",artwork_id:0,price:"",db_id:"",name:""}),m=M(!1),x=async()=>{var D;if(!m.value){if(!g.db_id||!g.price)return i("Please make sure the price has been set");try{m.value=!0,await n({db_id:g.db_id,tokenURI:g.tokenURI,royaltyFee:nt(.05),price:Number(g.price),name:g.name}),p.value&&(await Ee("/api/v1/users/me",{method:"post",data:{avatar:F.value}}),a.fetchMe()),B("TransctionResult",{name:"MintToEarn",value:"Success",ext:{create:"PFP"}}),s("Minted"),e("done"),R(!1)}catch(C){B("TransctionResult",{name:"MintToEarn",value:"Fail",ext:{create:"PFP"}}),console.dir(C),i(((D=C.cause)==null?void 0:D.shortMessage)||C.message||C)}finally{m.value=!1}}},w=async()=>{try{B("GeneratingPop",{name:"Open",ext:{create:"PFP"}}),await $()}catch(D){console.log(D),i(D.message||D),R()}},R=(D=!0)=>{D&&B("MintProgress",{name:"abort",value:J[h.value],ext:{create:"PFP"}}),r.value=!0,e("update:jobId",""),e("abort"),T==null||T.cancel(),h.value=J.QUEUE,u.value=0,U.value={},g.tokenURI="",g.price="",g.artwork_id=0,g.db_id="",k.value=0};return ie(()=>t.jobId,()=>{t.jobId&&w()},{immediate:!0}),st(()=>{R()}),(D,C)=>{const I=re("font-awesome-icon"),X=dt,ce=Ta;return b(),z(o(We),{width:"auto",centered:"",footer:!1,closable:!1,visible:d.visible,class:"w-full mint-modal"},{default:L(()=>[[o(J).CHOOSE,o(J).MINT].includes(o(h))?(b(),z(I,{key:0,icon:"fa-solid fa-xmark",class:"absolute right-6 top-6 w-6 h-6 cursor-pointer",onClick:R})):G("",!0),o(h)===o(J).QUEUE?(b(),V("div",Xo,[Yo,v(I,{icon:"fa-solid fa-spinner",class:"animate-spin"}),v(o(le),{class:"main-btn mt-4",onClick:C[0]||(C[0]=()=>R())},{default:L(()=>[H("Cancel")]),_:1})])):G("",!0),o(h)===o(J).GENERATING?(b(),z(X,{key:2,ref_key:"generateRef",ref:c,type:"PFP",onAbort:R},null,512)):G("",!0),o(h)===o(J).CHOOSE?(b(),V("div",Zo,[Qo,v(ce,{class:"max-w-[60vw]",data:o(U),selectedIndex:o(u),"onUpdate:selectedIndex":C[1]||(C[1]=K=>Se(u)?u.value=K:null)},null,8,["data","selectedIndex"]),l("div",ei,[ti,v(o(Pe),{class:"!text-white",value:o(E),"onUpdate:value":C[2]||(C[2]=K=>Se(E)?E.value=K:null),maxlength:50,disabled:o(P)},null,8,["value","disabled"])]),l("div",ai,[v(o(le),{class:"main-btn md:mt-4",onClick:C[3]||(C[3]=()=>{o(B)("SelectPicPop",{name:"PicSelected "}),A()}),loading:o(P),disabled:!o(E)},{default:L(()=>[H(" OK "),o(k)?(b(),V("span",si,Q(o(k))+"%",1)):G("",!0)]),_:1},8,["loading","disabled"])])])):G("",!0),o(h)===o(J).MINT?(b(),V("div",ni,[oi,l("img",{src:o(F),class:"rounded-2 max-w-80 md:max-w-full max-h-[70vh]",draggable:"false"},null,8,ii),l("div",li,[ri,v(o(Pe),{class:"!text-white",value:o(g).price,"onUpdate:value":C[4]||(C[4]=K=>o(g).price=K)},null,8,["value"]),ci]),l("span",null,[v(o(ge),{checked:o(p),"onUpdate:checked":C[5]||(C[5]=K=>Se(p)?p.value=K:null)},{default:L(()=>[H("Set it as Profile Image")]),_:1},8,["checked"])]),l("div",ui,[v(o(le),{class:"main-btn mt-4",onClick:C[6]||(C[6]=()=>{o(B)("MintToEarnPop",{name:"MintToEarn "}),x()}),loading:o(m),disabled:!o(g).price},{default:L(()=>[H(" Mint & List ")]),_:1},8,["loading","disabled"])]),di])):G("",!0)]),_:1},8,["visible"])}}}),mi={class:"flex flex-col gap-5 w-full"},fi={class:"border-1 border-solid border-[#695EC1] rounded-2 py-3 pb-8 flex-col items-center gap-4"},vi=l("span",{class:"text-5 font-bold"},"Example",-1),hi={class:"flex flex-col md:flex-row gap-5 md:gap-0 items-center justify-between w-full max-w-3xl"},gi={class:"flex justify-between flex-1 items-center md:max-w-md gap-4"},xi=l("div",{class:"flex-col gap-3 items-center"},[l("img",{src:"https://static.nfprompt.io/website/nfp/comps/pfp-1.png",class:"w-20 md:w-135px aspect-1"}),l("span",{class:"w-20 h-8 md:h-0 md:w-180px text-xs md:text-base text-center text-blur"}," Your Profile Image ")],-1),bi=l("div",{class:"flex-col gap-3 items-center"},[l("img",{src:"https://static.nfprompt.io/website/nfp/comps/pfp-2.png",class:"w-20 md:w-135px aspect-1"}),l("span",{class:"w-20 h-8 md:h-0 md:w-180px text-xs md:text-base text-center text-blur"}," Blend Image ")],-1),yi=l("div",{class:"flex-col gap-3 items-center"},[l("img",{src:"https://static.nfprompt.io/website/nfp/comps/pfp-3.png",class:"w-20 md:w-135px aspect-1"}),l("span",{class:"w-20 h-8 md:h-0 md:w-180px text-xs md:text-base text-center text-blur"}," NFPfp ")],-1),_i={class:"form-item"},wi={class:"form-item"},ki=l("h3",null,"Upload a Profile Image:",-1),Ci={class:"form-item"},Ti={class:"form-item"},$i=l("h3",null,"Upload a Blend Image:",-1),Si={class:"form-item"},Pi={class:"form-item"},Mi=l("h3",null,"Text Prompt:",-1),Ei={class:"flex-col gap-2"},Fi={class:"flex items-center"},Ii=l("span",{class:"text-gray text-standard-small"},"Desired Prompt:",-1),Ni={class:"ml-auto flex items-center gap-4"},Vi={class:"flex items-center gap-1"},Bi=l("div",{class:"flex-col gap-2"},[l("p",null,"Ask AI to enchace your prompt. NO $cNFP Required.")],-1),Oi={class:"relative"},Ri=l("span",{class:"absolute bg-red text-xs font-normal -right-7 top-0 rounded-2 px-2 text-bright"}," Beta ",-1),Di={class:"font-semibold text-gray flex items-center"},Ui={class:"text-xs whitespace-pre-wrap"},Ai={class:"flex-col gap-2 mt-1"},Li=l("span",{class:"flex items-center"},[l("span",{class:"text-gray text-standard-small"},"Negative Prompt:")],-1),Hi=l("div",{class:"form-item"},[l("h3",null,"Fine Tune:")],-1),Gi={class:"flex-col gap-2",id:"cfg_scale"},ji={class:"flex items-center gap-2"},zi={class:"text-gray text-standard-small w-25 text-right flex-shrink-0"},Wi={class:"flex-col gap-2"},Ji={class:"flex items-center gap-2"},qi={class:"text-gray text-standard-small w-17 text-right flex-shrink-0"},Ki={class:"flex-col gap-2"},Xi={class:"flex items-center gap-2"},Yi=l("span",{class:"text-gray text-standard-small w-17 text-right flex-shrink-0"},"Storage:",-1),Zi={class:"text-94 text-sm text-center"},Qi={key:0,class:"text-sm text-center"},Kt=7,ue="PFP",el=ee({__name:"PFP",props:["data","campaigns","creatType"],setup(d){const e=d,{success:t,error:a}=xe();Tt();const n=ke(),s=ot();ua();const i=ae(()=>x=>document.querySelector(".ant-slider-step")),u=ae(()=>n.credits<$e.pfp),p=ae(()=>!u.value&&r.samples[0]!=""&&r.samples[1]!=""),c=M(0),r=Me({prompt:"",samples:["",""],nfp_styles:[],excludes:"",cfg_scale:Kt,seed:""}),f=M([]),y=M(!1),T=async()=>{var x,w;if(!y.value)try{y.value=!0;const R=await oe("/api/v1/artworks/blend",{query:{page:0,size:6}});f.value=(((w=(x=R==null?void 0:R.data)==null?void 0:x.value)==null?void 0:w.data)||[]).map(D=>ca(D.image))}finally{y.value=!1}},h=M(!1),U=M(""),O=async()=>{var x,w,R,D;if(!(h.value||!n.accessToken)){if(r.samples[0]==""){a("Please upload an image");return}try{h.value=!0;const C={...je(r),tags:["PFP"].concat(A.value.map(X=>X.tag))};B("ImagineButton",{...C,ext:{create:ue}}),B("ParameterClick",{name:"CreateNowButton",value:C,ext:{create:ue}});const I=await Ee("/api/v1/artworks/pfp",{method:"post",data:C});U.value=(w=(x=I.data)==null?void 0:x.data)==null?void 0:w.job_id}catch(C){a(((D=(R=C.response)==null?void 0:R.data)==null?void 0:D.error)||C.message||C)}finally{h.value=!1}}},$=()=>{c.value=0,r.prompt="",r.samples=["",""],r.nfp_styles=[],r.seed="",r.cfg_scale=Kt,N.value=!1,F.value="",k.value=!1,A.value=[]},_=()=>{h.value=!1,U.value="",$(),n.fetchCredit(),lt("/profile")},E=async()=>{const x=await Et("/api/v1/artworks/prompt");r.prompt=x.data.value.data.prompt},N=M(!1),F=M(""),k=M(!1),S=async()=>{if(!N.value)try{N.value=!0,B("GPTPrompt",{name:"btn-click",value:r.prompt,ext:{create:ue}});const x=await oe("/api/v1/artworks/gptprompt",{method:"post",body:{prompt:r.prompt}});F.value=x.data.value.data.prompt}catch(x){a(x.message||x)}finally{N.value=!1}},P=x=>{B("Blend Select",{value:x,ext:{create:ue}}),r.samples[1]=x},A=M([]),g=ae(()=>{var R,D,C;if(!e.campaigns||((R=e.campaigns)==null?void 0:R.length)==0)return[];const w=((C=(D=e.campaigns.filter(I=>{var X;return I.id===((X=A.value[0])==null?void 0:X.id)})[0])==null?void 0:D.ext)==null?void 0:C.prompt_images)||[];return m(w?w[0]:""),w}),m=x=>{r.samples[0]=x};return ie(()=>[s.query,n.accessToken],()=>{T()},{immediate:!0}),ie(()=>e.data,()=>{var x,w,R,D;St(e.data)?$():(r.prompt=e.data.prompt,c.value=0,ve.forEach((C,I)=>{var X;C.label===((X=e.data.parameters)==null?void 0:X.aspect_ratio)&&(c.value=I)}),r.samples[1]=((w=(x=e.data.parameters)==null?void 0:x.samples)==null?void 0:w[1])||"",r.seed=e.data.parameters.seed||0,r.excludes=(R=e.data.parameters)==null?void 0:R.excludes,r.nfp_styles=(D=e.data.parameters)==null?void 0:D.nfp_styles)},{immediate:!0}),(x,w)=>{const R=re("font-awesome-icon"),D=Vt,C=$a,I=Ca,X=Je,ce=pi,K=rt;return b(),z(K,null,{default:L(()=>[l("div",mi,[l("div",fi,[vi,l("div",hi,[l("div",gi,[xi,l("span",null,[v(R,{icon:"fa-icon fa-plus",class:"w-7 h-7"})]),bi]),l("div",null,[v(R,{icon:"fa-icon fa-equals",class:"w-7 h-7"})]),yi])]),l("div",_i,[v(D,{creatType:d.creatType,creatTypeFiled:ue,campaigns:d.campaigns,modelValue:A.value,"onUpdate:modelValue":w[0]||(w[0]=j=>A.value=j)},null,8,["creatType","campaigns","modelValue"])]),l("div",wi,[ki,v(C,{modelValue:r.samples[0],"onUpdate:modelValue":w[1]||(w[1]=j=>r.samples[0]=j),placeholder:"Profile Image",creatTypeFiled:ue,index:0},null,8,["modelValue"])]),l("div",Ci,[v(I,{eventName:"Profile Select With Tag",images:g.value,creatTypeFiled:ue,onUpdate:m},null,8,["images"])]),l("div",Ti,[$i,v(C,{modelValue:r.samples[1],"onUpdate:modelValue":w[2]||(w[2]=j=>r.samples[1]=j),placeholder:"Blend Image",creatTypeFiled:ue,index:1},null,8,["modelValue"])]),l("div",Si,[v(I,{eventName:"Blend Select",images:f.value,creatTypeFiled:ue,onUpdate:P,clue:"Lack inspiration? Try these options:"},{extra:L(()=>[l("span",{class:"ml-auto",onClick:T},[H(" Refresh "),v(R,{icon:"fa-solid fa-arrows-rotate",class:pe({"animate-spin":y.value})},null,8,["class"])])]),_:1},8,["images"])]),l("div",Pi,[Mi,l("div",Ei,[l("span",Fi,[Ii,l("span",Ni,[l("span",{class:"bg-panelBottom rounded-4 cursor-pointer flex-center text-sm text-gray hover:text-white flex flex-center px-4 py-2 gap-2",onClick:w[3]||(w[3]=()=>{E(),o(B)("RandomPrompt",{ext:{create:ue}}),o(B)("ParameterClick",{name:"Ramdom",ext:{create:ue}})})}," Get Random Prompt ")])]),v(o(Ve),{onBlur:w[4]||(w[4]=()=>o(B)("ParameterClick",{name:"DesiredPrompt",ext:{create:ue}})),class:"nfp-input !min-h-10",autoSize:!0,maxlength:9999,value:r.prompt,"onUpdate:value":w[5]||(w[5]=j=>r.prompt=j)},null,8,["value"])]),r.prompt||F.value?(b(),V(se,{key:0},[l("div",Vi,[v(o(de),{overlayClassName:"nfp-tooltip-overlay",placement:"bottomLeft"},{title:L(()=>[Bi]),default:L(()=>[l("div",Oi,[v(o(le),{class:"main-btn !h-8 !text-standard-small !w-fit !min-w-auto relative",onClick:S,loading:N.value,disabled:!r.prompt},{default:L(()=>[H(" Help Me Out ")]),_:1},8,["loading","disabled"]),Ri])]),_:1})]),F.value?(b(),V("div",{key:0,class:pe(["bg-panelBottom rounded-2 p-3 flex flex-col gap-3",{"h-11 overflow-hidden ":k.value}])},[l("h2",Di,[H(" Enhanced Prompt: "),F.value?(b(),V(se,{key:0},[k.value?(b(),z(R,{key:0,icon:"fa-solid fa-angles-down",class:"text-white hover:text-bright ml-auto cursor-pointer",onClick:w[6]||(w[6]=j=>k.value=!1)})):(b(),z(R,{key:1,icon:"fa-solid fa-angles-up",class:"text-white hover:text-bright ml-auto cursor-pointer",onClick:w[7]||(w[7]=j=>k.value=!0)}))],64)):G("",!0)]),l("span",Ui,Q(F.value),1),v(o(le),{class:"main-btn !h-8 !text-standard-small",onClick:w[8]||(w[8]=()=>{r.prompt=F.value,k.value=!0})},{default:L(()=>[H(" Fill into the Desire Prompt ")]),_:1})],2)):G("",!0)],64)):G("",!0),l("div",Ai,[Li,v(o(Ve),{onBlur:w[9]||(w[9]=()=>o(B)("ParameterClick",{name:"NegativePrompt",ext:{create:ue}})),class:"nfp-input !min-h-3",autoSize:!0,maxlength:9999,value:r.excludes,"onUpdate:value":w[10]||(w[10]=j=>r.excludes=j),placeholder:"(Optional)"},null,8,["value"])])]),Hi,l("div",Gi,[l("span",ji,[l("span",zi,[H(" CFG_Scale: "),v(o(de),{overlayClassName:"nfp-tooltip-overlay",placement:"rightTop"},{title:L(()=>[H(" A higher cfg_sacle means that you want the image to be closer to your prompt description, and it will also improve the smoothness and contrast of the image ")]),default:L(()=>[v(R,{icon:"fa-solid fa-circle-info"})]),_:1})]),v(o(Oe),{class:"flex-shrink-0 flex-1",tooltipPlacement:"bottom",tooltipVisible:!0,min:0,max:30,marks:{0:0,30:30},getTooltipPopupContainer:i.value,value:r.cfg_scale,"onUpdate:value":w[11]||(w[11]=j=>r.cfg_scale=j),onAfterChange:w[12]||(w[12]=()=>o(B)("ParameterClick",{name:"Scale",ext:{create:ue}}))},null,8,["getTooltipPopupContainer","value"])])]),l("div",Wi,[l("span",Ji,[l("span",qi,[H(" Seed: "),v(o(de),{overlayClassName:"nfp-tooltip-overlay",placement:"rightTop"},{title:L(()=>[H(" Using the same seed number and prompt will produce similar ending images ")]),default:L(()=>[v(R,{icon:"fa-solid fa-circle-info"})]),_:1})]),v(o(It),{class:"nfp-input !ml-1",placeholder:"(Optional)",value:r.seed,"onUpdate:value":w[13]||(w[13]=j=>r.seed=j),min:0,max:4294967295,precision:0,onBlur:w[14]||(w[14]=()=>o(B)("ParameterClick",{name:"Seed",ext:{create:ue}}))},null,8,["value"])])]),l("div",Ki,[l("span",Xi,[Yi,v(o(ge),{onChange:w[15]||(w[15]=()=>o(B)("ParameterClick",{name:"BNB Greenfield Storage",ext:{create:ue}}))},{default:L(()=>[H(" BNB Greenfield ")]),_:1})])]),v(o(le),{class:"main-btn mt-5 mx-auto",onClick:O,loading:h.value,disabled:!p.value},{default:L(()=>[H(" Create Now ")]),_:1},8,["loading","disabled"]),l("span",Zi,"Cost: "+Q(o($e).pfp)+" $cNFP",1),u.value?(b(),V("span",Qi,[H(" You don't have enough $cNFP to create. "),v(X,{class:"text-main hover:text-main",to:"/earn"},{default:L(()=>[H("Get More $cNFP >>")]),_:1})])):G("",!0)]),U.value?(b(),z(ce,{key:0,visible:!!U.value,jobId:U.value,"onUpdate:jobId":w[16]||(w[16]=j=>U.value=j),onAbort:w[17]||(w[17]=j=>h.value=!1),onDone:_},null,8,["visible","jobId"])):G("",!0)]),_:1})}}}),tl={key:1,class:"flex flex-col items-center gap-4 py-5"},al=l("h2",{class:"text-6 font-medium text-center"}," There are 66 tasks ahead in the queue, please wait...... ",-1),sl={key:3,class:"flex flex-col items-center gap-4 py-5 px-2"},nl=l("h2",{class:"text-6 font-medium text-center"},"Set Name",-1),ol={class:"rounded-2 p-4 bg-black/40 text-standard gap-2 flex items-center"},il=l("span",{class:"flex-shrink-0 w-fit"},"Set Name:",-1),ll={class:"flex flex-col md:flex-row items-center gap-1 md:gap-5"},rl={key:4,class:"flex flex-col items-center gap-4 py-5 px-2"},cl=l("h2",{class:"text-6 font-medium text-center"},"Added to your Collection!",-1),ul={class:"rounded-2 p-4 bg-black/40 text-standard gap-2 flex items-center"},dl=l("span",{class:"flex-shrink-0 w-fit"},"List Price:",-1),pl=l("span",null,"BNB",-1),ml={class:"flex flex-col md:flex-row items-center gap-1 md:gap-5"},fl=l("div",{class:"text-center text-gray leading-5"},[l("p",null,"Earn tokens by selling your art;"),l("p",null,"royalties are distributed when your prompt is used.")],-1),vl=ee({__name:"MintVideoModal",props:["visible","jobId"],emits:["update:visible","update:jobId","abort","done"],setup(d,{emit:e}){const t=d;ke();const{create:a}=at(),{success:n,error:s}=xe(),i=M(0),u=M(),p=M(!1),r=ze.CancelToken.source(),f=M(J.QUEUE),y=M({}),T=M(0),h=async()=>{var w,R;if(p.value)return;f.value=J.GENERATING;const m=await oe(`api/v1/jobs/${t.jobId}`),{data:x}=m.data.value;if((w=u.value)==null||w.updateFakeProgress(T.value,x.progress),x.status===ne.FAILED)throw B("Job",{name:"Failed",value:t.jobId,ext:{...x,create:"Video"}}),new Error("Job Failed");if(x.status===ne.TIMEOUT)throw B("Job",{name:"Timeout",value:t.jobId,ext:{...x,create:"Video"}}),new Error("Job Timeout");x.status!=ne.COMPLETED?(await he(5e3),T.value++,await h()):((R=u.value)==null||R.resetFakeProgress(),y.value=x,B("Job",{name:"Success",value:t.jobId,ext:{type:"generate",create:"Video",...x}}),U())},U=()=>{f.value=J.CHOOSE},O=M(""),$=async m=>{const x=await oe(`/api/v1/artworks/${m}/mint`,{method:"post",body:{name:O.value}}),{data:w}=x.data.value;k.tokenURI=w.token_uri,k.artwork_id=m,k.db_id=w.id,k.name=O.value},_=M(0),E=async m=>{if(!p.value)try{const x=await oe(`api/v1/jobs/${m}`),{data:w}=x.data.value||{};if(w.status===ne.FAILED)throw B("Job",{name:"Failed",value:m,ext:{create:"Video",...w}}),new Error("Job Failed");if(w.status===ne.TIMEOUT)throw B("Job",{name:"Timeout",value:m,ext:{create:"Video",...w}}),new Error("Job Timeout");w.status!=ne.COMPLETED?(_.value=w.progress,await he(5e3),await E(m)):(B("Job",{name:"Success",value:m,ext:{create:"Video",type:"choose",...w}}),y.value=w,await $(w.artwork_id))}catch{await he(5e3),await E(m)}},N=M(!1),F=async()=>{var m,x;if(!N.value)try{N.value=!0;const w=await oe(`/api/v1/jobs/${t.jobId}/action`,{method:"post",body:{action:"u1",name:O.value}});await E((x=(m=w.data)==null?void 0:m.value.data)==null?void 0:x.job_id),f.value=J.MINT,B("MintToEarnPop",{name:"Open",ext:{create:"Video"}})}catch(w){s(w.message||w)}finally{N.value=!1}},k=Me({tokenURI:"",artwork_id:0,price:"",db_id:"",name:""}),S=M(!1),P=async()=>{var m;if(!S.value){if(console.log(k),!k.db_id||!k.price)return s("Please make sure the price has been set");try{S.value=!0,await a({db_id:k.db_id,tokenURI:k.tokenURI,royaltyFee:nt(.05),price:Number(k.price),name:k.name}),B("TransctionResult",{name:"MintToEarn",value:"Success",ext:{create:"Video"}}),n("Minted"),e("done"),g(!1)}catch(x){B("TransctionResult",{name:"MintToEarn",value:"Fail",ext:{create:"Video"}}),console.dir(x),s(((m=x.cause)==null?void 0:m.shortMessage)||x.message||x)}finally{S.value=!1}}},A=async()=>{try{B("GeneratingPop",{name:"Open",ext:{create:"Video"}}),await h()}catch(m){console.log(m),s(m.message||m),g()}},g=(m=!0)=>{m&&B("MintProgress",{name:"abort",value:J[f.value],ext:{create:"Video"}}),p.value=!0,e("update:jobId",""),e("abort"),r==null||r.cancel(),f.value=J.QUEUE,i.value=0,y.value={},k.tokenURI="",k.price="",k.artwork_id=0,k.db_id="",_.value=0};return ie(()=>t.jobId,()=>{t.jobId&&A()},{immediate:!0}),st(()=>{g()}),(m,x)=>{const w=re("font-awesome-icon"),R=dt;return b(),z(o(We),{width:"auto",centered:"",footer:!1,closable:!1,visible:d.visible,class:"w-full mint-modal"},{default:L(()=>[[o(J).CHOOSE,o(J).MINT].includes(o(f))?(b(),z(w,{key:0,icon:"fa-solid fa-xmark",class:"absolute right-6 top-6 w-6 h-6 cursor-pointer",onClick:g})):G("",!0),o(f)===o(J).QUEUE?(b(),V("div",tl,[al,v(w,{icon:"fa-solid fa-spinner",class:"animate-spin"}),v(o(le),{class:"main-btn mt-4",onClick:x[0]||(x[0]=()=>g())},{default:L(()=>[H("Cancel")]),_:1})])):G("",!0),o(f)===o(J).GENERATING?(b(),z(R,{key:2,ref_key:"generateRef",ref:u,type:"Video",onAbort:g},null,512)):G("",!0),o(f)===o(J).CHOOSE?(b(),V("div",sl,[nl,v(Gt,{metadata:o(y),class:"max-h-60vh",preload:!0},null,8,["metadata"]),l("div",ol,[il,v(o(Pe),{class:"!text-white",value:o(O),"onUpdate:value":x[1]||(x[1]=D=>Se(O)?O.value=D:null),maxlength:50,disabled:o(N)},null,8,["value","disabled"])]),l("div",ll,[v(o(le),{class:"main-btn md:mt-4",onClick:x[2]||(x[2]=()=>{o(B)("SelectPicPop",{name:"VideoSetName "}),F()}),loading:o(N),disabled:!o(O)},{default:L(()=>[H(" OK ")]),_:1},8,["loading","disabled"])])])):G("",!0),o(f)===o(J).MINT?(b(),V("div",rl,[cl,v(Gt,{metadata:o(y),class:"max-h-60vh"},null,8,["metadata"]),l("div",ul,[dl,v(o(Pe),{class:"!text-white",value:o(k).price,"onUpdate:value":x[3]||(x[3]=D=>o(k).price=D)},null,8,["value"]),pl]),l("div",ml,[v(o(le),{class:"main-btn mt-4",onClick:x[4]||(x[4]=()=>{P()}),loading:o(S),disabled:!o(k).price},{default:L(()=>[H(" Mint & List ")]),_:1},8,["loading","disabled"])]),fl])):G("",!0)]),_:1},8,["visible"])}}}),be=d=>(wt("data-v-c7fc24b6"),d=d(),kt(),d),hl={class:"flex flex-col gap-5 w-full"},gl={class:"form-item"},xl={class:"form-item"},bl=be(()=>l("h3",null,"Choose a Model:",-1)),yl={class:"flex items-center gap-5"},_l={key:0,class:"form-item"},wl=be(()=>l("h3",null,"Upload a Start Image(Optional):",-1)),kl={class:"bg-[#141929] rounded-2 p-5 flex-col items-center gap-4 max-w-510px"},Cl=be(()=>l("h2",{class:"text-gray text-standard-small"},"Click or drag an image to upload here",-1)),Tl={class:"flex-col items-center gap-1 w-full"},$l={key:0,class:"relative group"},Sl=["src"],Pl={key:1,class:"bg-black/30 p-3 flex items-center rounded-2 text-standard text-94"},Ml={class:"form-item"},El=be(()=>l("h3",null,"Text Prompt:",-1)),Fl={class:"flex-col gap-2"},Il=be(()=>l("span",{class:"flex items-center"},[l("span",{class:"text-gray text-standard-small"},"Desired Prompt:")],-1)),Nl={class:"flex-col gap-4"},Vl={class:"flex-col gap-2 relative"},Bl={class:"text-sm flex items-center"},Ol=be(()=>l("span",null,"Add New Frame",-1)),Rl={class:"flex-col gap-2 mt-1"},Dl=be(()=>l("span",{class:"flex items-center"},[l("span",{class:"text-gray text-standard-small"},"Negative Prompt:")],-1)),Ul={class:"form-item"},Al=be(()=>l("h3",null,"Fine Tune:",-1)),Ll={class:"flex-col gap-2"},Hl={class:"flex items-center"},Gl={class:"text-gray text-standard-small"},jl={class:"bg-panelBottom grid grid-cols-5 rounded-2 overflow-hidden"},zl=["onClick"],Wl={class:"h-10 flex-center flex-col"},Jl={class:"flex-col gap-2",id:"cfg_scale"},ql={class:"flex items-center gap-2"},Kl={class:"text-gray text-standard-small w-25 text-right flex-shrink-0"},Xl={class:"flex-col gap-2"},Yl={class:"flex items-center gap-2"},Zl={class:"text-gray text-standard-small w-17 text-right flex-shrink-0"},Ql={key:1,class:"flex-col gap-2"},er={class:"flex items-center gap-2"},tr=be(()=>l("span",{class:"text-gray text-standard-small w-17 text-right flex-shrink-0"},"Zoom:",-1)),ar={class:"grid grid-cols-2 gap-5"},sr={class:"flex-col gap-2"},nr={class:"flex items-center gap-2"},or=be(()=>l("span",{class:"text-gray text-standard-small w-17 text-right flex-shrink-0"},"Storage:",-1)),ir={key:2,class:"text-sm text-center"},Xt=7,Yt=2,lr=ee({__name:"Video",props:["data","campaigns","creatType"],setup(d){const e=d;ot(),ua();const t=ke(),{error:a,success:n}=xe(),s=ut(e.creatType),i=[0,2,3,4],u=[0,1,2],p=ae(()=>h.model==="zoom"?i:u),c=ae(()=>t.credits<Yt),r=ae(()=>h.prompts.filter(A=>A).length===h.prompts.length),f=ae(()=>r.value&&!c.value),y=ae(()=>A=>document.querySelector(".ant-slider-step")),T=M(0),h=Me({engine:"",model:Ue[0].value,prompts:[""],init_image:"",nfp_styles:[],excludes:"",aspect_ratio:ve[T.value].label,cfg_scale:Xt,seed:"",video_length:5,zoom_mode:Fe.ZOOM_OUT}),U=M([]),O=A=>{h.prompts.splice(A,1)},$=M(""),_=M(!1),E=async()=>{var g,m,x,w;if(_.value)return;if(!r.value)throw new Error("The Prompt of Frame should not be empty");const A={...je(h),tags:[].concat(U.value.map(R=>R.tag))};B("ParameterClick",{name:"CreateNowButton",value:A,ext:{create:s}});try{_.value=!0;const R=await Ee(h.model==="zoom"?"/api/v1/artworks/zoomingvideo":"/api/v1/artworks/deforumvideo",{method:"post",data:{...A,timings:je(p.value).slice(0,h.prompts.length)}});$.value=(m=(g=R.data)==null?void 0:g.data)==null?void 0:m.job_id}catch(R){a(((w=(x=R.response)==null?void 0:x.data)==null?void 0:w.error)||R.message||R)}finally{_.value=!1}},N=M([!1,!1]),F=(A=0)=>async g=>{try{const m=new FormData;m.append("file",g.file),B("ParameterClick",{name:"Image",ext:{create:s}}),N.value[A]=!0;const x=await oe("/api/v1/files/upload",{method:"post",body:m});h.init_image=x.data.value.data.url}catch(m){a(m.message||m)}finally{N.value[A]=!1}},k=A=>{B("ParameterClick",{name:"ZoomButton",value:A,ext:{create:s}}),h.zoom_mode=A},S=()=>{_.value=!1,$.value="",P(),t.fetchCredit(),lt("/profile")},P=()=>{T.value=0,h.aspect_ratio=ve[T.value].label,h.engine="",h.excludes="",h.model=Ue[0].value,h.prompts=[""],h.init_image="",h.nfp_styles=[],h.seed="",h.zoom_mode=Fe.ZOOM_OUT,h.cfg_scale=Xt};return ie(()=>h.model,()=>{h.model==="zoom"&&(h.init_image=""),h.prompts=[""]}),ie(()=>e.data,()=>{var A,g,m;St(e.data)?P():(h.prompts=e.data.parameters.prompts,h.model=e.data.media_type==Ne.VIDEO?Ue[0].value:Ue[1].value,T.value=0,ve.forEach((x,w)=>{var R;x.label===((R=e.data.parameters)==null?void 0:R.aspect_ratio)&&(T.value=w)}),h.aspect_ratio=ve[T.value].label,h.init_image=e.data.parameters.init_image,h.seed=e.data.parameters.seed||0,h.excludes=(A=e.data.parameters)==null?void 0:A.excludes,h.nfp_styles=(g=e.data.parameters)==null?void 0:g.nfp_styles,h.zoom_mode=((m=e.data.parameters)==null?void 0:m.zoom_mode)||Fe.ZOOM_OUT)},{immediate:!0}),(A,g)=>{const m=Vt,x=re("font-awesome-icon"),w=re("Button"),R=Je,D=vl;return b(),V(se,null,[l("div",hl,[l("div",gl,[v(m,{creatType:d.creatType,campaigns:d.campaigns,modelValue:U.value,"onUpdate:modelValue":g[0]||(g[0]=C=>U.value=C)},null,8,["creatType","campaigns","modelValue"])]),l("div",xl,[bl,l("div",yl,[v(o(pa),{value:o(h).model,"onUpdate:value":g[1]||(g[1]=C=>o(h).model=C),onChange:g[2]||(g[2]=()=>{("commonMP"in A?A.commonMP:o(B))("ParameterClick",{name:"Model",ext:{create:o(s)}})}),options:o(Ue),placeholder:"Suitable Model",class:"w-fit nfp-select"},null,8,["value","options"])])]),o(h).model=="storyclip"?(b(),V("div",_l,[wl,l("div",kl,[Cl,l("div",Tl,[v(o(Pt),{class:"w-full",accept:o(it).IMAGE,customRequest:F(),showUploadList:!1},{default:L(()=>[o(h).init_image?(b(),V("div",$l,[l("img",{src:o(h).init_image,class:"mx-auto"},null,8,Sl),l("div",{class:"absolute hidden group-hover:flex top-2 right-2 hover:bg-black/30 p-2 rounded-full w-8 h-8 flex-center",onClick:g[3]||(g[3]=$t(C=>o(h).init_image="",["stop"]))},[v(x,{icon:"fa-solid fa-xmark"})])])):(b(),V("div",Pl,[o(h).init_image?(b(),z(x,{key:0,icon:"fa-solid fa-spinner",class:"animate-spin"})):(b(),V(se,{key:1},[H("Start Image")],64)),v(x,{icon:"fa-solid fa-cloud-arrow-up",class:"ml-auto text-gray"})]))]),_:1},8,["accept","customRequest"])])])])):G("",!0),l("div",Ml,[El,l("div",Fl,[Il,l("div",Nl,[(b(!0),V(se,null,me(o(h).prompts,(C,I)=>(b(),V("div",Vl,[l("span",Bl,[H(" Start at "+Q(o(p)[I])+"s: ",1),o(h).prompts.length>1?(b(),z(x,{key:0,icon:"fa-solid fa-xmark",class:"text-red text-base cursor-pointer ml-auto",onClick:X=>O(I)},null,8,["onClick"])):G("",!0)]),v(o(Ve),{onBlur:()=>("commonMP"in A?A.commonMP:o(B))("ParameterClick",{name:"DesiredPrompt",ext:{position:I,create:o(s)}}),class:"nfp-input !min-h-10",autoSize:!0,maxlength:9999,value:o(h).prompts[I],"onUpdate:value":X=>o(h).prompts[I]=X},null,8,["onBlur","value","onUpdate:value"])]))),256)),o(h).prompts.length<o(p).length?(b(),V("div",{key:0,class:"bg-secondaryBottom w-full h-12 rounded-2 cursor-pointer hover:bg-secondaryBottom/80 flex-center gap-2 text-sm font-semibold",onClick:g[4]||(g[4]=C=>o(h).prompts.push(""))},[v(x,{icon:"fa-solid fa-plus"}),Ol])):G("",!0)])]),l("div",Rl,[Dl,v(o(Ve),{onBlur:g[5]||(g[5]=()=>("commonMP"in A?A.commonMP:o(B))("ParameterClick",{name:"NegativePrompt",ext:{create:o(s)}})),class:"nfp-input !min-h-3",autoSize:!0,maxlength:9999,value:o(h).excludes,"onUpdate:value":g[6]||(g[6]=C=>o(h).excludes=C),placeholder:"(Optional)"},null,8,["value"])])]),l("div",Ul,[Al,l("div",Ll,[l("span",Hl,[l("span",Gl,[H(" Aspect Ratios: "),v(o(de),{overlayClassName:"nfp-tooltip-overlay",placement:"rightTop"},{title:L(()=>[H(" Aspect Rate changes the aspect ratio of the generated image ")]),default:L(()=>[v(x,{icon:"fa-solid fa-circle-info"})]),_:1})])]),l("div",jl,[(b(!0),V(se,null,me(o(ve),(C,I)=>(b(),V("div",{class:pe(["aspect-item",{active:T.value===I}]),onClick:()=>{T.value=I,o(h).aspect_ratio=o(ve)[T.value].label,("commonMP"in A?A.commonMP:o(B))("ParameterClick",{name:"Aspect",ext:{create:o(s)}})},key:I},[l("div",Wl,[l("div",{class:pe(["frame",C.className])},null,2)]),l("span",null,Q(C.label),1)],10,zl))),128))])])]),l("div",Jl,[l("span",ql,[l("span",Kl,[H(" CFG_Scale: "),v(o(de),{overlayClassName:"nfp-tooltip-overlay",placement:"rightTop"},{title:L(()=>[H(" A higher cfg_sacle means that you want the image to be closer to your prompt description, and it will also improve the smoothness and contrast of the image ")]),default:L(()=>[v(x,{icon:"fa-solid fa-circle-info"})]),_:1})]),v(o(Oe),{class:"flex-shrink-0 flex-1",tooltipPlacement:"bottom",tooltipVisible:!0,min:0,max:30,marks:{0:0,30:30},getTooltipPopupContainer:o(y),value:o(h).cfg_scale,"onUpdate:value":g[7]||(g[7]=C=>o(h).cfg_scale=C),onAfterChange:g[8]||(g[8]=()=>("commonMP"in A?A.commonMP:o(B))("ParameterClick",{name:"Scale",ext:{create:o(s)}}))},null,8,["getTooltipPopupContainer","value"])])]),l("div",Xl,[l("span",Yl,[l("span",Zl,[H(" Seed: "),v(o(de),{overlayClassName:"nfp-tooltip-overlay",placement:"rightTop"},{title:L(()=>[H(" Using the same seed number and prompt will produce similar ending images ")]),default:L(()=>[v(x,{icon:"fa-solid fa-circle-info"})]),_:1})]),v(o(It),{class:"nfp-input !ml-1",placeholder:"(Optional)",value:o(h).seed,"onUpdate:value":g[9]||(g[9]=C=>o(h).seed=C),min:0,max:4294967295,precision:0,onBlur:g[10]||(g[10]=()=>("commonMP"in A?A.commonMP:o(B))("ParameterClick",{name:"Seed",ext:{create:o(s)}}))},null,8,["value"])])]),o(h).model==="zoom"?(b(),V("div",Ql,[l("span",er,[tr,l("div",ar,[l("div",{class:pe(["flat-btn h-8 text-sm",{active:o(h).zoom_mode===o(Fe).ZOOM_OUT}]),onClick:g[11]||(g[11]=C=>k(o(Fe).ZOOM_OUT))}," Zoom Out ",2),l("div",{class:pe(["flat-btn h-8 text-sm",{active:o(h).zoom_mode===o(Fe).ZOOM_IN}]),onClick:g[12]||(g[12]=C=>k(o(Fe).ZOOM_IN))}," Zoom In ",2)])])])):G("",!0),l("div",sr,[l("span",nr,[or,v(o(ge),{onChange:g[13]||(g[13]=()=>("commonMP"in A?A.commonMP:o(B))("ParameterClick",{name:"BNB Greenfield Storage",ext:{create:o(s)}}))},{default:L(()=>[H(" BNB Greenfield ")]),_:1})])]),v(w,{class:"main-btn mt-5 mx-auto",onClick:E,loading:_.value,disabled:!o(f)},{default:L(()=>[H(" Create Now ")]),_:1},8,["loading","disabled"]),l("span",{class:"text-94 text-sm text-center"},"Cost: "+Q(Yt)+" $cNFP"),o(c)?(b(),V("span",ir,[H(" You don't have enough $cNFP to create. "),v(R,{class:"text-main hover:text-main",to:"/earn"},{default:L(()=>[H("Get More $cNFP >>")]),_:1})])):G("",!0)]),$.value?(b(),z(D,{key:0,visible:!!$.value,jobId:$.value,"onUpdate:jobId":g[14]||(g[14]=C=>$.value=C),onAbort:g[15]||(g[15]=C=>_.value=!1),onDone:S},null,8,["visible","jobId"])):G("",!0)],64)}}});const rr=Ct(lr,[["__scopeId","data-v-c7fc24b6"]]);var cr=globalThis&&globalThis.__awaiter||function(d,e,t,a){function n(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function u(r){try{c(a.next(r))}catch(f){i(f)}}function p(r){try{c(a.throw(r))}catch(f){i(f)}}function c(r){r.done?s(r.value):n(r.value).then(u,p)}c((a=a.apply(d,e||[])).next())})};function ur(d,e){return cr(this,void 0,void 0,function*(){const t=new AudioContext({sampleRate:e});return t.decodeAudioData(d).finally(()=>t.close())})}function dr(d){const e=d[0];if(e.some(t=>t>1||t<-1)){const t=e.length;let a=0;for(let n=0;n<t;n++){const s=Math.abs(e[n]);s>a&&(a=s)}for(const n of d)for(let s=0;s<t;s++)n[s]/=a}return d}function pr(d,e){return typeof d[0]=="number"&&(d=[d]),dr(d),{duration:e,length:d[0].length,sampleRate:d[0].length/e,numberOfChannels:d.length,getChannelData:t=>d==null?void 0:d[t],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}const Zt={decode:ur,createBuffer:pr};var Qt=globalThis&&globalThis.__awaiter||function(d,e,t,a){function n(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function u(r){try{c(a.next(r))}catch(f){i(f)}}function p(r){try{c(a.throw(r))}catch(f){i(f)}}function c(r){r.done?s(r.value):n(r.value).then(u,p)}c((a=a.apply(d,e||[])).next())})};function mr(d,e,t){var a,n;return Qt(this,void 0,void 0,function*(){const s=yield fetch(d,t);{const i=(a=s.clone().body)===null||a===void 0?void 0:a.getReader(),u=Number((n=s.headers)===null||n===void 0?void 0:n.get("Content-Length"));let p=0;const c=(r,f)=>Qt(this,void 0,void 0,function*(){if(r)return;p+=(f==null?void 0:f.length)||0;const y=Math.round(p/u*100);return e(y),i==null?void 0:i.read().then(({done:T,value:h})=>c(T,h))});i==null||i.read().then(({done:r,value:f})=>c(r,f))}return s.blob()})}const fr={fetchBlob:mr};class Bt{constructor(){this.listeners={}}on(e,t){return this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),()=>this.un(e,t)}once(e,t){const a=this.on(e,t),n=this.on(e,()=>{a(),n()});return a}un(e,t){this.listeners[e]&&(t?this.listeners[e].delete(t):delete this.listeners[e])}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach(a=>a(...t))}}class vr extends Bt{constructor(e){super(),this.isExternalMedia=!1,e.media?(this.media=e.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),e.mediaControls&&(this.media.controls=!0),e.autoplay&&(this.media.autoplay=!0),e.playbackRate!=null&&this.onceMediaEvent("canplay",()=>{e.playbackRate!=null&&(this.media.playbackRate=e.playbackRate)})}onMediaEvent(e,t,a){return this.media.addEventListener(e,t,a),()=>this.media.removeEventListener(e,t)}onceMediaEvent(e,t){return this.onMediaEvent(e,t,{once:!0})}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const e=this.getSrc();e.startsWith("blob:")&&URL.revokeObjectURL(e)}setSrc(e,t){if(this.getSrc()===e)return;this.revokeSrc();const n=t instanceof Blob?URL.createObjectURL(t):e;this.media.src=n,this.media.load()}destroy(){this.media.pause(),!this.isExternalMedia&&(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}play(){return this.media.play()}pause(){this.media.pause()}isPlaying(){return this.media.currentTime>0&&!this.media.paused&&!this.media.ended}setTime(e){this.media.currentTime=e}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(e){this.media.volume=e}getMuted(){return this.media.muted}setMuted(e){this.media.muted=e}getPlaybackRate(){return this.media.playbackRate}setPlaybackRate(e,t){t!=null&&(this.media.preservesPitch=t),this.media.playbackRate=e}getMediaElement(){return this.media}setMediaElement(e){this.media=e}setSinkId(e){return this.media.setSinkId(e)}}function hr(d,e,t,a,n=5){let s=()=>{};if(!d)return s;const i=u=>{if(u.button===2)return;u.preventDefault(),u.stopPropagation();let p=u.clientX,c=u.clientY,r=!1;const f=h=>{h.preventDefault(),h.stopPropagation();const U=h.clientX,O=h.clientY;if(r||Math.abs(U-p)>=n||Math.abs(O-c)>=n){const{left:$,top:_}=d.getBoundingClientRect();r||(r=!0,t==null||t(p-$,c-_)),e(U-p,O-c,U-$,O-_),p=U,c=O}},y=h=>{r&&(h.preventDefault(),h.stopPropagation())},T=()=>{r&&(a==null||a()),s()};document.addEventListener("pointermove",f),document.addEventListener("pointerup",T),document.addEventListener("pointerleave",T),document.addEventListener("click",y,!0),s=()=>{document.removeEventListener("pointermove",f),document.removeEventListener("pointerup",T),document.removeEventListener("pointerleave",T),setTimeout(()=>{document.removeEventListener("click",y,!0)},10)}};return d.addEventListener("pointerdown",i),()=>{s(),d.removeEventListener("pointerdown",i)}}class pt extends Bt{constructor(e,t){super(),this.timeouts=[],this.isScrolling=!1,this.audioData=null,this.resizeObserver=null,this.isDragging=!1,this.options=e;const a=this.parentFromOptionsContainer(e.container);this.parent=a;const[n,s]=this.initHtml();a.appendChild(n),this.container=n,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),t&&s.appendChild(t),this.initEvents()}parentFromOptionsContainer(e){let t;if(typeof e=="string"?t=document.querySelector(e):e instanceof HTMLElement&&(t=e),!t)throw new Error("Container not found");return t}initEvents(){const e=a=>{const n=this.wrapper.getBoundingClientRect(),s=a.clientX-n.left,i=a.clientX-n.left,u=s/n.width,p=i/n.height;return[u,p]};this.wrapper.addEventListener("click",a=>{const[n,s]=e(a);this.emit("click",n,s)}),this.wrapper.addEventListener("dblclick",a=>{const[n,s]=e(a);this.emit("dblclick",n,s)}),this.options.dragToSeek&&this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:a,scrollWidth:n,clientWidth:s}=this.scrollContainer,i=a/n,u=(a+s)/n;this.emit("scroll",i,u)});const t=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{t(()=>this.reRender())}),this.resizeObserver.observe(this.scrollContainer)}initDrag(){hr(this.wrapper,(e,t,a)=>{this.emit("drag",Math.max(0,Math.min(1,a/this.wrapper.getBoundingClientRect().width)))},()=>this.isDragging=!0,()=>this.isDragging=!1)}getHeight(){return this.options.height==null?128:isNaN(Number(this.options.height))?this.options.height==="auto"&&this.parent.clientHeight||128:Number(this.options.height)}initHtml(){const e=document.createElement("div"),t=e.attachShadow({mode:"open"});return t.innerHTML=`
      <style>
        :host {
          user-select: none;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
          touch-action: none;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight()}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[e,t]}setOptions(e){if(this.options.container!==e.container){const t=this.parentFromOptionsContainer(e.container);t.appendChild(this.container),this.parent=t}this.options=e,this.reRender()}getWrapper(){return this.wrapper}getScroll(){return this.scrollContainer.scrollLeft}destroy(){var e;this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect()}createDelay(e=10){const t={};return this.timeouts.push(t),a=>{t.timeout&&clearTimeout(t.timeout),t.timeout=setTimeout(a,e)}}convertColorValues(e){if(!Array.isArray(e))return e||"";if(e.length<2)return e[0]||"";const t=document.createElement("canvas"),n=t.getContext("2d").createLinearGradient(0,0,0,t.height),s=1/(e.length-1);return e.forEach((i,u)=>{const p=u*s;n.addColorStop(p,i)}),n}renderBarWaveform(e,t,a,n){const s=e[0],i=e[1]||e[0],u=s.length,{width:p,height:c}=a.canvas,r=c/2,f=window.devicePixelRatio||1,y=t.barWidth?t.barWidth*f:1,T=t.barGap?t.barGap*f:t.barWidth?y/2:0,h=t.barRadius||0,U=p/(y+T)/u,O=h&&"roundRect"in a?"roundRect":"rect";a.beginPath();let $=0,_=0,E=0;for(let N=0;N<=u;N++){const F=Math.round(N*U);if(F>$){const P=Math.round(_*r*n),A=Math.round(E*r*n),g=P+A||1;let m=r-P;t.barAlign==="top"?m=0:t.barAlign==="bottom"&&(m=c-g),a[O]($*(y+T),m,y,g,h),$=F,_=0,E=0}const k=Math.abs(s[N]||0),S=Math.abs(i[N]||0);k>_&&(_=k),S>E&&(E=S)}a.fill(),a.closePath()}renderLineWaveform(e,t,a,n){const s=i=>{const u=e[i]||e[0],p=u.length,{height:c}=a.canvas,r=c/2,f=a.canvas.width/p;a.moveTo(0,r);let y=0,T=0;for(let h=0;h<=p;h++){const U=Math.round(h*f);if(U>y){const $=Math.round(T*r*n)||1,_=r+$*(i===0?-1:1);a.lineTo(y,_),y=U,T=0}const O=Math.abs(u[h]||0);O>T&&(T=O)}a.lineTo(y,r)};a.beginPath(),s(0),s(1),a.fill(),a.closePath()}renderWaveform(e,t,a){if(a.fillStyle=this.convertColorValues(t.waveColor),t.renderFunction){t.renderFunction(e,a);return}let n=t.barHeight||1;if(t.normalize){const s=Array.from(e[0]).reduce((i,u)=>Math.max(i,Math.abs(u)),0);n=s?1/s:1}if(t.barWidth||t.barGap||t.barAlign){this.renderBarWaveform(e,t,a,n);return}this.renderLineWaveform(e,t,a,n)}renderSingleCanvas(e,t,a,n,s,i,u,p){const c=window.devicePixelRatio||1,r=document.createElement("canvas"),f=e[0].length;r.width=Math.round(a*(i-s)/f),r.height=n*c,r.style.width=`${Math.floor(r.width/c)}px`,r.style.height=`${n}px`,r.style.left=`${Math.floor(s*a/c/f)}px`,u.appendChild(r);const y=r.getContext("2d");this.renderWaveform(e.map(U=>U.slice(s,i)),t,y);const T=r.cloneNode();p.appendChild(T);const h=T.getContext("2d");r.width>0&&r.height>0&&h.drawImage(r,0,0),h.globalCompositeOperation="source-in",h.fillStyle=this.convertColorValues(t.progressColor),h.fillRect(0,0,r.width,r.height)}renderChannel(e,t,a){const n=document.createElement("div"),s=this.getHeight();n.style.height=`${s}px`,this.canvasWrapper.style.minHeight=`${s}px`,this.canvasWrapper.appendChild(n);const i=n.cloneNode();this.progressWrapper.appendChild(i);const{scrollLeft:u,scrollWidth:p,clientWidth:c}=this.scrollContainer,r=e[0].length,f=r/p;let y=Math.min(pt.MAX_CANVAS_WIDTH,c);if(t.barWidth||t.barGap){const F=t.barWidth||.5,k=t.barGap||F/2,S=F+k;y%S!==0&&(y=Math.floor(y/S)*S)}const T=Math.floor(Math.abs(u)*f),h=Math.floor(T+y*f),U=h-T,O=(F,k)=>{this.renderSingleCanvas(e,t,a,s,Math.max(0,F),Math.min(k,r),n,i)},$=this.createDelay(),_=this.createDelay(),E=(F,k)=>{O(F,k),F>0&&$(()=>{E(F-U,k-U)})},N=(F,k)=>{O(F,k),k<r&&_(()=>{N(F+U,k+U)})};E(T,h),h<r&&N(h,h+U)}render(e){this.timeouts.forEach(u=>u.timeout&&clearTimeout(u.timeout)),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.wrapper.style.width="";const t=window.devicePixelRatio||1,a=this.scrollContainer.clientWidth,n=Math.ceil(e.duration*(this.options.minPxPerSec||0));this.isScrolling=n>a;const s=this.options.fillParent&&!this.isScrolling,i=(s?a:n)*t;if(this.wrapper.style.width=s?"100%":`${n}px`,this.scrollContainer.style.overflowX=this.isScrolling?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.options.splitChannels)for(let u=0;u<e.numberOfChannels;u++){const p=Object.assign(Object.assign({},this.options),this.options.splitChannels[u]);this.renderChannel([e.getChannelData(u)],p,i)}else{const u=[e.getChannelData(0)];e.numberOfChannels>1&&u.push(e.getChannelData(1)),this.renderChannel(u,this.options,i)}this.audioData=e,this.emit("render")}reRender(){if(!this.audioData)return;const e=this.progressWrapper.clientWidth;this.render(this.audioData);const t=this.progressWrapper.clientWidth;this.scrollContainer.scrollLeft+=t-e}zoom(e){this.options.minPxPerSec=e,this.reRender()}scrollIntoView(e,t=!1){const{clientWidth:a,scrollLeft:n,scrollWidth:s}=this.scrollContainer,i=s*e,u=a/2,p=t&&this.options.autoCenter&&!this.isDragging?u:a;if(i>n+p||i<n)if(this.options.autoCenter&&!this.isDragging){const c=u/20;i-(n+u)>=c&&i<n+a?this.scrollContainer.scrollLeft+=c:this.scrollContainer.scrollLeft=i-u}else this.isDragging?this.scrollContainer.scrollLeft=i<n?i-10:i-a+10:this.scrollContainer.scrollLeft=i;{const{scrollLeft:c}=this.scrollContainer,r=c/s,f=(c+a)/s;this.emit("scroll",r,f)}}renderProgress(e,t){isNaN(e)||(this.progressWrapper.style.width=`${e*100}%`,this.cursor.style.left=`${e*100}%`,this.cursor.style.marginLeft=Math.round(e*100)===100?`-${this.options.cursorWidth}px`:"",this.isScrolling&&this.options.autoScroll&&this.scrollIntoView(e,t))}}pt.MAX_CANVAS_WIDTH=4e3;class gr extends Bt{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}var Ze=globalThis&&globalThis.__awaiter||function(d,e,t,a){function n(s){return s instanceof t?s:new t(function(i){i(s)})}return new(t||(t=Promise))(function(s,i){function u(r){try{c(a.next(r))}catch(f){i(f)}}function p(r){try{c(a.throw(r))}catch(f){i(f)}}function c(r){r.done?s(r.value):n(r.value).then(u,p)}c((a=a.apply(d,e||[])).next())})};const xr={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class Ot extends vr{static create(e){return new Ot(e)}constructor(e){var t,a;super({media:e.media,mediaControls:e.mediaControls,autoplay:e.autoplay,playbackRate:e.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.options=Object.assign({},xr,e),this.timer=new gr;const n=e.media?void 0:this.getMediaElement();this.renderer=new pt(this.options,n),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const s=this.options.url||((t=this.options.media)===null||t===void 0?void 0:t.currentSrc)||((a=this.options.media)===null||a===void 0?void 0:a.src);s&&this.load(s,this.options.peaks,this.options.duration)}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{const e=this.getCurrentTime();this.renderer.renderProgress(e/this.getDuration(),!0),this.emit("timeupdate",e),this.emit("audioprocess",e)}))}initPlayerEvents(){this.subscriptions.push(this.onMediaEvent("timeupdate",()=>{const e=this.getCurrentTime();this.renderer.renderProgress(e/this.getDuration(),this.isPlaying()),this.emit("timeupdate",e)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(e,t)=>{this.options.interact&&(this.seekTo(e),this.emit("interaction",e*this.getDuration()),this.emit("click",e,t))}),this.renderer.on("dblclick",(e,t)=>{this.emit("dblclick",e,t)}),this.renderer.on("scroll",(e,t)=>{const a=this.getDuration();this.emit("scroll",e*a,t*a)}),this.renderer.on("render",()=>{this.emit("redraw")}));{let e;this.subscriptions.push(this.renderer.on("drag",t=>{this.options.interact&&(this.renderer.renderProgress(t),clearTimeout(e),e=setTimeout(()=>{this.seekTo(t)},this.isPlaying()?0:200),this.emit("interaction",t*this.getDuration()),this.emit("drag",t))}))}}initPlugins(){var e;!((e=this.options.plugins)===null||e===void 0)&&e.length&&this.options.plugins.forEach(t=>{this.registerPlugin(t)})}setOptions(e){this.options=Object.assign({},this.options,e),this.renderer.setOptions(this.options),e.audioRate&&this.setPlaybackRate(e.audioRate),e.mediaControls!=null&&(this.getMediaElement().controls=e.mediaControls)}registerPlugin(e){return e.init(this),this.plugins.push(e),this.subscriptions.push(e.once("destroy",()=>{this.plugins=this.plugins.filter(t=>t!==e)})),e}getWrapper(){return this.renderer.getWrapper()}getScroll(){return this.renderer.getScroll()}getActivePlugins(){return this.plugins}loadAudio(e,t,a,n){return Ze(this,void 0,void 0,function*(){if(this.emit("load",e),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!t&&!a){const s=i=>this.emit("loading",i);t=yield fr.fetchBlob(e,s,this.options.fetchParams)}if(this.setSrc(e,t),a)n=(yield Promise.resolve(n||this.getDuration()))||(yield new Promise(s=>{this.onceMediaEvent("loadedmetadata",()=>s(this.getDuration()))}))||(yield Promise.resolve(0)),this.decodedData=Zt.createBuffer(a,n);else if(t){const s=yield t.arrayBuffer();this.decodedData=yield Zt.decode(s,this.options.sampleRate)}this.emit("decode",this.getDuration()),this.decodedData&&this.renderer.render(this.decodedData),this.emit("ready",this.getDuration())})}load(e,t,a){return Ze(this,void 0,void 0,function*(){yield this.loadAudio(e,void 0,t,a)})}loadBlob(e,t,a){return Ze(this,void 0,void 0,function*(){yield this.loadAudio("blob",e,t,a)})}zoom(e){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(e),this.emit("zoom",e)}getDecodedData(){return this.decodedData}exportPeaks({channels:e=2,maxLength:t=8e3,precision:a=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const n=Math.min(e,this.decodedData.numberOfChannels),s=[];for(let i=0;i<n;i++){const u=this.decodedData.getChannelData(i),p=[],c=Math.round(u.length/t);for(let r=0;r<t;r++){const f=u.slice(r*c,(r+1)*c),y=Math.max(...f);p.push(Math.round(y*a)/a)}s.push(p)}return s}getDuration(){let e=super.getDuration()||0;return(e===0||e===1/0)&&this.decodedData&&(e=this.decodedData.duration),e}toggleInteraction(e){this.options.interact=e}seekTo(e){const t=this.getDuration()*e;this.setTime(t)}playPause(){return Ze(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(e){this.setTime(this.getCurrentTime()+e)}empty(){this.load("",[[0]],.001)}destroy(){this.emit("destroy"),this.plugins.forEach(e=>e.destroy()),this.subscriptions.forEach(e=>e()),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}const br={id:"waveform",ref:"waveform"},yr=ee({__name:"Audio",props:["src","needAfterLoad"],setup(d,{expose:e}){const t=d,a=M(null),n=M(!1),s=M(0),i=M(0),u=M(!1),p=()=>{a.value=Ot.create({container:"#waveform",height:75,waveColor:"#ffffff",progressColor:"#405fff",cursorColor:"transparent",hideScrollbar:!0,minPxPerSec:100}),t!=null&&t.needAfterLoad&&c()},c=f=>{!f&&!t.src||(u.value=!0,a.value.load(f||t.src),a.value.on("finish",()=>{n.value=!1,a.value.setTime(0)}),a.value.on("timeupdate",y=>{i.value=y}),a.value.once("decode",y=>{s.value=y,u.value=!1,n.value=!1}))},r=()=>{a.value&&(n.value=!n.value,a.value.playPause())};return et(()=>{p()}),ie(()=>t.src,()=>{n.value=!1,i.value=0,s.value=0,a.value&&a.value.setTime(0)},{immediate:!0}),e({initWaveSurfer:c}),(f,y)=>{const T=za;return b(),z(o(Ge),{spinning:o(u)},{default:L(()=>[l("div",Aa({class:"min-w-[400px]"},f.$attrs),[l("div",br,null,512),v(T,{visible:!0,playing:o(n),progressTime:o(i),totalTime:o(s),showPlay:!0,resource:d.src,allowDownload:!1,onPlayPause:r,timerClass:"!w-auto",class:"w-full flex"},null,8,["playing","progressTime","totalTime","resource"])],16)]),_:1},8,["spinning"])}}}),_r={class:"bg-[#141929] rounded-2 p-5 flex-col items-center gap-4 max-w-510px"},wr={class:"text-gray text-standard-small"},kr={class:"flex-col items-center gap-1 w-full"},Cr={key:0,class:"relative group"},Tr={class:"mr-8"},$r={key:1,class:"bg-black/30 p-3 flex items-center rounded-2 text-standard text-94"},Sr=ee({__name:"UploadAudio",props:["modelValue","placeholder","creatTypeFiled","needCheckSize","title"],emits:["update:modelValue"],setup(d,{emit:e}){const t=d,{error:a}=xe(),n=M(!1),s=M(null),i=ae({get(){var c;return t.modelValue&&((c=s.value)==null||c.initWaveSurfer(t.modelValue)),t.modelValue},set(c){e("update:modelValue",c)}}),u=()=>async c=>{var r;try{const f=new FormData;f.append("file",c.file),B("ParameterClick",{name:"Music",ext:{create:t.creatTypeFiled}}),n.value=!0;const y=await oe("/api/v1/files/upload",{method:"post",body:f});i.value=y.data.value.data.url,(r=s.value)==null||r.initWaveSurfer(y.data.value.data.url)}catch(f){a(f.message||f)}finally{n.value=!1}},p=()=>{i.value=""};return(c,r)=>{const f=yr,y=re("font-awesome-icon");return b(),V("div",_r,[l("h2",wr,Q(d.title||"Click or drag an image to upload here"),1),l("div",kr,[v(o(Pt),{class:"w-full",accept:o(it).MUSIC,customRequest:u(),showUploadList:!1,disabled:n.value},{default:L(()=>[i.value?(b(),V("div",Cr,[l("div",Tr,[(b(),z(f,{key:i.value,src:i.value,ref_key:"waveRef",ref:s},null,8,["src"]))]),v(y,{onClick:$t(p,["stop"]),class:"absolute right-1 top-0",icon:"fa-solid fa-circle-xmark"},null,8,["onClick"])])):G("",!0),i.value?G("",!0):(b(),V("div",$r,[n.value?(b(),z(y,{key:0,icon:"fa-solid fa-spinner",class:"animate-spin"})):(b(),V(se,{key:1},[H(Q(d.placeholder),1)],64)),v(y,{icon:"fa-solid fa-cloud-arrow-up",class:"ml-auto text-gray"})]))]),_:1},8,["accept","customRequest","disabled"])])])}}}),Pr={key:0,class:"flex items-center max-w-890px cursor-pointer text-blur"},Mr=l("span",null,"No idea? Try these~",-1),Er={key:1,class:"flex flex-wrap gap-4 max-w-full my-3"},Fr=["onClick"],Ir={class:"absolute h-7 left-0 right-0 bottom-0 flex-center bg-secondaryBottom/50 text-standard font-semibold text-bright"},ea=6,Nr=ee({__name:"MusicDemo",props:["creatTypeFiled","eventName"],emits:["update"],async setup(d,{emit:e}){let t,a;const n=d,{error:s}=xe(),i=M(!1),u=M([]),p=async()=>{var r,f;if(!i.value)try{i.value=!0,B("RefreshMusic",{name:"refresh",ext:{create:n.creatTypeFiled}});const y=await Ee(`/api/v1/materials?page=0&size=${ea}`,{method:"post",data:{sort_by:"music"}}),{data:T}=y.data||{};u.value=T||[]}catch(y){s(((f=(r=y.response)==null?void 0:r.data)==null?void 0:f.error)||y.message||y)}finally{i.value=!1}},c=r=>{B("Reference Music Select",{value:r,ext:{create:n.creatTypeFiled}}),e("update",r)};return[t,a]=La(()=>p()),await t,a(),(r,f)=>{var T,h,U;const y=re("font-awesome-icon");return b(),V(se,null,[(T=o(u))!=null&&T.length?(b(),V("h3",Pr,[Mr,((h=o(u))==null?void 0:h.length)>=ea?(b(),V("span",{key:0,class:"ml-auto",onClick:p},[H(" Refresh "),v(y,{icon:"fa-solid fa-arrows-rotate",class:pe({"animate-spin":o(i)})},null,8,["class"])])):G("",!0)])):G("",!0),(U=o(u))!=null&&U.length?(b(),V("div",Er,[(b(!0),V(se,null,me(o(u),(O,$)=>(b(),V("div",{class:"max-w-135px aspect-1 w-full border-2px border-solid border-secondaryBottom text-gray cursor-pointer rounded-3 hover:border-main select-none relative overflow-hidden",style:tt({background:`url(${(O==null?void 0:O.cover_url)||"https://static.nfprompt.io/website/nfp/images/style/pixel.png"}) center center / cover no-repeat`}),onClick:_=>c(O==null?void 0:O.file_url),key:$},[l("span",Ir,Q(o(ct)(O==null?void 0:O.name)),1)],12,Fr))),128))])):G("",!0)],64)}}}),Vr={key:0,class:"flex gap-3 flex-wrap"},Br=["onClick"],Or=ee({__name:"SelectTag",props:["tags","modelValue","eventName"],emits:["update:modelValue","afterChange"],setup(d,{emit:e}){const t=d,a=ae({get(){return t.modelValue},set(s){e("update:modelValue",s)}}),n=s=>{a.value=a.value===s?"":s,a.value||(B(t.eventName,{name:s}),e("afterChange"))};return(s,i)=>{var u;return((u=d.tags)==null?void 0:u.length)>0?(b(),V("div",Vr,[(b(!0),V(se,null,me(d.tags,(p,c)=>(b(),V("span",{class:pe(["border-2px border-solid border-[#68718D] rounded-25 px-3 py-2px text-[#C3C7D3] hover:opacity-50 transition-all cursor-pointer",{"!text-[#3772FF] !border-[#3772FF] !border-2px font-bold":o(a)===p}]),key:p+c,onClick:r=>n(p)},Q(p),11,Br))),128))])):G("",!0)}}}),Rr=["onClick"],Dr={class:"flex flex-col items-center"},ta=20,Ur=ee({__name:"SelectListedNFT",props:["visible"],emits:["hidden","select"],setup(d,{emit:e}){const t=d;let n=ze.CancelToken.source();const s=M([]),i=M(0),u=M(!0),p=M(!1),c=ke(),r=M(null),f=M(null),y=O=>{r.value=O},T=()=>{e("select",r.value),e("hidden")},h=async()=>{if(!(p.value||!c.accessToken||!u.value))try{p.value=!0;const O=await Ee(`/api/v1/artworks?page=${i.value}&size=${ta}`,{method:"post",data:{created_by:"me",listed:!0,sort_by:"prompt"}}),{data:$}=O.data||{};u.value=($==null?void 0:$.length)==ta,s.value=i.value===0?$:s.value.concat($||[]),i.value++}catch(O){console.log(O)}finally{p.value=!1}};{const{arrivedState:O}=Wa(f),{bottom:$}=Ha(O);ie(()=>$.value,()=>{$.value&&h()})}ie(()=>[t.visible,c.accessToken],()=>{p.value&&(n==null||n.cancel()),p.value=!1,u.value=!0,i.value=0,s.value=[],h()},{immediate:!0});const U=()=>{s.value=[],r.value=null};return ie(()=>t.visible,()=>{U()}),(O,$)=>{const _=ss,E=da,N=re("font-awesome-icon"),F=re("Button");return b(),z(o(We),{title:"Choose one NFT",width:"800px",centered:"",footer:!1,visible:d.visible,onCancel:$[0]||($[0]=k=>e("hidden")),class:"w-full mint-modal max-width-800px"},{default:L(()=>{var k,S;return[!((k=o(s))!=null&&k.length)&&!o(p)?(b(),z(_,{key:0,msg:"oops! Please mint & list an NFT first."})):(b(),z(He,{key:1},[l("div",null,[l("div",{ref_key:"scrollRef",ref:f,class:"grid grid-cols-2 md:grid-cols-5 gap-1 mb-5 max-w-800px mx-auto w-full overflow-auto max-h-[500px] -mr-6 pr-6"},[(b(!0),V(se,null,me(o(s),P=>{var A,g;return b(),V("div",{key:O.index,class:pe(["border-2px w-full border-solid border-secondaryBottom text-gray cursor-pointer rounded-3 hover:border-main select-none relative overflow-hidden",{"!text-white !border-main bg-white/10 font-semibold":((A=o(r))==null?void 0:A.id)===(P==null?void 0:P.id)}])},[[o(Ne).MUSIC].includes(P==null?void 0:P.media_type)?(b(),z(E,{key:0,"mouse-event":!0,metadata:P==null?void 0:P.media_url,cover:P==null?void 0:P.image,class:"w-full h-full",onClick:m=>y(P)},null,8,["metadata","cover","onClick"])):(b(),V("div",{key:1,class:"aspect-1 w-full",style:tt({background:`url(${P==null?void 0:P.image}) center center / cover no-repeat`}),onClick:m=>y(P)},null,12,Rr)),((g=o(r))==null?void 0:g.id)===(P==null?void 0:P.id)?(b(),z(N,{key:2,icon:"fa-solid fa-circle-check",class:"w-4 text-green absolute right-1 top-1"})):G("",!0)],2)}),128))],512),l("div",Dr,[o(p)?(b(),z(N,{key:0,class:"w-6 h-6 animate-spin",icon:"fa-solid fa-spinner"})):G("",!0),v(F,{class:"main-btn mt-4",onClick:T,disabled:!((S=o(r))!=null&&S.id)},{default:L(()=>[H(" OK ")]),_:1},8,["disabled"])])])],1024))]}),_:1},8,["visible"])}}}),Ar={key:1,class:"flex flex-col items-center gap-4 py-5"},Lr=l("h2",{class:"text-6 font-medium text-center"}," There are 66 tasks ahead in the queue, please wait...... ",-1),Hr={key:3,class:"flex flex-col items-center gap-4 py-5 px-2"},Gr=l("h2",{class:"text-6 font-medium text-center"},"Set Name for Music",-1),jr={class:"w-full"},zr={class:"rounded-2 p-4 bg-black/40 text-standard gap-2 flex items-center"},Wr=l("span",{class:"flex-shrink-0 w-fit"},"Set Name:",-1),Jr={class:"flex flex-col md:flex-row items-center gap-1 md:gap-5"},qr={key:0},Kr={key:4,class:"flex flex-col items-center gap-4 py-5 px-2"},Xr=l("h2",{class:"text-6 font-medium text-center"},"Added to your Collection!",-1),Yr={class:"w-full flex items-center justify-center"},Zr={class:"rounded-2 p-4 bg-black/40 text-standard gap-2 flex items-center"},Qr=l("span",{class:"flex-shrink-0 w-fit"},"List Price:",-1),ec=l("span",null,"BNB",-1),tc={class:"flex flex-col md:flex-row items-center gap-1 md:gap-5"},ac=l("div",{class:"text-center text-gray leading-5"},[l("p",null,"Earn tokens by selling your art;"),l("p",null,"royalties are distributed when your prompt is used.")],-1),sc=ee({__name:"MintMusicModel",props:["visible","jobId"],emits:["update:visible","update:jobId","abort","done"],setup(d,{emit:e}){const t=d,{create:a}=at(),{success:n,error:s}=xe(),i=M(),u=M(!1),c=ze.CancelToken.source(),r=M(J.QUEUE),f=M({}),y=M(0),T=async()=>{var w,R;if(u.value)return;r.value=J.GENERATING;const m=await oe(`api/v1/jobs/${t.jobId}`),{data:x}=m.data.value||{};if(i.value&&((w=i.value)==null||w.updateFakeProgress(y.value,x.progress)),x.status===ne.FAILED)throw B("Job",{name:"Failed",value:t.jobId,ext:{create:"Music",...x}}),new Error("Job Failed");if(x.status===ne.TIMEOUT)throw B("Job",{name:"Timeout",value:t.jobId,ext:{create:"Music",...x}}),new Error("Job Timeout");x.status!=ne.COMPLETED?(await he(5e3),y.value++,await T()):(i.value&&((R=i.value)==null||R.resetFakeProgress()),f.value=x,B("Job",{name:"Success",value:t.jobId,ext:{create:"Music",type:"generate",...x}}),h())},h=()=>{r.value=J.CHOOSE,B("SelectPicPop",{name:"Open",ext:{create:"Music"}})},U=M(""),O=async m=>{const x=await oe(`/api/v1/artworks/${m}/mint`,{method:"post",body:{name:U.value}}),{data:w}=x.data.value||{};k.tokenURI=w.token_uri,k.artwork_id=m,k.db_id=w.id,k.name=U.value},$=M(""),_=M(0),E=async m=>{if(!u.value)try{const x=await oe(`api/v1/jobs/${m}`),{data:w}=x.data.value||{};if(w.status===ne.FAILED)throw B("Job",{name:"Failed",value:m,ext:{create:"Music",...w}}),new Error("Job Failed");if(w.status===ne.TIMEOUT)throw B("Job",{name:"Timeout",value:m,ext:{create:"Music",...w}}),new Error("Job Timeout");w.status!=ne.COMPLETED?(_.value=w.progress,await he(5e3),await E(m)):($.value=w.image,B("Job",{name:"Success",value:m,ext:{create:"Music",type:"choose",...w}}),await O(w.artwork_id))}catch{await he(5e3),await E(m)}},N=M(!1),F=async()=>{var m,x;if(!N.value)try{N.value=!0;const w=await oe(`/api/v1/jobs/${t.jobId}/action`,{method:"post",body:{action:"u1",name:U.value}});await E((x=(m=w.data)==null?void 0:m.value.data)==null?void 0:x.job_id),r.value=J.MINT,B("MintToEarnPop",{name:"Open",ext:{create:"Music"}})}catch(w){s(w.message||w)}finally{N.value=!1}},k=Me({tokenURI:"",artwork_id:0,price:"",db_id:"",name:""}),S=M(!1),P=async()=>{var m;if(!S.value){if(!k.db_id||!k.price)return s("Please make sure the price has been set");try{S.value=!0,await a({db_id:k.db_id,tokenURI:k.tokenURI,royaltyFee:nt(.05),price:Number(k.price),name:k.name}),B("TransctionResult",{name:"MintToEarn",value:"Success",ext:{create:"Music"}}),n("Minted"),e("done"),g(!1)}catch(x){B("TransctionResult",{name:"MintToEarn",value:"Fail",ext:{create:"Music"}}),console.dir(x),s(((m=x.cause)==null?void 0:m.shortMessage)||x.message||x)}finally{S.value=!1}}},A=async()=>{try{B("GeneratingPop",{name:"Open",ext:{create:"Music"}}),await T()}catch(m){console.log(m),s(m.message||m),g()}},g=(m=!0)=>{m&&B("MintProgress",{name:"abort",value:J[r.value],ext:{create:"Music"}}),u.value=!0,e("update:jobId",""),e("abort"),c==null||c.cancel(),r.value=J.QUEUE,f.value={},k.tokenURI="",k.price="",k.artwork_id=0,k.db_id="",_.value=0};return ie(()=>t.jobId,()=>{t.jobId&&A()},{immediate:!0}),st(()=>{g()}),(m,x)=>{const w=re("font-awesome-icon"),R=dt,D=da;return b(),z(o(We),{width:"auto",centered:"",footer:!1,closable:!1,visible:d.visible,class:"w-full mint-modal"},{default:L(()=>{var C,I,X,ce;return[[o(J).CHOOSE,o(J).MINT].includes(r.value)?(b(),z(w,{key:0,icon:"fa-solid fa-xmark",class:"absolute right-6 top-6 w-6 h-6 cursor-pointer",onClick:g})):G("",!0),r.value===o(J).QUEUE?(b(),V("div",Ar,[Lr,v(w,{icon:"fa-solid fa-spinner",class:"animate-spin"}),v(o(le),{class:"main-btn mt-4",onClick:x[0]||(x[0]=()=>g())},{default:L(()=>[H("Cancel")]),_:1})])):G("",!0),r.value===o(J).GENERATING?(b(),z(R,{key:2,ref_key:"generateRef",ref:i,type:"Music",onAbort:g},null,512)):G("",!0),r.value===o(J).CHOOSE?(b(),V("div",Hr,[Gr,l("div",jr,[v(D,{class:"aspect-1 !w-[296px] overflow-hidden !max-w-full","mouse-event":!0,metadata:(C=f.value)==null?void 0:C.media_url,controls:!0,showPlayBtn:!0,cover:(I=f.value)==null?void 0:I.image},null,8,["metadata","cover"])]),l("div",zr,[Wr,v(o(Pe),{class:"!text-white",value:U.value,"onUpdate:value":x[1]||(x[1]=K=>U.value=K),maxlength:50,disabled:N.value},null,8,["value","disabled"])]),l("div",Jr,[v(o(le),{class:"main-btn md:mt-4",onClick:x[2]||(x[2]=()=>{o(B)("SelectPicPop",{name:"MusicSetName "}),F()}),loading:N.value,disabled:!U.value},{default:L(()=>[H(" OK "),_.value?(b(),V("span",qr,Q(_.value)+"%",1)):G("",!0)]),_:1},8,["loading","disabled"])])])):G("",!0),r.value===o(J).MINT?(b(),V("div",Kr,[Xr,l("div",Yr,[v(D,{class:"aspect-1 !w-[296px] !max-w-full","mouse-event":!0,metadata:(X=f.value)==null?void 0:X.media_url,controls:!0,showPlayBtn:!0,cover:(ce=f.value)==null?void 0:ce.image},null,8,["metadata","cover"])]),l("div",Zr,[Qr,v(o(Pe),{class:"!text-white",value:o(k).price,"onUpdate:value":x[3]||(x[3]=K=>o(k).price=K)},null,8,["value"]),ec]),l("div",tc,[v(o(le),{class:"main-btn mt-4",onClick:x[4]||(x[4]=()=>{o(B)("MintToEarnPop",{name:"MintToEarn "}),P()}),loading:S.value,disabled:!o(k).price},{default:L(()=>[H(" Mint & List ")]),_:1},8,["loading","disabled"])]),ac])):G("",!0)]}),_:1},8,["visible"])}}}),nc=["Bass","Drum","Guitar","Organ","Piano","Saxophone","Trumpet","Violin","Whistle"],oc=["Absolute Music","Classical","Electronic","Folk","Jazz","Metal","Popular","Rock"],ic={class:"flex flex-col gap-5"},lc={class:"flex flex-col md:flex-row gap-3"},rc={class:"flex items-center gap-2"},cc=l("span",{class:"text-gray text-standard-small w-17 text-right flex-shrink-0"},"Duration:",-1),uc={class:"flex items-center gap-2"},dc=l("span",{class:"text-gray text-standard-small w-17 text-right flex-shrink-0"},"Storage:",-1),pc={class:"text-94 text-sm text-center"},mc={key:0,class:"text-sm text-center"},aa=4,fc=ee({__name:"Music",props:["data","campaigns","creatType"],setup(d){const t=ut(d.creatType),a=ke(),{error:n}=xe(),s=Me({prompt:"",samples:"",cover_url:"",duration:aa,music_instrument:"",music_type:""}),i=ae(()=>a.credits<$e.pfp),u=ae(()=>k=>document.querySelector(".ant-slider-step")),p=k=>{B("ParameterClick",{name:k,ext:{create:t}})},c=()=>{var k;T.value&&(((k=T.value)==null?void 0:k.prompt)!==s.prompt&&(s.cover_url="",T.value=null),p("DesiredPrompt"))},r=k=>{s.samples=k},f=async()=>{B("RandomPrompt",{ext:{create:t}}),p("Ramdom");const k=await Et("/api/v1/artworks/prompt?type=music");s.prompt=k.data.value.data.prompt,s.cover_url="",T.value=null},y=M(!1),T=M(),h=()=>{B("NFTPrompt",{ext:{create:t}}),y.value=!0},U=k=>{s.prompt=k==null?void 0:k.prompt,p("NFT Prompt"),T.value=k,s.cover_url=k==null?void 0:k.image},O=M(!1),$=M(""),_=ae(()=>!i.value&&!!s.prompt&&!!s.duration),E=async()=>{var k,S,P,A;if(!(O.value||!a.accessToken)){if(!s.prompt){n("Prompt can not be empty");return}if(!s.duration){n("Duration needs to be greater than 0");return}try{O.value=!0;const g={...je(s),prompt:`${s.prompt}, ${s.music_instrument}, ${s.music_type}`};console.log(g),B("ParameterClick",{name:"CreateNowButton",value:g,ext:{create:t}});const m=await Ee("/api/v1/artworks/music",{method:"post",data:g});$.value=(S=(k=m.data)==null?void 0:k.data)==null?void 0:S.job_id}catch(g){n(((A=(P=g.response)==null?void 0:P.data)==null?void 0:A.error)||g.message||g)}finally{O.value=!1}}},N=()=>{s.prompt="",s.samples="",s.duration=aa,s.music_instrument="",s.music_type="",s.cover_url=""},F=()=>{O.value=!1,$.value="",N(),a.fetchCredit(),lt("/profile")};return(k,S)=>{const P=as,A=Sr,g=Nr,m=Or,x=Je,w=Ur,R=sc,D=rt;return b(),z(D,null,{default:L(()=>[l("div",ic,[v(P,{title:"Text Prompt:",subTitle:"Desired Prompt:"},{extra:L(()=>[l("div",lc,[v(o(le),{class:"main-btn mx-auto",onClick:f},{default:L(()=>[H("Ramdom Prompt")]),_:1}),v(o(le),{class:"main-btn mx-auto",onClick:h},{default:L(()=>[H("NFT Prompt")]),_:1})])]),default:L(()=>[v(o(Ve),{onBlur:c,class:"nfp-input !min-h-10",autoSize:!0,maxlength:9999,value:o(s).prompt,"onUpdate:value":S[0]||(S[0]=C=>o(s).prompt=C)},null,8,["value"])]),_:1}),v(P,{title:"Upload a Reference Music (Optional)"},{default:L(()=>[v(A,{title:"Click or drag an music file to upload here",modelValue:o(s).samples,"onUpdate:modelValue":S[1]||(S[1]=C=>o(s).samples=C),placeholder:"Reference Music",creatTypeFiled:o(t),accept:o(it).MUSIC},null,8,["modelValue","creatTypeFiled","accept"])]),_:1}),v(P,null,{default:L(()=>[v(g,{onUpdate:r,creatTypeFiled:o(t)},null,8,["creatTypeFiled"])]),_:1}),v(P,{title:"Choose a Musical Instrument (Optional)"},{default:L(()=>[v(m,{tags:o(nc),modelValue:o(s).music_instrument,"onUpdate:modelValue":S[2]||(S[2]=C=>o(s).music_instrument=C),eventName:"Music Instrument",onAfterChange:S[3]||(S[3]=C=>p("Music Instrument"))},null,8,["tags","modelValue"])]),_:1}),v(P,{title:"Select a Music Type (Optional)"},{default:L(()=>[v(m,{tags:o(oc),modelValue:o(s).music_type,"onUpdate:modelValue":S[4]||(S[4]=C=>o(s).music_type=C),eventName:"Music Type",onAfterChange:S[5]||(S[5]=C=>p("Music Type"))},null,8,["tags","modelValue"])]),_:1}),v(P,{title:"Fine Tune:"}),v(P,null,{default:L(()=>[l("div",rc,[cc,v(o(Oe),{class:"flex-shrink-0 flex-1",tooltipPlacement:"bottom",tooltipVisible:!0,min:0,max:10,marks:{0:"0s",10:"10s"},getTooltipPopupContainer:o(u),value:o(s).duration,"onUpdate:value":S[6]||(S[6]=C=>o(s).duration=C),onAfterChange:S[7]||(S[7]=C=>p("Duration"))},null,8,["getTooltipPopupContainer","value"])])]),_:1}),v(P,null,{default:L(()=>[l("span",uc,[dc,v(o(ge),{onChange:S[8]||(S[8]=C=>p("BNB Greenfield Storage"))},{default:L(()=>[H("BNB Greenfield")]),_:1})])]),_:1}),v(o(le),{class:"main-btn mt-5 mx-auto",onClick:E,loading:o(O),disabled:!o(_)},{default:L(()=>[H(" Create Now ")]),_:1},8,["loading","disabled"]),l("span",pc,"Cost: "+Q(o($e).music)+" $cNFP",1),o(i)?(b(),V("span",mc,[H(" You don't have enough $cNFP to create. "),v(x,{class:"text-main hover:text-main",to:"/earn"},{default:L(()=>[H("Get More $cNFP >>")]),_:1})])):G("",!0)]),v(w,{visible:o(y),onHidden:S[9]||(S[9]=C=>y.value=!1),onSelect:U},null,8,["visible"]),o($)?(b(),z(R,{key:0,visible:!!o($),jobId:o($),"onUpdate:jobId":S[10]||(S[10]=C=>Se($)?$.value=C:null),onAbort:S[11]||(S[11]=C=>O.value=!1),onDone:F},null,8,["visible","jobId"])):G("",!0)]),_:1})}}}),Rt=d=>(wt("data-v-8c8e62ee"),d=d(),kt(),d),vc={class:"page py-5 flex-col"},hc=Rt(()=>l("div",{class:"hidden"},[l("div",{class:"aspect-4/3 !w-30px"}),l("div",{class:"aspect-3/4 !w-17px"}),l("div",{class:"aspect-9/16"}),l("div",{class:"aspect-16/9"})],-1)),gc={class:"grid grid-cols-4 gap-10 my-5 max-w-510px mx-auto w-full"},xc=["onClick"],bc={key:0,class:"absolute -right-10 -top-4 text-xs bg-red px-2 py-1 rounded-10"},yc=Rt(()=>l("hr",{class:"border-t-secondaryBottom mb-5"},null,-1)),_c={key:2,class:"page flex-col flex-center min-h-screen gap-4"},wc=Rt(()=>l("p",null,"Please Sign In First",-1)),kc=ee({__name:"curate",setup(d){const e=ot(),t=Tt(),a=ke(),n=M("image"),s=["image","pfp","video","music"],i={PFP:"Create Your Avatar"},u=M(),p=M(),c=M(),r=M(),f=()=>{u.value={},c.value={},p.value={},r.value={}},y=M(""),T=M(""),h=M(!1),U=async _=>{const E=await Ee(`api/v1/artworks/${_}`),{data:N}=E.data;f(),N.media_type===Ne.IMAGE?(u.value=N,n.value=s[0]):[Ne.VIDEO,Ne.DEFORUMVIDEO].includes(N.media_type)?(c.value=N,n.value=s[2]):N.media_type===Ne.PFP?(p.value=N,n.value=s[1]):N.media_type===Ne.MUSIC&&(r.value=N,n.value=s[3]),h.value=!1};ie(()=>[e.query,a.accessToken],async()=>{var _,E;f(),h.value=!0,(_=e.query)!=null&&_.artwork_id?await U((E=e.query)==null?void 0:E.artwork_id):(h.value=!1,e.query.creatType?s.includes(String(e.query.creatType))&&(n.value=String(e.query.creatType)):n.value="image")},{immediate:!0}),ie(()=>t.configLoaded,()=>{t.operationConfig.createPage&&t.isActiveDuration(t.operationConfig.createPage.activeTime)?(y.value=t.operationConfig.createPage.text,T.value=t.operationConfig.createPage.url):(y.value="",T.value="")},{immediate:!0});const O=M([]),$=async()=>{var E;const _=await Ga("/api/v1/campaigns");O.value=((E=_.data)==null?void 0:E.data)||[]};return ie(()=>[e.query,a.accessToken],()=>{$()},{immediate:!0}),(_,E)=>{const N=Je,F=re("font-awesome-icon"),k=Ko,S=el,P=rr,A=fc,g=ns,m=rt;return b(),z(m,null,{default:L(()=>[l("div",vc,[y.value?(b(),z(N,{key:0,class:"text-[#FFD912] hover:text-[#FFD912] text-base xl:text-5 w-fit mx-auto",to:T.value,onClick:E[0]||(E[0]=x=>("commonMP"in _?_.commonMP:o(B))("ActEntry",{name:"Create"}))},{default:L(()=>[H(Q(y.value),1)]),_:1},8,["to"])):G("",!0),hc,o(a).accessToken?(b(),V(se,{key:1},[l("div",gc,[(b(),V(se,null,me(s,x=>l("div",{class:pe(["flat-btn h-10 relative",{active:n.value===x}]),onClick:w=>n.value=x},[i[x]?(b(),V("div",bc,Q(i[x]),1)):G("",!0),H(" "+Q(x=="pfp"?x.toUpperCase():o(ct)(x)),1)],10,xc)),64))]),yc,h.value?(b(),z(F,{key:0,icon:"fa-solid fa-spinner",class:"animate-spin"})):(b(),V(se,{key:1},[(b(),z(He,null,[n.value===s[0]?(b(),z(k,{key:0,data:u.value,campaigns:O.value,creatType:s[0]},null,8,["data","campaigns","creatType"])):G("",!0)],1024)),(b(),z(He,null,[n.value===s[1]?(b(),z(S,{key:0,data:p.value,campaigns:O.value,creatType:s[1]},null,8,["data","campaigns","creatType"])):G("",!0)],1024)),(b(),z(He,null,[n.value===s[2]?(b(),z(P,{key:0,data:c.value,campaigns:O.value,creatType:s[2]},null,8,["data","campaigns","creatType"])):G("",!0)],1024)),(b(),z(He,null,[n.value===s[3]?(b(),z(A,{key:0,data:r.value,campaigns:O.value,creatType:s[3]},null,8,["data","campaigns","creatType"])):G("",!0)],1024))],64))],64)):(b(),V("div",_c,[wc,v(g)]))])]),_:1})}}});const zc=Ct(kc,[["__scopeId","data-v-8c8e62ee"]]);export{zc as default};
